import{i as be,j as e,a as pn,B as t,r as H,f as qe,g as Je,h as Ye,k as me,l as c,m as Xe,I as ne,E as Te,G as Re,X as ye,H as _e,R as gn,Z as fn,y as mt,U as Ot,F as $e,K as Fe,S as We,M as se,d as yt,e as ze,C as xe,W as Et,a5 as gt,a6 as ft,D as ht,a7 as jn,a8 as mn,a9 as yn,aa as bn,N as Cn,A as Rt}from"./mui-vendor-BMqVnbO7.js";import{r as l,b as _t,u as vn,f as In,L as Sn}from"./react-vendor-QLNaZ7XN.js";import{r as Ce,u as it,c as dt,b as et,S as Ze,e as Ve,f as ve,R as tt,d as Oe,a as Ee,g as st,h as ce,D as Se,i as de,j as wn,k as Dn,l as Hs,_ as kn}from"./index-CThAIbga.js";import{a as Tn,d as Rn}from"./QueryStatsOutlined-BGuvbjFh.js";import{D as Ne,C as we,P as De,d as nt,u as lt,a as rt}from"./useLongPress-CwVVc9cN.js";import{A as _n,m as On}from"./motion-vendor-D1Sky_hw.js";import"./chart-vendor-DUy3Dv5T.js";var Qt={},En=be;Object.defineProperty(Qt,"__esModule",{value:!0});var Be=Qt.default=void 0,Pn=En(Ce()),Mn=e;Be=Qt.default=(0,Pn.default)((0,Mn.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7"}),"VisibilityOutlined");var es={},Hn=be;Object.defineProperty(es,"__esModule",{value:!0});var Ue=es.default=void 0,zn=Hn(Ce()),An=e;Ue=es.default=(0,zn.default)((0,An.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6m-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14M2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45zm7.5 7.5 2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13m-3.4-3.4 1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53"}),"VisibilityOffOutlined");var ts={},$n=be;Object.defineProperty(ts,"__esModule",{value:!0});var zs=ts.default=void 0,Wn=$n(Ce()),Nn=e;zs=ts.default=(0,Wn.default)((0,Nn.jsx)("path",{d:"M15.61 7.41 14.2 6l-6 6 6 6 1.41-1.41L11.03 12z"}),"NavigateBeforeOutlined");var ss={},Ln=be;Object.defineProperty(ss,"__esModule",{value:!0});var As=ss.default=void 0,Fn=Ln(Ce()),Bn=e;As=ss.default=(0,Fn.default)((0,Bn.jsx)("path",{d:"M10.02 6 8.61 7.41 13.19 12l-4.58 4.59L10.02 18l6-6z"}),"NavigateNextOutlined");var ns={},Un=be;Object.defineProperty(ns,"__esModule",{value:!0});var $s=ns.default=void 0,Vn=Un(Ce()),Gn=e;$s=ns.default=(0,Vn.default)((0,Gn.jsx)("path",{d:"M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zm-7.76-2.78c-1.17-.52-2.61-.9-4.24-.9-1.63 0-3.07.39-4.24.9C6.68 14.13 6 15.21 6 16.39V18h12v-1.61c0-1.18-.68-2.26-1.76-2.74M8.07 16c.09-.23.13-.39.91-.69.97-.38 1.99-.56 3.02-.56s2.05.18 3.02.56c.77.3.81.46.91.69zM12 8c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"GroupsOutlined");var ls={},Kn=be;Object.defineProperty(ls,"__esModule",{value:!0});var Ws=ls.default=void 0,qn=Kn(Ce()),Jn=e;Ws=ls.default=(0,qn.default)((0,Jn.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var rs={},Yn=be;Object.defineProperty(rs,"__esModule",{value:!0});var Ns=rs.default=void 0,Xn=Yn(Ce()),Zn=e;Ns=rs.default=(0,Xn.default)((0,Zn.jsx)("path",{d:"M18 9h-2.5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1H18c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1m-.5 4.5H16v-3h1.5zm-8 1.5H5v-2.5c0-.55.45-1 1-1h2v-1H5V9h3.5c.55 0 1 .45 1 1v1.5c0 .55-.45 1-1 1h-2v1h3zm3.25-4h-1.5V9.5h1.5zm0 3.5h-1.5V13h1.5zM22 6v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h3V2h2v2h6V2h2v2h3c1.1 0 2 .9 2 2m-2 12V6h-7.25v1.5h-1.5V6H4v12h7.25v-1.5h1.5V18z"}),"ScoreboardOutlined");var is={},Qn=be;Object.defineProperty(is,"__esModule",{value:!0});var Ls=is.default=void 0,el=Qn(Ce()),Ds=e;Ls=is.default=(0,el.default)([(0,Ds.jsx)("path",{d:"m21.41 11.41-8.83-8.83c-.37-.37-.88-.58-1.41-.58H4c-1.1 0-2 .9-2 2v7.17c0 .53.21 1.04.59 1.41l8.83 8.83c.78.78 2.05.78 2.83 0l7.17-7.17c.78-.78.78-2.04-.01-2.83M12.83 20 4 11.17V4h7.17L20 12.83z"},"0"),(0,Ds.jsx)("circle",{cx:"6.5",cy:"6.5",r:"1.5"},"1")],"SellOutlined");var os={},tl=be;Object.defineProperty(os,"__esModule",{value:!0});var xt=os.default=void 0,sl=tl(Ce()),jt=e;xt=os.default=(0,sl.default)([(0,jt.jsx)("path",{d:"M12 22C6.49 22 2 17.51 2 12S6.49 2 12 2s10 4.04 10 9c0 3.31-2.69 6-6 6h-1.77c-.28 0-.5.22-.5.5 0 .12.05.23.13.33.41.47.64 1.06.64 1.67 0 1.38-1.12 2.5-2.5 2.5m0-18c-4.41 0-8 3.59-8 8s3.59 8 8 8c.28 0 .5-.22.5-.5 0-.16-.08-.28-.14-.35-.41-.46-.63-1.05-.63-1.65 0-1.38 1.12-2.5 2.5-2.5H16c2.21 0 4-1.79 4-4 0-3.86-3.59-7-8-7"},"0"),(0,jt.jsx)("circle",{cx:"6.5",cy:"11.5",r:"1.5"},"1"),(0,jt.jsx)("circle",{cx:"9.5",cy:"7.5",r:"1.5"},"2"),(0,jt.jsx)("circle",{cx:"14.5",cy:"7.5",r:"1.5"},"3"),(0,jt.jsx)("circle",{cx:"17.5",cy:"11.5",r:"1.5"},"4")],"PaletteOutlined");var as={},nl=be;Object.defineProperty(as,"__esModule",{value:!0});var Fs=as.default=void 0,ll=nl(Ce()),ks=e;Fs=as.default=(0,ll.default)([(0,ks.jsx)("path",{d:"M20 3H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h4v2h8v-2h4c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 14H4V5h16z"},"0"),(0,ks.jsx)("path",{d:"M6 8.25h8v1.5H6zm10.5 1.5H18v-1.5h-1.5V7H15v4h1.5zm-6.5 2.5h8v1.5h-8zM7.5 15H9v-4H7.5v1.25H6v1.5h1.5z"},"1")],"DisplaySettingsOutlined");var cs={},rl=be;Object.defineProperty(cs,"__esModule",{value:!0});var Bs=cs.default=void 0,il=rl(Ce()),ol=e;Bs=cs.default=(0,il.default)((0,ol.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"StorageOutlined");var ds={},al=be;Object.defineProperty(ds,"__esModule",{value:!0});var Us=ds.default=void 0,cl=al(Ce()),dl=e;Us=ds.default=(0,cl.default)((0,dl.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined");function xl({teams:u,setTeams:p,setMembers:D,selectedTeam:C,setSelectedTeam:k,createTeam:L,showSnackbar:W}){const[V,F]=l.useState(!1),[z,K]=l.useState(""),[f,j]=l.useState(null),y=pn(),G=it("md"),{handleTouchEnd:Q,setSwiperRef:J,getSwiperRef:Y}=dt(2),[N,O]=l.useState(""),E="tutorial-team-swipe",[ue,X]=l.useState(()=>G&&u.length>0&&!localStorage.getItem(E)),[ie,te]=l.useState(()=>{var n;return((n=u[0])==null?void 0:n.id)||""}),ge=l.useRef(u.length),he=n=>{if(N){const g=Y(N);g&&(g.allowTouchMove=!0),O("")}if(!n.destination)return;const a=Array.from(u),[o]=a.splice(n.source.index,1);a.splice(n.destination.index,0,o),p(a)},ke=()=>{j(-1),K(""),F(!0)},x=n=>{j(n),K(u[n].name),F(!0)},I=()=>{if(f===-1){const n=L(z);p(a=>[...a,n]),D(a=>({...a,[n.id]:[]})),C||k(n.id),G&&!localStorage.getItem(E)&&(te(n.id),X(!0))}else if(f!==null){const n=u[f].id;p(a=>a.map((o,g)=>g===f?{...o,name:z}:o)),C===n&&k(n)}F(!1)},m=()=>{F(!1)},S=n=>{var q;const a=u[n];let o=[];D(Z=>{o=Z[a.id]||[];const B={...Z};return delete B[a.id],B});const g=C,T=u.filter((Z,B)=>B!==n);p(T),C===a.id&&k(((q=T[0])==null?void 0:q.id)||""),W("チームを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{p(Z=>{const B=[...Z];return B.splice(n,0,a),B}),D(Z=>({...Z,[a.id]:o})),k(g)},autoHideDuration:5e3})};l.useEffect(()=>{G&&u.length>0&&ge.current===0&&!localStorage.getItem(E)&&(te(u[0].id),X(!0)),ge.current=u.length},[u,G]);const $=({t:n,idx:a,dragProvided:o})=>{const g=o.dragHandleProps,{onPointerDown:T,...q}=g||{},Z=lt(B=>{T==null||T(B);const oe=Y(n.id);oe&&(oe.allowTouchMove=!1),O(n.id)});return e.jsx(t,{ref:o.innerRef,...o.draggableProps,style:o.draggableProps.style,children:e.jsx(gn,{open:ue&&ie===n.id,onClose:()=>X(!1),disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,arrow:!0,placement:"bottom",TransitionComponent:fn,slotProps:{tooltip:{sx:{backgroundColor:"#F5F5F9",color:"rgba(0, 0, 0, 0.87)",border:`1px solid ${y.palette.text.secondary}`,pointerEvents:"auto"}},arrow:{sx:{color:"#F5F5F9","&::before":{border:`1px solid ${y.palette.text.secondary}`}}}},title:e.jsxs(t,{sx:{p:1,maxWidth:260},children:[e.jsxs(mt,{variant:"body2",children:["左にスワイプすることで削除メニューが表示されます",e.jsx("br",{}),"他画面の一覧においても同様に削除することが可能です"]}),e.jsx(t,{sx:{textAlign:"right",mt:1},children:e.jsx(Ot,{component:"button",variant:"body2",onClick:()=>{localStorage.setItem(E,"1"),X(!1)},children:"了解した"})})]}),children:e.jsx(t,{children:e.jsxs(st,{onSwiper:B=>J(n.id,B),threshold:20,slidesPerView:"auto",style:{overflow:"hidden"},onTouchStart:(B,oe)=>oe.stopPropagation(),onTouchEnd:B=>Q(n.id,B),children:[e.jsx(ce,{style:{width:"100%",flex:"0 0 auto"},children:e.jsx(t,{...q,...Z,sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",bgcolor:"background.paper",touchAction:N===n.id?"none":"pan-y",cursor:"grab"},children:e.jsx(t,{sx:{flexGrow:1},children:n.name})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.main"},children:e.jsx(ne,{size:"small",onClick:()=>x(a),children:e.jsx(rt,{fontSize:"small",sx:{color:"common.white"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"error.main"},children:e.jsx(ne,{size:"small",onClick:()=>S(a),children:e.jsx(ve,{fontSize:"small",sx:{color:"common.white"}})})})})]})})})})};return e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsx(t,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(H,{onClick:ke,variant:"contained",startIcon:e.jsx(et,{}),children:"追加"})}),e.jsx(Ze,{component:qe,storageKey:"teams-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsx(Ne,{onDragEnd:he,children:G?e.jsx(we,{droppableId:"teams",children:n=>e.jsxs(t,{ref:n.innerRef,...n.droppableProps,children:[e.jsx(t,{sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",...Ve},children:e.jsx(t,{sx:{flexGrow:1},children:"チーム名"})}),u.map((a,o)=>e.jsx(De,{draggableId:a.id,index:o,children:g=>e.jsx($,{t:a,idx:o,dragProvided:g})},a.id)),n.placeholder]})}):e.jsxs(Je,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:n=>n.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{}),e.jsx(c,{children:"チーム名"}),e.jsx(c,{})]})}),e.jsx(we,{droppableId:"teams",children:n=>e.jsxs(Xe,{ref:n.innerRef,...n.droppableProps,children:[u.map((a,o)=>e.jsx(De,{draggableId:a.id,index:o,children:g=>e.jsxs(me,{ref:g.innerRef,...g.draggableProps,style:g.draggableProps.style,onClick:()=>x(o),sx:{cursor:"pointer",height:50},children:[e.jsx(c,{padding:"checkbox",onClick:T=>T.stopPropagation(),children:e.jsx(t,{onClick:T=>T.stopPropagation(),...g.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",touchAction:"none",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(nt,{})})}),e.jsx(c,{children:a.name}),e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:T=>T.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{size:"small",onClick:()=>S(o),sx:{width:24,height:24},children:e.jsx(ve,{fontSize:"small",color:"error"})})})})]})},a.id)),n.placeholder]})})]})})})]}),e.jsxs(tt,{open:V,onClose:m,children:[e.jsxs(Te,{children:["チーム名",f===-1?"追加":"編集"]}),e.jsx(Re,{sx:{mt:2},children:e.jsx(ye,{label:"チーム名",value:z,onChange:n=>K(n.target.value),fullWidth:!0,margin:"dense"})}),e.jsxs(_e,{children:[e.jsx(H,{onClick:m,startIcon:e.jsx(Oe,{}),color:"inherit",sx:{color:{xs:"black",md:"inherit"}},children:"キャンセル"}),e.jsx(H,{onClick:I,disabled:z.trim()==="",startIcon:e.jsx(Ee,{}),children:"OK"})]})]})]})}const Ts=32,Kt=80,qt=200,Jt=200,Yt=64,hl=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function ul({teams:u,members:p,setMembers:D,selectedTeam:C,setSelectedTeam:k,showSnackbar:L}){const[W,V]=l.useState(null),[F,z]=l.useState(""),[K,f]=l.useState(""),[j,y]=l.useState([]),[G,Q]=l.useState(!0),[J,Y]=l.useState(!1),N=it("md"),O=it("sm"),E=qt+16+(O?0:Kt+Jt+Yt),{handleTouchEnd:ue,setSwiperRef:X,getSwiperRef:ie}=dt(2),[te,ge]=l.useState(""),he=n=>{if(te){const g=ie(te);g&&(g.allowTouchMove=!0),ge("")}if(!n.destination||!C)return;const a=Array.from(p[C]||[]),[o]=a.splice(n.source.index,1);a.splice(n.destination.index,0,o),D(g=>({...g,[C]:a}))},ke=()=>{V(-1),z(""),f(""),y([]),Q(!0),Y(!0)},x=n=>{V(n);const a=p[C][n];z(String(a.no)),f(a.name),y(a.positions||[]),Q(a.visible!==!1),Y(!0)},I=()=>{C&&(W===-1?D(n=>({...n,[C]:[...n[C]||[],{id:hl(),no:Number(F),name:K,positions:j,visible:G}]})):W!==null&&D(n=>({...n,[C]:n[C].map((a,o)=>o===W?{...a,no:Number(F),name:K,positions:j,visible:G}:a)})),Y(!1))},m=()=>{Y(!1)},S=n=>{if(!C)return;let a;D(o=>{const g=[...o[C]||[]];a=g[n];const T=g.filter((q,Z)=>Z!==n);return{...o,[C]:T}}),L("メンバーを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{a&&D(o=>{const g=[...o[C]||[]];return g.splice(n,0,a),{...o,[C]:g}})},autoHideDuration:5e3})},$=({m:n,idx:a,dragProvided:o})=>{const g=o.dragHandleProps,{onPointerDown:T,...q}=g||{},Z=lt(B=>{T==null||T(B);const oe=ie(n.id);oe&&(oe.allowTouchMove=!1),ge(n.id)});return e.jsx(t,{ref:o.innerRef,...o.draggableProps,style:o.draggableProps.style,children:e.jsxs(st,{onSwiper:B=>X(n.id,B),threshold:20,slidesPerView:"auto",style:{overflow:"hidden",width:"100%",minWidth:E},onTouchStart:(B,oe)=>oe.stopPropagation(),onTouchEnd:B=>ue(n.id,B),children:[e.jsx(ce,{style:{width:"100%",minWidth:E,flex:"0 0 auto"},children:e.jsxs(t,{...q,...Z,sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",bgcolor:"background.paper",cursor:"grab",touchAction:te===n.id?"none":"pan-y",width:"100%",minWidth:E},children:[!O&&e.jsx(t,{sx:{width:Kt,textAlign:"center"},children:n.no}),e.jsx(t,{sx:{width:qt,flexShrink:0,whiteSpace:"nowrap",overflow:"hidden"},children:n.name}),!O&&e.jsx(t,{sx:{width:Jt,whiteSpace:"nowrap",overflow:"hidden"},children:(n.positions||[]).join(", ")}),!O&&e.jsx(t,{sx:{width:Yt,display:"flex",justifyContent:"center"},children:n.visible===!1?e.jsx(Ue,{}):e.jsx(Be,{})})]})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.main"},children:e.jsx(ne,{size:"small",onClick:()=>x(a),children:e.jsx(rt,{fontSize:"small",sx:{color:"common.white"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"error.main"},children:e.jsx(ne,{size:"small",onClick:()=>S(a),children:e.jsx(ve,{fontSize:"small",sx:{color:"common.white"}})})})})]})})};return e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsx(t,{sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"team-select-label",children:"チーム"}),e.jsx(We,{labelId:"team-select-label",value:C,label:"チーム",onChange:n=>k(n.target.value),children:u.map(n=>e.jsx(se,{value:n.id,children:n.name},n.id))})]})}),e.jsx(t,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mt:2,mb:1},children:e.jsx(H,{onClick:ke,variant:"contained",startIcon:e.jsx(et,{}),children:"追加"})}),e.jsx(Ze,{component:qe,storageKey:"members-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsx(Ne,{onDragEnd:he,children:N?e.jsx(we,{droppableId:"members",children:n=>{var a;return e.jsxs(t,{ref:n.innerRef,...n.droppableProps,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",width:"100%",minWidth:E,...Ve},children:[!O&&e.jsx(t,{sx:{width:Kt,textAlign:"center"},children:"番号"}),e.jsx(t,{sx:{width:qt,flexShrink:0},children:"名前"}),!O&&e.jsx(t,{sx:{width:Jt},children:"ポジション"}),!O&&e.jsx(t,{sx:{width:Yt,textAlign:"center"},children:"表示"})]}),(a=p[C])==null?void 0:a.map((o,g)=>e.jsx(De,{draggableId:o.id,index:g,children:T=>e.jsx($,{m:o,idx:g,dragProvided:T})},o.id)),n.placeholder]})}}):e.jsxs(Je,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:n=>n.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{}),e.jsx(c,{children:"番号"}),e.jsx(c,{children:"名前"}),!O&&e.jsx(c,{children:"ポジション"}),e.jsx(c,{children:"表示"}),e.jsx(c,{})]})}),e.jsx(we,{droppableId:"members",children:n=>{var a;return e.jsxs(Xe,{ref:n.innerRef,...n.droppableProps,children:[(a=p[C])==null?void 0:a.map((o,g)=>e.jsx(De,{draggableId:o.id,index:g,children:T=>e.jsxs(me,{ref:T.innerRef,...T.draggableProps,"data-index":g,onClick:()=>x(g),sx:{cursor:"pointer",height:50},children:[e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:q=>q.stopPropagation(),...T.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:Ts,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(nt,{})})}),e.jsx(c,{children:o.no}),e.jsx(c,{children:o.name}),!O&&e.jsx(c,{children:(o.positions||[]).join(", ")}),e.jsx(c,{children:o.visible===!1?e.jsx(Ue,{}):e.jsx(Be,{})}),e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:q=>q.stopPropagation(),sx:{width:Ts,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{size:"small",onClick:()=>S(g),sx:{width:24,height:24},children:e.jsx(ve,{fontSize:"small",color:"error"})})})})]})},o.id)),n.placeholder]})}})]})})})]}),e.jsxs(tt,{open:J,onClose:m,children:[e.jsxs(Te,{children:["メンバー",W===-1?"追加":"編集"]}),e.jsxs(Re,{children:[e.jsx(ye,{label:"番号",type:"number",value:F,onChange:n=>z(n.target.value),fullWidth:!0,margin:"dense"}),e.jsx(ye,{label:"名前",value:K,onChange:n=>f(n.target.value),fullWidth:!0,margin:"dense"}),e.jsxs($e,{margin:"dense",fullWidth:!0,children:[e.jsx(Fe,{id:"positions-label",children:"ポジション"}),e.jsxs(We,{labelId:"positions-label",multiple:!0,value:j,label:"ポジション",onChange:n=>y(typeof n.target.value=="string"?n.target.value.split(","):n.target.value),renderValue:n=>n.join(", "),children:[e.jsx(se,{value:"レフト",children:"レフト"}),e.jsx(se,{value:"センター",children:"センター"}),e.jsx(se,{value:"ライト",children:"ライト"}),e.jsx(se,{value:"セッター",children:"セッター"}),e.jsx(se,{value:"リベロ",children:"リベロ"})]})]}),e.jsxs(yt,{value:G?"visible":"hidden",exclusive:!0,onChange:(n,a)=>a&&Q(a==="visible"),fullWidth:!0,sx:{display:"flex",mt:1},children:[e.jsxs(ze,{value:"visible",sx:{flex:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(Be,{sx:{mr:1}}),"表示"]}),e.jsxs(ze,{value:"hidden",sx:{flex:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(Ue,{sx:{mr:1}}),"非表示"]})]})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:m,startIcon:e.jsx(Oe,{}),color:"inherit",children:"キャンセル"}),e.jsx(H,{onClick:I,disabled:F==="",startIcon:e.jsx(Ee,{}),children:"OK"})]})]})]})}const Rs=!1;function pl({openAddPlayDialog:u,playCategories:p,setPlayCategories:D,openEditPlayDialog:C,scoreInput:k,renderIcon:L,rallyCategoryTags:W,handlePlayDelete:V,openAddDetailDialog:F,playDetails:z,setPlayDetails:K,openEditDetailDialog:f,theme:j,rallyDetailTags:y,handleDetailDelete:G}){const Q=x=>{if(ie){const S=X(ie);S&&(S.allowTouchMove=!0),te("")}if(!x.destination)return;const I=Array.from(p),[m]=I.splice(x.source.index,1);I.splice(x.destination.index,0,m),D(I)},J=_t.useMemo(()=>{const x={};return p.forEach(I=>{x[I.id]=[]}),z.forEach((I,m)=>{(x[I.playCategoryId]||(x[I.playCategoryId]=[])).push(m)}),x},[p,z]),Y=x=>{if(ie){const T=X(ie);T&&(T.allowTouchMove=!0),te("")}const{source:I,destination:m}=x;if(!m||I.droppableId!==m.droppableId)return;const S=I.droppableId,$=S==="play-details"?Object.values(J).flat():J[S.replace("play-details-","")];if(!$)return;const n=$[I.index],a=$[m.index],o=Array.from(z),[g]=o.splice(n,1);o.splice(a,0,g),K(o)},N=it("md"),O=it("sm"),{handleTouchEnd:E,setSwiperRef:ue,getSwiperRef:X}=dt(2),[ie,te]=_t.useState("");let ge=0;const he=({p:x,idx:I,dragProvided:m})=>{const S=m.dragHandleProps,{onPointerDown:$,...n}=S||{},a=lt(o=>{$==null||$(o);const g=X(x.id);g&&(g.allowTouchMove=!1),te(x.id)});return e.jsx(t,{ref:m.innerRef,...m.draggableProps,style:m.draggableProps.style,children:e.jsxs(st,{onSwiper:o=>ue(x.id,o),threshold:20,slidesPerView:"auto",style:{overflow:"hidden"},onTouchStart:(o,g)=>g.stopPropagation(),onTouchEnd:o=>E(x.id,o),children:[e.jsx(ce,{style:{width:"100%",flex:"0 0 auto"},children:e.jsxs(t,{...n,...a,sx:{display:"grid",gridTemplateColumns:O?"1fr":"1fr 1fr 64px",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",bgcolor:"background.paper",touchAction:ie===x.id?"none":"pan-y",cursor:"grab"},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.jsx(xe,{label:x.name,size:"small",variant:"outlined",sx:{backgroundColor:"transparent",borderColor:x.color,color:x.color}}),k.showRallyIcons&&e.jsx(t,{children:L(x)})]}),!O&&e.jsx(t,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:(x.tags||[]).map(o=>{const g=W.find(q=>q.id===o),T=(g==null?void 0:g.color)||de;return e.jsx(xe,{label:(g==null?void 0:g.name)||o,size:"small",sx:{backgroundColor:T,color:"#fff"}},o)})}),!O&&e.jsx(t,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:x.visible===!1?e.jsx(Ue,{}):e.jsx(Be,{})})]})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.main"},children:e.jsx(ne,{size:"small",onClick:()=>C(I),children:e.jsx(rt,{fontSize:"small",sx:{color:"common.white"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"error.main"},children:e.jsx(ne,{size:"small",onClick:()=>V(I),disabled:x.id==="init-serve",children:e.jsx(ve,{fontSize:"small",sx:{color:"common.white"}})})})})]})})},ke=({d:x,i:I,dragProvided:m})=>{const S=m.dragHandleProps,{onPointerDown:$,...n}=S||{},a=lt(o=>{$==null||$(o);const g=X(x.id);g&&(g.allowTouchMove=!1),te(x.id)});return e.jsx(t,{ref:m.innerRef,...m.draggableProps,style:m.draggableProps.style,children:e.jsxs(st,{onSwiper:o=>ue(x.id,o),threshold:20,slidesPerView:"auto",style:{overflow:"hidden"},onTouchStart:(o,g)=>g.stopPropagation(),onTouchEnd:o=>E(x.id,o),children:[e.jsx(ce,{style:{width:"100%",flex:"0 0 auto"},children:e.jsxs(t,{...n,...a,sx:{display:"grid",gridTemplateColumns:O?"1fr":"1fr 1fr 1fr 1fr 64px",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",bgcolor:"background.paper",touchAction:ie===x.id?"none":"pan-y",cursor:"grab"},children:[e.jsx(t,{children:e.jsx(xe,{label:x.name,size:"small",sx:{backgroundColor:x.pointType==="得点"?j.scoreColor:j.lossColor,border:`1px solid ${x.pointType==="得点"?j.scoreColor:j.lossColor}`,color:"#fff"}})}),!O&&e.jsxs(e.Fragment,{children:[e.jsx(t,{children:x.pointType}),e.jsx(t,{children:x.pointUnitType}),e.jsx(t,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:(x.tags||[]).map(o=>{const g=y.find(q=>q.id===o),T=(g==null?void 0:g.color)||de;return e.jsx(xe,{label:(g==null?void 0:g.name)||o,size:"small",sx:{backgroundColor:T,color:"#fff"}},o)})}),e.jsx(t,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:x.visible===!1?e.jsx(Ue,{}):e.jsx(Be,{})})]})]})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.main"},children:e.jsx(ne,{size:"small",onClick:()=>f(I),children:e.jsx(rt,{fontSize:"small",sx:{color:"common.white"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"error.main"},children:e.jsx(ne,{size:"small",onClick:()=>G(I),children:e.jsx(ve,{fontSize:"small",sx:{color:"common.white"}})})})})]})})};return e.jsxs(t,{children:[e.jsx(t,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(H,{onClick:u,variant:"contained",startIcon:e.jsx(et,{}),children:"追加"})}),e.jsx(Ze,{component:qe,storageKey:"play-category-grid",sx:{maxWidth:1024,mx:"auto"},children:N?e.jsx(Ne,{onDragEnd:Q,children:e.jsx(we,{droppableId:"play-categories",children:x=>e.jsxs(t,{ref:x.innerRef,...x.droppableProps,children:[e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:O?"1fr":"1fr 1fr 64px",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",...Ve},children:[e.jsx(t,{children:"プレー区分"}),!O&&e.jsxs(e.Fragment,{children:[e.jsx(t,{children:"ラリー区分タグ"}),e.jsx(t,{children:"表示"})]})]}),p.map((I,m)=>e.jsx(De,{draggableId:I.id,index:m,children:S=>e.jsx(he,{p:I,idx:m,dragProvided:S})},I.id)),x.placeholder]})})}):e.jsxs(Je,{size:"small",sx:{minWidth:600},children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:x=>x.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{sx:{width:48}}),e.jsx(c,{children:"プレー区分"}),Rs,k.showRallyIcons&&e.jsx(c,{children:"アイコン"}),e.jsx(c,{children:"タグ"}),e.jsx(c,{children:"表示"}),e.jsx(c,{})]})}),e.jsx(Ne,{onDragEnd:Q,children:e.jsx(we,{droppableId:"play-categories",children:x=>e.jsxs(Xe,{ref:x.innerRef,...x.droppableProps,children:[p.map((I,m)=>e.jsx(De,{draggableId:I.id,index:m,children:S=>e.jsxs(me,{ref:S.innerRef,...S.draggableProps,"data-index":m,onClick:()=>C(m),sx:{cursor:"pointer",height:50},children:[e.jsx(c,{padding:"checkbox",sx:{width:48},children:e.jsx(t,{onClick:$=>$.stopPropagation(),...S.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(nt,{})})}),e.jsx(c,{children:e.jsx(xe,{label:I.name,size:"small",variant:"outlined",sx:{backgroundColor:"transparent",borderColor:I.color,color:I.color}})}),Rs,k.showRallyIcons&&e.jsx(c,{children:L(I)}),e.jsx(c,{children:(I.tags||[]).map($=>{const n=W.find(o=>o.id===$),a=(n==null?void 0:n.color)||de;return e.jsx(xe,{label:(n==null?void 0:n.name)||$,size:"small",sx:{mr:.5,mb:.5,backgroundColor:a,color:"#fff"}},$)})}),e.jsx(c,{children:I.visible===!1?e.jsx(Ue,{}):e.jsx(Be,{})}),e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:$=>$.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{size:"small",onClick:I.id==="init-serve"?void 0:()=>V(m),disabled:I.id==="init-serve",sx:{width:24,height:24},children:e.jsx(ve,{fontSize:"small",color:I.id==="init-serve"?"disabled":"error"})})})})]})},I.id)),x.placeholder]})})})]})}),e.jsx(t,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1,mt:2},children:e.jsx(H,{onClick:F,variant:"contained",startIcon:e.jsx(et,{}),children:"追加"})}),e.jsx(Ze,{component:qe,storageKey:"play-detail-grid",sx:{maxWidth:1024,mx:"auto"},children:N?e.jsx(Ne,{onDragEnd:Y,children:e.jsxs(t,{children:[e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:O?"1fr":"1fr 1fr 1fr 1fr 64px",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",...Ve},children:[e.jsx(t,{children:"プレー詳細"}),!O&&e.jsxs(e.Fragment,{children:[e.jsx(t,{children:"得点区分"}),e.jsx(t,{children:"得失点単位区分"}),e.jsx(t,{children:"タグ"}),e.jsx(t,{children:"表示"})]})]}),p.map(x=>{const I=z.map((m,S)=>({d:m,i:S})).filter(({d:m})=>m.playCategoryId===x.id);return e.jsxs(_t.Fragment,{children:[e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",px:1,borderBottom:1,borderColor:"divider",...Ve},children:x.name}),e.jsx(we,{droppableId:`play-details-${x.id}`,children:m=>e.jsxs(t,{ref:m.innerRef,...m.droppableProps,children:[I.map(({d:S,i:$},n)=>e.jsx(De,{draggableId:S.id,index:n,children:a=>e.jsx(ke,{d:S,i:$,dragProvided:a})},S.id)),m.placeholder]})})]},x.id)})]})}):e.jsxs(Je,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:x=>x.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{}),e.jsx(c,{children:"プレー詳細"}),e.jsx(c,{children:"得点区分"}),e.jsx(c,{children:"得失点単位区分"}),e.jsx(c,{children:"タグ"}),e.jsx(c,{children:"表示"}),e.jsx(c,{})]})}),e.jsx(Ne,{onDragEnd:Y,children:e.jsx(we,{droppableId:"play-details",children:x=>e.jsxs(Xe,{ref:x.innerRef,...x.droppableProps,children:[p.map(I=>e.jsxs(_t.Fragment,{children:[e.jsx(me,{sx:{backgroundColor:m=>m.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:e.jsx(c,{colSpan:7,children:I.name})}),z.map((m,S)=>({d:m,i:S})).filter(({d:m})=>m.playCategoryId===I.id).map(({d:m,i:S})=>{const $=ge++;return e.jsx(De,{draggableId:m.id,index:$,children:n=>e.jsxs(me,{ref:n.innerRef,...n.draggableProps,"data-index":S,onClick:()=>f(S),sx:{cursor:"pointer",height:50},children:[e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:a=>a.stopPropagation(),...n.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(nt,{})})}),e.jsx(c,{children:e.jsx(xe,{label:m.name,size:"small",sx:{backgroundColor:m.pointType==="得点"?j.scoreColor:j.lossColor,border:`1px solid ${m.pointType==="得点"?j.scoreColor:j.lossColor}`,color:"#fff"}})}),e.jsx(c,{children:m.pointType}),e.jsx(c,{children:m.pointUnitType}),e.jsx(c,{children:(m.tags||[]).map(a=>{const o=y.find(T=>T.id===a),g=(o==null?void 0:o.color)||de;return e.jsx(xe,{label:(o==null?void 0:o.name)||a,size:"small",sx:{mr:.5,mb:.5,backgroundColor:g,color:"#fff"}},a)})}),e.jsx(c,{children:m.visible===!1?e.jsx(Ue,{}):e.jsx(Be,{})}),e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:a=>a.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{size:"small",onClick:()=>G(S),sx:{width:24,height:24},children:e.jsx(ve,{fontSize:"small",color:"error"})})})})]})},m.id)})]},I.id)),x.placeholder]})})})]})})]})}const _s=!1,Os=!1,Es=!1;function gl({tags:u,setTags:p,rallyCategoryTags:D,setRallyCategoryTags:C,rallyDetailTags:k,setRallyDetailTags:L,setMatches:W,setPlayCategories:V,setPlayDetails:F,showSnackbar:z}){const[K,f]=l.useState(null),[j,y]=l.useState(""),[G,Q]=l.useState(de),[J,Y]=l.useState(!1),[N,O]=l.useState(null),[E,ue]=l.useState(""),[X,ie]=l.useState(de),[te,ge]=l.useState(!1),[he,ke]=l.useState(null),[x,I]=l.useState(""),[m,S]=l.useState(de),[$,n]=l.useState(!1),a=it("md"),{handleTouchEnd:o,setSwiperRef:g,getSwiperRef:T}=dt(2),{handleTouchEnd:q,setSwiperRef:Z,getSwiperRef:B}=dt(2),{handleTouchEnd:oe,setSwiperRef:Ie,getSwiperRef:s}=dt(2),[d,b]=l.useState(""),[P,M]=l.useState(""),[A,fe]=l.useState(""),ae=i=>{if(d){const w=T(d);w&&(w.allowTouchMove=!0),b("")}if(!i.destination)return;const h=Array.from(u),[_]=h.splice(i.source.index,1);h.splice(i.destination.index,0,_),p(h)},ee=i=>{if(P){const w=B(P);w&&(w.allowTouchMove=!0),M("")}if(!i.destination)return;const h=Array.from(D),[_]=h.splice(i.source.index,1);h.splice(i.destination.index,0,_),C(h)},Ge=i=>{if(A){const w=s(A);w&&(w.allowTouchMove=!0),fe("")}if(!i.destination)return;const h=Array.from(k),[_]=h.splice(i.source.index,1);h.splice(i.destination.index,0,_),L(h)},bt=()=>{f(-1),y(""),Q(de),Y(!0)},Ct=i=>{f(i),y(u[i].name),Q(u[i].color),Y(!0)},ut=()=>{K===-1?p(i=>[...i,{id:crypto.randomUUID(),name:j,color:G}]):K!==null&&p(i=>i.map((h,_)=>_===K?{...h,name:j,color:G}:h)),Y(!1)},Ae=()=>{Y(!1)},Le=i=>{const h=u[i];let _=[];p(w=>w.filter((R,le)=>le!==i)),W(w=>(_=w.map(R=>({...R,tags:[...R.tags]})),w.map(R=>({...R,tags:R.tags.filter(le=>le!==h.id)})))),z("試合タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{p(w=>{const R=[...w];return R.splice(i,0,h),R}),W(()=>_)},autoHideDuration:5e3})},ot=()=>{O(-1),ue(""),ie(de),ge(!0)},vt=i=>{O(i),ue(D[i].name),ie(D[i].color),ge(!0)},Qe=()=>{N===-1?C(i=>[...i,{id:crypto.randomUUID(),name:E,color:X}]):N!==null&&C(i=>i.map((h,_)=>_===N?{...h,name:E,color:X}:h)),ge(!1)},It=()=>{ge(!1)},Me=i=>{const h=D[i];let _=[];C(w=>w.filter((R,le)=>le!==i)),V(w=>(_=w.map(R=>({...R,tags:[...R.tags||[]]})),w.map(R=>({...R,tags:(R.tags||[]).filter(le=>le!==h.id)})))),z("プレー区分タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{C(w=>{const R=[...w];return R.splice(i,0,h),R}),V(()=>_)},autoHideDuration:5e3})},Pt=()=>{ke(-1),I(""),S(de),n(!0)},He=i=>{ke(i),I(k[i].name),S(k[i].color),n(!0)},Mt=()=>{he===-1?L(i=>[...i,{id:crypto.randomUUID(),name:x,color:m}]):he!==null&&L(i=>i.map((h,_)=>_===he?{...h,name:x,color:m}:h)),n(!1)},Ke=()=>{n(!1)},St=i=>{const h=k[i];let _=[];L(w=>w.filter((R,le)=>le!==i)),F(w=>(_=w.map(R=>({...R,tags:[...R.tags||[]]})),w.map(R=>({...R,tags:(R.tags||[]).filter(le=>le!==h.id)})))),z("プレー詳細タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{L(w=>{const R=[...w];return R.splice(i,0,h),R}),F(()=>_)},autoHideDuration:5e3})};return e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsxs(t,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(t,{sx:{fontWeight:"bold"},children:"試合タグ"}),e.jsx(H,{onClick:bt,variant:"contained",startIcon:e.jsx(et,{}),children:"追加"})]}),e.jsx(Ze,{component:qe,storageKey:"match-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsx(Ne,{onDragEnd:ae,children:a?e.jsx(we,{droppableId:"match-tags",children:i=>e.jsxs(t,{ref:i.innerRef,...i.droppableProps,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",...Ve},children:[e.jsx(t,{sx:{width:32}}),e.jsx(t,{sx:{flexGrow:1},children:"タグ名称"})]}),u.map((h,_)=>e.jsx(De,{draggableId:h.id,index:_,children:w=>{const R=w.dragHandleProps,{onPointerDown:le,...at}=R||{},ct=lt(re=>{le==null||le(re);const je=T(h.id);je&&(je.allowTouchMove=!1),b(h.id)});return e.jsx(t,{ref:w.innerRef,...w.draggableProps,style:w.draggableProps.style,children:e.jsxs(st,{onSwiper:re=>g(h.id,re),threshold:20,slidesPerView:"auto",style:{overflow:"hidden"},onTouchStart:(re,je)=>je.stopPropagation(),onTouchEnd:re=>o(h.id,re),children:[e.jsx(ce,{style:{width:"100%",flex:"0 0 auto"},children:e.jsx(t,{...at,...ct,sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",bgcolor:"background.paper",cursor:"grab",touchAction:d===h.id?"none":"pan-y"},children:e.jsx(t,{sx:{flexGrow:1},children:e.jsx(xe,{label:h.name,size:"small",sx:{backgroundColor:h.color,border:`1px solid ${h.color}`,color:"#fff"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.main"},children:e.jsx(ne,{size:"small",onClick:()=>Ct(_),children:e.jsx(rt,{fontSize:"small",sx:{color:"common.white"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"error.main"},children:e.jsx(ne,{size:"small",onClick:()=>Le(_),children:e.jsx(ve,{fontSize:"small",sx:{color:"common.white"}})})})})]})})}},h.id)),i.placeholder]})}):e.jsxs(Je,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:i=>i.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{}),e.jsx(c,{children:"タグ名称"}),_s,e.jsx(c,{})]})}),e.jsx(we,{droppableId:"match-tags",children:i=>e.jsxs(Xe,{ref:i.innerRef,...i.droppableProps,children:[u.map((h,_)=>e.jsx(De,{draggableId:h.id,index:_,children:w=>e.jsxs(me,{ref:w.innerRef,...w.draggableProps,"data-index":_,onClick:()=>Ct(_),sx:{cursor:"pointer",height:50},children:[e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:R=>R.stopPropagation(),...w.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(nt,{})})}),e.jsx(c,{children:e.jsx(xe,{label:h.name,size:"small",sx:{backgroundColor:h.color,border:`1px solid ${h.color}`,color:"#fff"}})}),_s,e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:R=>R.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{size:"small",onClick:()=>Le(_),sx:{width:24,height:24},children:e.jsx(ve,{fontSize:"small",color:"error"})})})})]})},h.id)),i.placeholder]})})]})})}),e.jsxs(t,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,mt:2},children:[e.jsx(t,{sx:{fontWeight:"bold"},children:"プレー区分タグ"}),e.jsx(H,{onClick:ot,variant:"contained",startIcon:e.jsx(et,{}),children:"追加"})]}),e.jsx(Ze,{component:qe,storageKey:"play-category-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsx(Ne,{onDragEnd:ee,children:a?e.jsx(we,{droppableId:"rally-category-tags",children:i=>e.jsxs(t,{ref:i.innerRef,...i.droppableProps,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",...Ve},children:[e.jsx(t,{sx:{width:32}}),e.jsx(t,{sx:{flexGrow:1},children:"タグ名称"})]}),D.map((h,_)=>e.jsx(De,{draggableId:h.id,index:_,children:w=>{const R=w.dragHandleProps,{onPointerDown:le,...at}=R||{},ct=lt(re=>{le==null||le(re);const je=B(h.id);je&&(je.allowTouchMove=!1),M(h.id)});return e.jsx(t,{ref:w.innerRef,...w.draggableProps,style:w.draggableProps.style,children:e.jsxs(st,{onSwiper:re=>Z(h.id,re),threshold:20,slidesPerView:"auto",style:{overflow:"hidden"},onTouchStart:(re,je)=>je.stopPropagation(),onTouchEnd:re=>q(h.id,re),children:[e.jsx(ce,{style:{width:"100%",flex:"0 0 auto"},children:e.jsx(t,{...at,...ct,sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",bgcolor:"background.paper",cursor:"grab",touchAction:P===h.id?"none":"pan-y"},children:e.jsx(t,{sx:{flexGrow:1},children:e.jsx(xe,{label:h.name,size:"small",sx:{backgroundColor:h.color,border:`1px solid ${h.color}`,color:"#fff"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.main"},children:e.jsx(ne,{size:"small",onClick:()=>vt(_),children:e.jsx(rt,{fontSize:"small",sx:{color:"common.white"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"error.main"},children:e.jsx(ne,{size:"small",onClick:()=>Me(_),children:e.jsx(ve,{fontSize:"small",sx:{color:"common.white"}})})})})]})})}},h.id)),i.placeholder]})}):e.jsxs(Je,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:i=>i.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{}),e.jsx(c,{children:"タグ名称"}),Os,e.jsx(c,{})]})}),e.jsx(we,{droppableId:"rally-category-tags",children:i=>e.jsxs(Xe,{ref:i.innerRef,...i.droppableProps,children:[D.map((h,_)=>e.jsx(De,{draggableId:h.id,index:_,children:w=>e.jsxs(me,{ref:w.innerRef,...w.draggableProps,"data-index":_,onClick:()=>vt(_),sx:{cursor:"pointer",height:50},children:[e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:R=>R.stopPropagation(),...w.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(nt,{})})}),e.jsx(c,{children:e.jsx(xe,{label:h.name,size:"small",sx:{backgroundColor:h.color,border:`1px solid ${h.color}`,color:"#fff"}})}),Os,e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:R=>R.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{size:"small",onClick:()=>Me(_),sx:{width:24,height:24},children:e.jsx(ve,{fontSize:"small",color:"error"})})})})]})},h.id)),i.placeholder]})})]})})}),e.jsxs(t,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,mt:2},children:[e.jsx(t,{sx:{fontWeight:"bold"},children:"プレー詳細タグ"}),e.jsx(H,{onClick:Pt,variant:"contained",startIcon:e.jsx(et,{}),children:"追加"})]}),e.jsx(Ze,{component:qe,storageKey:"play-detail-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsx(Ne,{onDragEnd:Ge,children:a?e.jsx(we,{droppableId:"rally-detail-tags",children:i=>e.jsxs(t,{ref:i.innerRef,...i.droppableProps,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",...Ve},children:[e.jsx(t,{sx:{width:32}}),e.jsx(t,{sx:{flexGrow:1},children:"タグ名称"})]}),k.map((h,_)=>e.jsx(De,{draggableId:h.id,index:_,children:w=>{const R=w.dragHandleProps,{onPointerDown:le,...at}=R||{},ct=lt(re=>{le==null||le(re);const je=s(h.id);je&&(je.allowTouchMove=!1),fe(h.id)});return e.jsx(t,{ref:w.innerRef,...w.draggableProps,style:w.draggableProps.style,children:e.jsxs(st,{onSwiper:re=>Ie(h.id,re),threshold:20,slidesPerView:"auto",style:{overflow:"hidden"},onTouchStart:(re,je)=>je.stopPropagation(),onTouchEnd:re=>oe(h.id,re),children:[e.jsx(ce,{style:{width:"100%",flex:"0 0 auto"},children:e.jsx(t,{...at,...ct,sx:{display:"flex",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",bgcolor:"background.paper",cursor:"grab",touchAction:A===h.id?"none":"pan-y"},children:e.jsx(t,{sx:{flexGrow:1},children:e.jsx(xe,{label:h.name,size:"small",sx:{backgroundColor:h.color,border:`1px solid ${h.color}`,color:"#fff"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.main"},children:e.jsx(ne,{size:"small",onClick:()=>He(_),children:e.jsx(rt,{fontSize:"small",sx:{color:"common.white"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"error.main"},children:e.jsx(ne,{size:"small",onClick:()=>St(_),children:e.jsx(ve,{fontSize:"small",sx:{color:"common.white"}})})})})]})})}},h.id)),i.placeholder]})}):e.jsxs(Je,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:i=>i.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{}),e.jsx(c,{children:"タグ名称"}),Es,e.jsx(c,{})]})}),e.jsx(we,{droppableId:"rally-detail-tags",children:i=>e.jsxs(Xe,{ref:i.innerRef,...i.droppableProps,children:[k.map((h,_)=>e.jsx(De,{draggableId:h.id,index:_,children:w=>e.jsxs(me,{ref:w.innerRef,...w.draggableProps,"data-index":_,onClick:()=>He(_),sx:{cursor:"pointer",height:50},children:[e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:R=>R.stopPropagation(),...w.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(nt,{})})}),e.jsx(c,{children:e.jsx(xe,{label:h.name,size:"small",sx:{backgroundColor:h.color,border:`1px solid ${h.color}`,color:"#fff"}})}),Es,e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:R=>R.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{size:"small",onClick:()=>St(_),sx:{width:24,height:24},children:e.jsx(ve,{fontSize:"small",color:"error"})})})})]})},h.id)),i.placeholder]})})]})})})]}),e.jsxs(tt,{open:J,onClose:Ae,children:[e.jsxs(Te,{children:["タグ",K===-1?"追加":"編集"]}),e.jsxs(Re,{sx:{mt:2},children:[e.jsx(ye,{label:"タグ名称",value:j,onChange:i=>y(i.target.value),fullWidth:!0,margin:"dense"}),e.jsx(ye,{label:"色",type:"color",value:G,onChange:i=>Q(i.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:Ae,startIcon:e.jsx(Oe,{}),color:"inherit",children:"キャンセル"}),e.jsx(H,{onClick:ut,disabled:j.trim()==="",startIcon:e.jsx(Ee,{}),children:"OK"})]})]}),e.jsxs(tt,{open:te,onClose:It,children:[e.jsxs(Te,{children:["タグ",N===-1?"追加":"編集"]}),e.jsxs(Re,{sx:{mt:2},children:[e.jsx(ye,{label:"タグ名称",value:E,onChange:i=>ue(i.target.value),fullWidth:!0,margin:"dense"}),e.jsx(ye,{label:"色",type:"color",value:X,onChange:i=>ie(i.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:It,startIcon:e.jsx(Oe,{}),color:"inherit",children:"キャンセル"}),e.jsx(H,{onClick:Qe,disabled:E.trim()==="",startIcon:e.jsx(Ee,{}),children:"OK"})]})]}),e.jsxs(tt,{open:$,onClose:Ke,children:[e.jsxs(Te,{children:["タグ",he===-1?"追加":"編集"]}),e.jsxs(Re,{sx:{mt:2},children:[e.jsx(ye,{label:"タグ名称",value:x,onChange:i=>I(i.target.value),fullWidth:!0,margin:"dense"}),e.jsx(ye,{label:"色",type:"color",value:m,onChange:i=>S(i.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:Ke,startIcon:e.jsx(Oe,{}),color:"inherit",children:"キャンセル"}),e.jsx(H,{onClick:Mt,disabled:x.trim()==="",startIcon:e.jsx(Ee,{}),children:"OK"})]})]})]})}const fl=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function jl({statsSettings:u,setStatsSettings:p,playCategories:D,playDetails:C,rallyCategoryTags:k,rallyDetailTags:L,showSnackbar:W}){const[V,F]=l.useState(null),[z,K]=l.useState(""),[f,j]=l.useState(""),[y,G]=l.useState([]),[Q,J]=l.useState([]),[Y,N]=l.useState(""),[O,E]=l.useState(""),[ue,X]=l.useState("合算"),[ie,te]=l.useState(!1),ge=it("md"),he=it("sm"),{handleTouchEnd:ke,setSwiperRef:x,getSwiperRef:I}=dt(2),[m,S]=l.useState(""),$=s=>{if(m){const P=I(m);P&&(P.allowTouchMove=!0),S("")}if(!s.destination)return;const d=Array.from(u),[b]=d.splice(s.source.index,1);d.splice(s.destination.index,0,b),p(d)},n=s=>{var d;return((d=D.find(b=>b.id===s))==null?void 0:d.name)||""},a=s=>{var d;return((d=C.find(b=>b.id===s))==null?void 0:d.name)||""},o=s=>{const d=s.playCategoryId?n(s.playCategoryId):s.playCategoryTags?s.playCategoryTags.map(fe=>{var ae;return((ae=k.find(ee=>ee.id===fe))==null?void 0:ae.name)||fe}).join(", "):"",b=s.playDetailId?a(s.playDetailId):s.playDetailTags?s.playDetailTags.map(fe=>{var ae;return((ae=L.find(ee=>ee.id===fe))==null?void 0:ae.name)||fe}).join(", "):"",P=s.pointType||"",M=s.pointUnitType||"",A=s.aggregateType||"合算";return[d,b,P,M,A].filter(fe=>fe).join(", ")},g=()=>{F(-1),K(""),j(""),G([]),J([]),N(""),E(""),X("合算"),te(!0)},T=s=>{const d=u[s];F(s),K(d.playCategoryId||""),j(d.playDetailId||""),G(d.playCategoryTags||[]),J(d.playDetailTags||[]),N(d.pointType||""),E(d.pointUnitType||""),X(d.aggregateType||"合算"),te(!0)},q=()=>{const s=z!=="",d=f!=="",b=y.length>0,P=Q.length>0,M=Y!=="",A=O!=="";return s&&!d&&!b&&!P&&!M&&!A||s&&d&&!b&&!P&&!M&&!A||s&&!d&&!b&&!P&&M&&!A||s&&!d&&!b&&!P&&!M&&A||s&&!d&&!b&&!P&&M&&A||!s&&!d&&!b&&!P&&M&&!A||!s&&!d&&!b&&!P&&M&&A||!s&&!d&&!b&&!P&&!M&&A||b&&!s&&!d&&!P&&!M&&!A||b&&P&&!s&&!d&&!M&&!A||b&&P&&!s&&!d&&M&&!A||b&&P&&!s&&!d&&!M&&A||b&&P&&!s&&!d&&M&&A||b&&!s&&!d&&M&&!A||b&&!s&&!d&&!M&&A||b&&!s&&!d&&M&&A||P&&!s&&!d&&!b&&!M&&!A||P&&!s&&!d&&!b&&M&&!A||P&&!s&&!d&&!b&&!M&&A||P&&!s&&!d&&!b&&M&&A},Z=()=>{const s={id:V===-1?fl():u[V].id,playCategoryId:z||void 0,playDetailId:f||void 0,playCategoryTags:z===""&&y.length>0?y:void 0,playDetailTags:f===""&&Q.length>0?Q:void 0,pointType:f?void 0:Y||void 0,pointUnitType:f?void 0:O||void 0,aggregateType:ue};V===-1?p(d=>[...d,s]):V!==null&&p(d=>d.map((b,P)=>P===V?s:b)),te(!1)},B=()=>{te(!1)},oe=s=>{const d=u[s];p(b=>b.filter((P,M)=>M!==s)),W("スタッツを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{p(b=>{const P=[...b];return P.splice(s,0,d),P})},autoHideDuration:5e3})},Ie=({s,idx:d,dragProvided:b})=>{const P=b.dragHandleProps,{onPointerDown:M,...A}=P||{},fe=lt(ae=>{M==null||M(ae);const ee=I(s.id);ee&&(ee.allowTouchMove=!1),S(s.id)});return e.jsx(t,{ref:b.innerRef,...b.draggableProps,style:b.draggableProps.style,children:e.jsxs(st,{onSwiper:ae=>x(s.id,ae),threshold:20,slidesPerView:"auto",style:{overflow:"hidden"},onTouchStart:(ae,ee)=>ee.stopPropagation(),onTouchEnd:ae=>ke(s.id,ae),children:[e.jsx(ce,{style:{width:"100%",flex:"0 0 auto"},children:e.jsx(t,{...A,...fe,sx:{display:"grid",gridTemplateColumns:he?"1fr":"repeat(5, 1fr)",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",bgcolor:"background.paper",touchAction:m===s.id?"none":"pan-y",cursor:"grab"},children:he?e.jsx(t,{children:o(s)}):e.jsxs(e.Fragment,{children:[e.jsx(t,{sx:{pr:1},children:s.playCategoryId?n(s.playCategoryId):s.playCategoryTags&&s.playCategoryTags.length>0?e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.playCategoryTags.map(ae=>{const ee=k.find(Ge=>Ge.id===ae);return e.jsx(xe,{label:(ee==null?void 0:ee.name)||ae,size:"small",sx:{backgroundColor:(ee==null?void 0:ee.color)||de,color:"#fff"}},ae)})}):""}),e.jsx(t,{sx:{pr:1},children:s.playDetailId?a(s.playDetailId):s.playDetailTags&&s.playDetailTags.length>0?e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.playDetailTags.map(ae=>{const ee=L.find(Ge=>Ge.id===ae);return e.jsx(xe,{label:(ee==null?void 0:ee.name)||ae,size:"small",sx:{backgroundColor:(ee==null?void 0:ee.color)||de,color:"#fff"}},ae)})}):""}),e.jsx(t,{sx:{pr:1},children:s.pointType||""}),e.jsx(t,{sx:{pr:1},children:s.pointUnitType||""}),e.jsx(t,{children:s.aggregateType||"合算"})]})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.main"},children:e.jsx(ne,{size:"small",onClick:()=>T(d),children:e.jsx(rt,{fontSize:"small",sx:{color:"common.white"}})})})}),e.jsx(ce,{style:{width:Se,flex:"0 0 auto"},children:e.jsx(t,{sx:{height:50,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"error.main"},children:e.jsx(ne,{size:"small",onClick:()=>oe(d),children:e.jsx(ve,{fontSize:"small",sx:{color:"common.white"}})})})})]})})};return e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsx(t,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(H,{onClick:g,variant:"contained",startIcon:e.jsx(et,{}),children:"追加"})}),e.jsx(Ze,{component:qe,storageKey:"stats-grid",sx:{maxWidth:1024,mx:"auto"},children:ge?e.jsx(Ne,{onDragEnd:$,children:e.jsx(we,{droppableId:"stats-settings",children:s=>e.jsxs(t,{ref:s.innerRef,...s.droppableProps,children:[e.jsx(t,{sx:{display:"grid",gridTemplateColumns:he?"1fr":"repeat(5, 1fr)",alignItems:"center",height:50,px:1,borderBottom:1,borderColor:"divider",...Ve},children:he?e.jsx(t,{children:"スタッツ"}):e.jsxs(e.Fragment,{children:[e.jsx(t,{children:"プレー区分"}),e.jsx(t,{children:"プレー詳細"}),e.jsx(t,{children:"得点区分"}),e.jsx(t,{children:"得失点単位区分"}),e.jsx(t,{children:"集計方法"})]})}),u.map((d,b)=>e.jsx(De,{draggableId:d.id,index:b,children:P=>e.jsx(Ie,{s:d,idx:b,dragProvided:P})},d.id)),s.placeholder]})})}):e.jsxs(Je,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:s=>s.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{padding:"checkbox",sx:{width:48}}),e.jsx(c,{children:"プレー区分"}),e.jsx(c,{children:"プレー詳細"}),e.jsx(c,{children:"得点区分"}),e.jsx(c,{children:"得失点単位区分"}),e.jsx(c,{children:"集計方法"}),e.jsx(c,{})]})}),e.jsx(Ne,{onDragEnd:$,children:e.jsx(we,{droppableId:"stats-settings",children:s=>e.jsxs(Xe,{ref:s.innerRef,...s.droppableProps,children:[u.map((d,b)=>e.jsx(De,{draggableId:d.id,index:b,children:P=>e.jsxs(me,{ref:P.innerRef,...P.draggableProps,"data-index":b,onClick:()=>T(b),sx:{cursor:"pointer",height:50},children:[e.jsx(c,{padding:"checkbox",sx:{width:48},children:e.jsx(t,{onClick:M=>M.stopPropagation(),...P.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(nt,{})})}),e.jsx(c,{children:d.playCategoryId?n(d.playCategoryId):d.playCategoryTags&&d.playCategoryTags.length>0?e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:d.playCategoryTags.map(M=>{const A=k.find(fe=>fe.id===M);return e.jsx(xe,{label:(A==null?void 0:A.name)||M,size:"small",sx:{backgroundColor:(A==null?void 0:A.color)||de,color:"#fff"}},M)})}):""}),e.jsx(c,{children:d.playDetailId?a(d.playDetailId):d.playDetailTags&&d.playDetailTags.length>0?e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:d.playDetailTags.map(M=>{const A=L.find(fe=>fe.id===M);return e.jsx(xe,{label:(A==null?void 0:A.name)||M,size:"small",sx:{backgroundColor:(A==null?void 0:A.color)||de,color:"#fff"}},M)})}):""}),e.jsx(c,{children:d.pointType||""}),e.jsx(c,{children:d.pointUnitType||""}),e.jsx(c,{children:d.aggregateType||"合算"}),e.jsx(c,{padding:"checkbox",children:e.jsx(t,{onClick:M=>M.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{size:"small",onClick:()=>oe(b),sx:{width:24,height:24},children:e.jsx(ve,{fontSize:"small",color:"error"})})})})]})},d.id)),s.placeholder]})})})]})})]}),e.jsxs(tt,{open:ie,onClose:B,children:[e.jsxs(Te,{children:["スタッツ設定",V===-1?"追加":"編集"]}),e.jsxs(Re,{children:[e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"stat-category-label",children:"プレー区分"}),e.jsxs(We,{labelId:"stat-category-label",value:z,label:"プレー区分",onChange:s=>{K(s.target.value),j(""),G([]),J([])},disabled:y.length>0||Q.length>0,children:[e.jsx(se,{value:"",children:"なし"}),D.map(s=>e.jsx(se,{value:s.id,children:s.name},s.id))]})]}),e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"stat-detail-label",children:"プレー詳細"}),e.jsxs(We,{labelId:"stat-detail-label",value:f,label:"プレー詳細",onChange:s=>{j(s.target.value),N(""),E(""),G([]),J([])},disabled:Y!==""||O!==""||y.length>0||Q.length>0,children:[e.jsx(se,{value:"",children:"なし"}),C.filter(s=>s.playCategoryId===z).map(s=>e.jsx(se,{value:s.id,children:s.name},s.id))]})]}),e.jsx(Et,{multiple:!0,options:k,getOptionLabel:s=>s.name,value:k.filter(s=>y.includes(s.id)),onChange:(s,d)=>{G(d.map(b=>b.id)),d.length>0&&(K(""),j(""))},disabled:z!==""||f!=="",renderTags:(s,d)=>s.map((b,P)=>e.jsx(xe,{...d({index:P}),label:b.name,size:"small",sx:{backgroundColor:b.color||de,color:"#fff"}})),renderInput:s=>e.jsx(ye,{...s,label:"プレー区分タグ",margin:"dense"}),fullWidth:!0}),e.jsx(Et,{multiple:!0,options:L,getOptionLabel:s=>s.name,value:L.filter(s=>Q.includes(s.id)),onChange:(s,d)=>{J(d.map(b=>b.id)),d.length>0&&(K(""),j(""))},disabled:z!==""||f!=="",renderTags:(s,d)=>s.map((b,P)=>e.jsx(xe,{...d({index:P}),label:b.name,size:"small",sx:{backgroundColor:b.color||de,color:"#fff"}})),renderInput:s=>e.jsx(ye,{...s,label:"プレー詳細タグ",margin:"dense"}),fullWidth:!0}),e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"stat-point-label",children:"得点区分"}),e.jsxs(We,{labelId:"stat-point-label",value:Y,label:"得点区分",onChange:s=>{N(s.target.value),s.target.value!==""&&j("")},disabled:f!=="",children:[e.jsx(se,{value:"",children:"なし"}),e.jsx(se,{value:"得点",children:"得点"}),e.jsx(se,{value:"失点",children:"失点"})]})]}),e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"stat-unit-label",children:"得失点単位区分"}),e.jsxs(We,{labelId:"stat-unit-label",value:O,label:"得失点単位区分",onChange:s=>{E(s.target.value),s.target.value!==""&&j("")},disabled:f!=="",children:[e.jsx(se,{value:"",children:"なし"}),e.jsx(se,{value:"メンバー",children:"メンバー"}),e.jsx(se,{value:"チーム",children:"チーム"})]})]}),e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"stat-aggregate-label",children:"集計方法"}),e.jsxs(We,{labelId:"stat-aggregate-label",value:ue,label:"集計方法",onChange:s=>X(s.target.value),children:[e.jsx(se,{value:"合算",children:"合算"}),e.jsx(se,{value:"セット平均",children:"セット平均"})]})]})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:B,color:"inherit",startIcon:e.jsx(Oe,{}),children:"キャンセル"}),e.jsx(H,{onClick:Z,disabled:!q(),startIcon:e.jsx(Ee,{}),children:"OK"})]})]})]})}const ml={mode:"light",appBarColor:"#F5F5F5",appBarTextColor:"#000000",buttonColor:"#1C8139",scoreColor:"#1C8139",lossColor:"#D21972"},yl={mode:"light",appBarColor:"#F2EDE3",appBarTextColor:"#000000",buttonColor:"#48A588",scoreColor:"#48A588",lossColor:"#CE5164"},bl={mode:"dark",appBarColor:"#333333",appBarTextColor:"#FFFFFF",buttonColor:"#90CAF9",scoreColor:"#90CAF9",lossColor:"#F48FB1"},Cl={mode:"dark",appBarColor:"#121212",appBarTextColor:"#FFFFFF",buttonColor:"#BB86FC",scoreColor:"#419552",lossColor:"#C77584"};function vl({theme:u,onThemeChange:p}){return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1,maxWidth:1024,width:"100%",mx:"auto"},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(t,{sx:{mr:2},children:"アプリカラー"}),e.jsx("input",{type:"color",value:u.appBarColor,onChange:D=>p({...u,appBarColor:D.target.value}),title:"背景色"}),e.jsx("input",{type:"color",value:u.appBarTextColor,onChange:D=>p({...u,appBarTextColor:D.target.value}),title:"文字色",style:{marginLeft:8}})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(t,{sx:{mr:2},children:"ボタンカラー"}),e.jsx("input",{type:"color",value:u.buttonColor,onChange:D=>p({...u,buttonColor:D.target.value})})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(t,{sx:{mr:2},children:"得点カラー"}),e.jsx("input",{type:"color",value:u.scoreColor,onChange:D=>p({...u,scoreColor:D.target.value})})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(t,{sx:{mr:2},children:"失点カラー"}),e.jsx("input",{type:"color",value:u.lossColor,onChange:D=>p({...u,lossColor:D.target.value})})]}),e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(H,{variant:"contained",onClick:()=>p({...ml}),startIcon:e.jsx(xt,{}),children:"ライトモード１"}),e.jsx(H,{variant:"contained",onClick:()=>p({...yl}),startIcon:e.jsx(xt,{}),children:"ライトモード２"}),e.jsx(H,{variant:"contained",onClick:()=>p({...bl}),startIcon:e.jsx(xt,{}),children:"ダークモード１"}),e.jsx(H,{variant:"contained",onClick:()=>p({...Cl}),startIcon:e.jsx(xt,{}),children:"ダークモード２"})]})]})}var xs={},Il=be;Object.defineProperty(xs,"__esModule",{value:!0});var Vs=xs.default=void 0,Sl=Il(Ce()),wl=e;Vs=xs.default=(0,Sl.default)((0,wl.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay");function Dl({scoreInput:u,onScoreInputChange:p,dashboardVisible:D,onDashboardVisibleChange:C,showSnackbar:k}){const[L,W]=l.useState(!1),V=()=>{try{const f=[];for(let j=0;j<localStorage.length;j++){const y=localStorage.key(j);y&&y.startsWith("tutorial-")&&f.push(y)}f.forEach(j=>localStorage.removeItem(j)),k("ガイド表示済み状態をクリアしました","success")}catch(f){console.error(f),k("ガイド表示済み状態のクリアに失敗しました","error")}},F=()=>W(!0),z=()=>W(!1),K=()=>{W(!1),V()};return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",mt:1,maxWidth:1024,width:"100%",mx:"auto"},children:[e.jsx(gt,{control:e.jsx(ft,{checked:u.rallyMemberRequired,onChange:f=>p({...u,rallyMemberRequired:f.target.checked})}),label:"ラリー結果メンバー選択必須",sx:{mb:1}}),e.jsx(gt,{control:e.jsx(ft,{checked:u.showRallyIcons,onChange:f=>p({...u,showRallyIcons:f.target.checked})}),label:"ラリー結果アイコン表示",sx:{mb:1}}),e.jsx(gt,{control:e.jsx(ft,{checked:u.showScoreProgressArea,onChange:f=>p({...u,showScoreProgressArea:f.target.checked})}),label:"得点推移エリア表示",sx:{mb:1}}),e.jsx(gt,{control:e.jsx(ft,{checked:u.showGridScrollHint,onChange:f=>p({...u,showGridScrollHint:f.target.checked})}),label:"グリッド横スクロール表記表示",sx:{mb:1}}),e.jsx(gt,{control:e.jsx(ft,{checked:D,onChange:f=>C(f.target.checked)}),label:"ダッシュボード表示",sx:{mb:1,display:"none"}}),e.jsx(H,{variant:"contained",startIcon:e.jsx(Vs,{}),onClick:F,sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},alignSelf:"flex-start",mt:2},children:"ガイド再表示"}),e.jsxs(ht,{open:L,onClose:z,children:[e.jsx(Te,{children:"確認"}),e.jsx(Re,{sx:{mt:2},children:"ガイドを再表示しますか？"}),e.jsxs(_e,{children:[e.jsx(H,{onClick:z,startIcon:e.jsx(Oe,{}),color:"inherit",children:"キャンセル"}),e.jsx(H,{onClick:K,startIcon:e.jsx(Ee,{}),children:"OK"})]})]})]})}var hs={},kl=be;Object.defineProperty(hs,"__esModule",{value:!0});var Gs=hs.default=void 0,Tl=kl(Ce()),Rl=e;Gs=hs.default=(0,Tl.default)((0,Rl.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");function _l({teams:u,matches:p,tags:D,matchLocks:C,setMatchLocks:k,lockGroupBy:L,setLockGroupBy:W,isMobile:V}){return e.jsxs(t,{children:[e.jsx(t,{sx:{maxWidth:1024,mx:"auto"},children:V?e.jsx($e,{size:"small",margin:"dense",children:e.jsxs(We,{value:L,onChange:F=>W(F.target.value),children:[e.jsx(se,{value:"none",children:"グルーピングなし"}),e.jsx(se,{value:"dateName",children:"試合日付＋試合名"}),e.jsx(se,{value:"card",children:"対戦カード"})]})}):e.jsxs(yt,{exclusive:!0,value:L,onChange:(F,z)=>{z!==null&&W(z)},sx:{mb:1},children:[e.jsx(ze,{value:"none",children:"グルーピングなし"}),e.jsx(ze,{value:"dateName",children:"試合日付＋試合名"}),e.jsx(ze,{value:"card",children:"対戦カード"})]})}),e.jsx(Ze,{component:qe,storageKey:"match-lock-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Je,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(me,{sx:{backgroundColor:F=>F.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(c,{padding:"checkbox"}),e.jsx(c,{children:"日付"}),e.jsx(c,{children:"試合名"}),e.jsx(c,{children:"対戦カード"}),e.jsx(c,{children:"タグ"}),e.jsx(c,{children:"セット"})]})}),e.jsx(Xe,{children:function(){const F=j=>{var y;return((y=u.find(G=>G.id===j))==null?void 0:y.name)||""},z=L,K=wn(p,z),f=j=>j.map(y=>{const G=y.sets.filter(N=>N.my>N.opponent).length,Q=y.sets.filter(N=>N.my<N.opponent).length,J=y.sets.map((N,O)=>{const E=O<y.sets.length-1?", ":"";return`${N.my}-${N.opponent}${E}`}).join(""),Y=C[y.id];return e.jsxs(me,{sx:{height:50},children:[e.jsx(c,{padding:"checkbox",children:e.jsx(ne,{size:"small",onClick:()=>k(N=>({...N,[y.id]:!N[y.id]})),children:Y?e.jsx(Hs,{sx:{color:"#D21972"}}):e.jsx(Gs,{sx:{color:"#1C8139"}})})}),e.jsx(c,{children:y.date}),e.jsx(c,{children:y.matchName}),e.jsx(c,{children:`${F(y.teamA)} - ${F(y.teamB)}`}),e.jsx(c,{children:y.tags.map(N=>{const O=D.find(ue=>ue.id===N),E=(O==null?void 0:O.color)||de;return e.jsx(xe,{label:(O==null?void 0:O.name)||N,size:"small",sx:{mr:.5,mb:.5,backgroundColor:E,color:"#fff"}},N)})}),e.jsxs(c,{children:[G,"-",Q," (",J,")"]})]},y.id)});return z==="none"?f(K.all||[]):Object.entries(K).map(([j,y])=>{const G=z==="card"?Dn(y[0].teamA,y[0].teamB,u):j;return e.jsxs(l.Fragment,{children:[e.jsx(me,{sx:{height:50},children:e.jsx(c,{colSpan:6,sx:{...Ve},children:G})}),f(y)]},j)})}()})]})})]})}var us={},Ol=be;Object.defineProperty(us,"__esModule",{value:!0});var Ks=us.default=void 0,El=Ol(Ce()),Pl=e;Ks=us.default=(0,El.default)((0,Pl.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen");var ps={},Ml=be;Object.defineProperty(ps,"__esModule",{value:!0});var Xt=ps.default=void 0,Hl=Ml(Ce()),zl=e;Xt=ps.default=(0,Hl.default)((0,zl.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload");var gs={},Al=be;Object.defineProperty(gs,"__esModule",{value:!0});var qs=gs.default=void 0,$l=Al(Ce()),Wl=e;qs=gs.default=(0,$l.default)((0,Wl.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload");const Nl=`[team]
サンプルチーム

[member]
サンプルチーム,1,バレーボーラー

[rally-play-category]
スパイク

[rally-play-detail]
スパイク,イン,得点,メンバー
スパイク,アウト,失点,メンバー
スパイク,アウト,失点,メンバー`,Zt=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36),Ll=u=>({id:crypto.randomUUID(),name:u}),Fl=u=>({id:Zt(),name:u,color:de,iconType:"none",tags:[],visible:!0});function Bl({onDeleteData:u,onImportData:p,onExportData:D,showSnackbar:C,teams:k,setTeams:L,setMembers:W,playCategories:V,setPlayCategories:F,setPlayDetails:z}){const[K,f]=l.useState(!1),[j,y]=l.useState(null),[G,Q]=l.useState(!1),[J,Y]=l.useState(!1),[N,O]=l.useState(Nl),E=()=>{f(!0)},ue=async()=>{f(!1);try{await u(),C("全データを削除しました","success")}catch(S){console.error(S),C("全データの削除に失敗しました","error")}},X=()=>{f(!1)},ie=S=>{y(S.target.files&&S.target.files[0]?S.target.files[0]:null)},te=()=>{Q(!0)},ge=async()=>{Q(!1);const S=j;y(null);try{S&&await p(S),C("インポートが完了しました","success")}catch($){console.error($),C("インポートに失敗しました","error")}},he=()=>{Q(!1)},ke=async()=>{try{await D(),C("エクスポートが完了しました","success")}catch(S){console.error(S),C("エクスポートに失敗しました","error")}},x=()=>{Y(!0)},I=()=>{Y(!1);try{const S=N.replace(/\r\n/g,`
`).split(`
`);let $="";const n=[],a={},o=[],g=[];for(const T of S){const q=T.trim();if(q!==""){if(q.startsWith("[")&&q.endsWith("]")){$=q.toLowerCase();continue}switch($){case"[team]":n.push(Ll(q));break;case"[member]":{const[Z,B,oe]=q.split(",").map(Ie=>Ie.trim());if(Z&&B&&oe){const Ie=[...k,...n].find(s=>s.name===Z);if(Ie){const s={id:Zt(),no:Number(B),name:oe,positions:[],visible:!0};a[Ie.id]||(a[Ie.id]=[]),a[Ie.id].push(s)}}break}case"[rally-play-category]":o.push(Fl(q));break;case"[rally-play-detail]":{const[Z,B,oe,Ie]=q.split(",").map(s=>s.trim());if(Z&&B&&oe&&Ie){const s=[...V,...o].find(d=>d.name===Z);s&&g.push({id:Zt(),playCategoryId:s.id,name:B,pointType:oe,pointUnitType:Ie,tags:[],visible:!0})}break}default:break}}}n.length&&L(T=>[...T,...n]),Object.keys(a).length&&W(T=>{const q={...T};for(const[Z,B]of Object.entries(a))q[Z]=[...q[Z]||[],...B];return q}),o.length&&F(T=>[...T,...o]),g.length&&z(T=>[...T,...g]),n.length||Object.keys(a).length||o.length||g.length?(C("一括登録が完了しました","success"),O("")):C("登録対象のデータがありません","error")}catch(S){console.error(S),C("一括登録に失敗しました","error")}},m=()=>{Y(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(t,{sx:{maxWidth:1024,width:"100%",mx:"auto",textAlign:"left",display:"flex",flexDirection:"column",gap:1,alignItems:"flex-start"},children:[e.jsx(t,{sx:{fontWeight:"bold"},children:"データエクスポート"}),e.jsx(t,{children:e.jsx(H,{variant:"contained",startIcon:e.jsx(qs,{}),onClick:ke,children:"エクスポート"})}),e.jsx(t,{sx:{mt:2,fontWeight:"bold"},children:"データインポート"}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(H,{variant:"outlined",component:"label",startIcon:e.jsx(Ks,{}),children:["ファイル選択",e.jsx("input",{type:"file",accept:".zip",hidden:!0,onChange:ie})]}),e.jsx(H,{variant:"contained",startIcon:e.jsx(Xt,{}),onClick:te,disabled:!j,children:"インポート"})]}),e.jsx(t,{sx:{mt:2,fontWeight:"bold"},children:"一括登録"}),e.jsx(ye,{value:N,onChange:S=>O(S.target.value),multiline:!0,minRows:10,fullWidth:!0}),e.jsx(t,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:e.jsx(H,{variant:"contained",startIcon:e.jsx(Xt,{}),onClick:x,children:"一括登録"})}),e.jsx(t,{sx:{mt:2,fontWeight:"bold"},children:"データ削除"}),e.jsx(H,{variant:"contained",color:"error",startIcon:e.jsx(ve,{}),onClick:E,children:"全データ削除"})]}),e.jsxs(ht,{open:K,onClose:X,children:[e.jsx(Te,{children:"削除確認"}),e.jsx(Re,{sx:{mt:2},children:"全データを削除しますか？"}),e.jsxs(_e,{children:[e.jsx(H,{onClick:X,startIcon:e.jsx(Oe,{}),color:"inherit",children:"キャンセル"}),e.jsx(H,{onClick:ue,color:"error",startIcon:e.jsx(Ee,{}),children:"OK"})]})]}),e.jsxs(ht,{open:G,onClose:he,children:[e.jsx(Te,{children:"確認"}),e.jsx(Re,{sx:{mt:2},children:"データをインポートしますか？"}),e.jsxs(_e,{children:[e.jsx(H,{onClick:he,startIcon:e.jsx(Oe,{}),color:"inherit",children:"キャンセル"}),e.jsx(H,{onClick:ge,disabled:!j,startIcon:e.jsx(Ee,{}),children:"OK"})]})]}),e.jsxs(ht,{open:J,onClose:m,children:[e.jsx(Te,{children:"確認"}),e.jsx(Re,{sx:{mt:2},children:"一括登録を実行しますか？"}),e.jsxs(_e,{children:[e.jsx(H,{onClick:m,startIcon:e.jsx(Oe,{}),color:"inherit",children:"キャンセル"}),e.jsx(H,{onClick:I,startIcon:e.jsx(Ee,{}),children:"OK"})]})]})]})}var fs={},Ul=be;Object.defineProperty(fs,"__esModule",{value:!0});var Js=fs.default=void 0,Vl=Ul(Ce()),Gl=e;Js=fs.default=(0,Vl.default)((0,Gl.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const Kl=`MIT License

Copyright (c) 2025 shinya_sun_sun

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
`;function ql(u){if(!u)return"";let p=u.replace(/^git\+/,"");const D=p.match(/^git@github\.com:(.+)$/);D&&(p=`https://github.com/${D[1]}`);const C=p.match(/^git:\/\/github\.com\/(.+)$/);C&&(p=`https://github.com/${C[1]}`);const k=p.match(/^ssh:\/\/git@github\.com\/(.+)$/);return k&&(p=`https://github.com/${k[1]}`),p.startsWith("github.com/")&&(p=`https://${p}`),/^[a-zA-Z]+:\/\//.test(p)||(/^[^/]+\/[^/]+$/.test(p)?p=`https://github.com/${p}`:p=`https://${p}`),p=p.replace(/\.git$/,""),p}function Jl(){const[u,p]=l.useState(""),[D,C]=l.useState([]),[k,L]=l.useState(!0),[W,V]=l.useState({}),F={MIT:"https://opensource.org/license/mit/"};l.useEffect(()=>{kn(()=>import("./licenses-CkgLLKu8.js"),[]).then(f=>C(f.licenses)).finally(()=>L(!1))},[]);const z=l.useMemo(()=>D.filter(f=>f.name.toLowerCase().includes(u.toLowerCase())),[u,D]),K=async f=>{if(!W[f])try{const j=await fetch(`https://raw.githubusercontent.com/spdx/license-list-data/main/text/${f}.txt`);if(!j.ok)throw new Error("not ok");const y=await j.text();V(G=>({...G,[f]:y}))}catch{V(j=>({...j,[f]:""}))}};return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(mt,{variant:"h6",sx:{mb:1},children:"BreakPoint MIT License"}),e.jsx(t,{component:"pre",sx:{p:1,backgroundColor:f=>f.palette.mode==="dark"?"#343A42":"#f5f5f5",color:f=>f.palette.text.primary,whiteSpace:"pre-wrap",minHeight:128,overflow:"auto"},children:Kl}),e.jsx(ye,{label:"検索",value:u,onChange:f=>p(f.target.value),sx:{my:2}}),e.jsx(t,{sx:{flexGrow:1,overflow:"auto"},children:k?e.jsx(t,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(jn,{})}):z.map(f=>{const j=f.license;return e.jsxs(mn,{onChange:(y,G)=>{G&&K(j)},children:[e.jsxs(yn,{expandIcon:e.jsx(Js,{}),children:[e.jsx(mt,{sx:{flexGrow:1},children:f.name}),e.jsx(mt,{variant:"body2",sx:{ml:2},children:j})]}),e.jsxs(bn,{children:[(()=>{const y=ql(f.url);return y&&e.jsx(Ot,{href:y,target:"_blank",rel:"noopener",sx:{display:"block",mb:1,wordBreak:"break-all"},children:y})})(),f.license.startsWith("CC")&&f.attribution&&e.jsx(mt,{variant:"body2",sx:{mb:1,whiteSpace:"pre-wrap"},children:f.attribution}),W[j]!==void 0&&(W[j]?e.jsx(t,{component:"pre",sx:{p:1,backgroundColor:y=>y.palette.mode==="dark"?"#343A42":"#f5f5f5",color:y=>y.palette.text.primary,whiteSpace:"pre-wrap",maxHeight:300,overflow:"auto"},children:W[j]}):e.jsx(Ot,{href:F[j]||`https://spdx.org/licenses/${j}.html`,target:"_blank",rel:"noopener",sx:{wordBreak:"break-all"},children:F[j]||`https://spdx.org/licenses/${j}.html`}))]})]},f.name)})})]})}const Yl=On.create(t),Ps=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function Ms(u){if(typeof window>"u")return u;try{const D=new DOMParser().parseFromString(u,"image/svg+xml"),C=new Set(["svg","g","path","circle","rect","line","polygon","polyline","text","defs","use"]),k=L=>{[...L.children].forEach(W=>{if(C.has(W.tagName))[...W.attributes].forEach(V=>{V.name.startsWith("on")&&W.removeAttribute(V.name)}),k(W);else{const V=document.createTextNode(W.outerHTML);W.replaceWith(V)}})};return k(D.documentElement),D.documentElement.outerHTML}catch{return""}}function Xl({src:u,cropX:p,cropY:D,onChange:C}){const k=l.useRef(null),L=l.useRef(null),[W,V]=l.useState(!1),[F,z]=l.useState({x:0,y:0}),K=()=>k.current?{sx:k.current.clientWidth/k.current.naturalWidth,sy:k.current.clientHeight/k.current.naturalHeight}:{sx:1,sy:1},f=J=>{J.preventDefault(),J.stopPropagation();const Y=L.current.getBoundingClientRect();z({x:J.clientX-Y.left,y:J.clientY-Y.top}),V(!0)},j=J=>{if(!W||!k.current)return;const Y=k.current.getBoundingClientRect(),{sx:N,sy:O}=K(),E=J.clientX-Y.left-F.x,ue=J.clientY-Y.top-F.y,X=Math.min(Math.max(0,E/N),k.current.naturalWidth-64),ie=Math.min(Math.max(0,ue/O),k.current.naturalHeight-64);C(Math.round(X),Math.round(ie))},y=()=>V(!1),{sx:G,sy:Q}=K();return e.jsxs(t,{sx:{position:"relative",display:"inline-block"},onMouseMove:j,onMouseUp:y,onMouseLeave:y,children:[e.jsx("img",{src:u,ref:k,style:{maxWidth:256}}),e.jsx(t,{ref:L,sx:{position:"absolute",left:p*G,top:D*Q,width:64,height:64,border:"1px solid red",cursor:"move"},onMouseDown:f})]})}function Zl({name:u}){const p=l.useRef(null),[D,C]=l.useState(1);return l.useEffect(()=>{const k=p.current;if(!k)return;const L=k.getBBox().width;C(L>64?64/L:1)},[u]),e.jsx("svg",{width:64,height:64,children:e.jsx("g",{transform:`scale(${D})`,children:e.jsx("text",{ref:p,x:32/D,y:32/D,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,children:u})})})}function ir({matches:u,teams:p,teamMembers:D,playCategories:C,playDetails:k,statsSettings:L,tags:W,rallyCategoryTags:V,rallyDetailTags:F,themeSetting:z,scoreInputSetting:K,onSave:f,onDirtyChange:j,onDeleteData:y,onImportData:G,onExportData:Q,showSnackbar:J,dashboardVisible:Y,onDashboardVisibleChange:N,setAppBarLeftAction:O}){var ws;const[E,ue]=l.useState("teams");l.useEffect(()=>{window.scrollTo(0,0)},[E]);const[X,ie]=l.useState([...p]),[te,ge]=l.useState({...D}),[he,ke]=l.useState(((ws=p[0])==null?void 0:ws.id)||""),[x,I]=l.useState([...C]),[m,S]=l.useState(null),[$,n]=l.useState(""),[a,o]=l.useState(de),[g,T]=l.useState("設定なし"),[q,Z]=l.useState(""),[B,oe]=l.useState(""),[Ie,s]=l.useState(0),[d,b]=l.useState(0),[P,M]=l.useState([]),[A,fe]=l.useState(!0),[ae,ee]=l.useState(!1),[Ge,bt]=l.useState(null),[Ct,ut]=l.useState(!1),[Ae,Le]=l.useState([...k]),[ot,vt]=l.useState([...L]),[Qe,It]=l.useState([...W]),[Me,Pt]=l.useState([...V]),[He,Mt]=l.useState([...F]),[Ke,St]=l.useState({...z}),[i,h]=l.useState({...K}),[_,w]=l.useState([...u]),[R,le]=l.useState(()=>{const r={};return u.forEach(v=>{r[v.id]=!!v.locked}),r}),[at,ct]=l.useState("none"),re=!0,je=vn(),wt=In();l.useEffect(()=>{if(!je.pathname.startsWith("/settings"))return;je.pathname.split("/")[2]},[re,je.pathname,wt]),l.useEffect(()=>{const v=je.pathname.split("/")[2];ue(v??null)},[je.pathname,re]);const[pt,js]=l.useState(null),[Ht,zt]=l.useState(""),[Dt,At]=l.useState(""),[$t,Wt]=l.useState("得点"),[Nt,Lt]=l.useState("メンバー"),[Ft,Bt]=l.useState([]),[Ut,Vt]=l.useState(!0),[Ys,kt]=l.useState(!1),[ms,ys]=l.useState(null),[Xs,Gt]=l.useState(!1),Zs=r=>({id:crypto.randomUUID(),name:r}),Qs=r=>({id:Ps(),name:r,color:de,iconType:"none",tags:[],visible:!0}),Tt=l.useMemo(()=>{const r=u.some(v=>!!v.locked!==R[v.id]);return JSON.stringify(X)!==JSON.stringify(p)||JSON.stringify(te)!==JSON.stringify(D)||JSON.stringify(x)!==JSON.stringify(C)||JSON.stringify(Ae)!==JSON.stringify(k)||JSON.stringify(ot)!==JSON.stringify(L)||JSON.stringify(Qe)!==JSON.stringify(W)||JSON.stringify(Me)!==JSON.stringify(V)||JSON.stringify(He)!==JSON.stringify(F)||JSON.stringify(Ke)!==JSON.stringify(z)||JSON.stringify(i)!==JSON.stringify(K)||r},[X,te,x,Ae,ot,Qe,Me,He,Ke,i,R,p,D,C,k,L,W,V,F,z,K,u]),en=l.useMemo(()=>[{key:"teams",label:"チーム",icon:e.jsx($s,{})},{key:"members",label:"メンバー",icon:e.jsx(Ws,{})},{key:"scores",label:"ラリー",icon:e.jsx(Ns,{})},{key:"tags",label:"タグ",icon:e.jsx(Ls,{})},{key:"stats",label:"スタッツ",icon:e.jsx(Tn,{})},{key:"locks",label:"試合ロック",icon:e.jsx(Hs,{})},{key:"theme",label:"テーマ",icon:e.jsx(xt,{})},{key:"display",label:"表示・操作",icon:e.jsx(Fs,{})},{key:"data",label:"データ",icon:e.jsx(Bs,{})},{key:"license",label:"ライセンス",icon:e.jsx(Rn,{})},{key:"version",label:"バージョン",icon:e.jsx(Us,{})}],[]),tn=l.useMemo(()=>[["teams","members","scores","tags","stats"],["display","theme"],["locks","data"],["license"],["version"]],[]),bs=l.useCallback(()=>{const r=_.map(v=>({...v,locked:R[v.id]}));f(X,te,x,Ae,ot,Qe,Me,He,Ke,i,r,!0)},[x,Ae,R,_,f,X,te,ot,Qe,Me,He,Ke,i]),sn=()=>{S(-1),n(""),o(de),T("設定なし"),Z(""),oe(""),s(0),b(0),M([]),fe(!0),ee(!0)},nn=r=>{S(r),n(x[r].name),o(x[r].color||de);const v=x[r];T(v.iconType==="svg"?"SVG":v.iconType==="image"?"画像":"設定なし"),Z(v.svg||""),oe(v.image||""),s(v.cropX||0),b(v.cropY||0),M(v.tags||[]),fe(v.visible!==!1),ee(!0)},ln=()=>{const r=g==="SVG"?"svg":g==="画像"?"image":"none",v=r==="svg"?{iconType:r,svg:q}:r==="image"?{iconType:r,image:B,cropX:Ie,cropY:d}:{iconType:r};m===-1?I(U=>[...U,{...Qs($),...v,color:a,tags:P,visible:A}]):m!==null&&I(U=>U.map((pe,Pe)=>Pe===m?{...pe,name:$,...v,color:a,tags:P,visible:A}:pe)),ee(!1)},Cs=()=>{ee(!1)},rn=r=>{bt(r),ut(!0)},on=()=>{if(Ge!==null&&x[Ge].id!=="init-serve"){const r=Ge,v=x[r];I(U=>U.filter((pe,Pe)=>Pe!==r)),J("プレー区分を削除しました","success",{actionLabel:"元に戻す",onAction:()=>{I(U=>{const pe=[...U];return pe.splice(r,0,v),pe})},autoHideDuration:5e3})}ut(!1),bt(null)},vs=()=>{ut(!1)},an=()=>{var r;js(-1),zt(((r=x.find(v=>v.visible!==!1))==null?void 0:r.id)||""),At(""),Wt("得点"),Lt("メンバー"),Bt([]),Vt(!0),kt(!0)},cn=r=>{const v=Ae[r];js(r),zt(v.playCategoryId),At(v.name),Wt(v.pointType),Lt(v.pointUnitType),Bt(v.tags||[]),Vt(v.visible!==!1),kt(!0)},dn=()=>{pt===-1?Le(r=>[...r,{id:Ps(),playCategoryId:Ht,name:Dt,pointType:$t,pointUnitType:Nt,tags:Ft,visible:Ut}]):pt!==null&&Le(r=>r.map((v,U)=>U===pt?{...v,playCategoryId:Ht,name:Dt,pointType:$t,pointUnitType:Nt,tags:Ft,visible:Ut}:v)),kt(!1)},Is=()=>{kt(!1)},xn=r=>{ys(r),Gt(!0)},hn=()=>{if(ms!==null){const r=ms,v=Ae[r];Le(U=>U.filter((pe,Pe)=>Pe!==r)),J("プレー詳細を削除しました","success",{actionLabel:"元に戻す",onAction:()=>{Le(U=>{const pe=[...U];return pe.splice(r,0,v),pe})},autoHideDuration:5e3})}Gt(!1),ys(null)},Ss=()=>{Gt(!1)};l.useEffect(()=>(O(E?e.jsx(ne,{onClick:()=>wt("/settings"),size:"small",children:e.jsx(zs,{})}):null),()=>O(null)),[O,re,E,wt]),l.useEffect(()=>(j==null||j(Tt),()=>j==null?void 0:j(!1)),[Tt,j]),l.useEffect(()=>{Tt&&bs()},[Tt,bs]);const un=r=>r.iconType==="svg"&&r.svg?e.jsx(t,{sx:{width:64,height:64},dangerouslySetInnerHTML:{__html:Ms(r.svg)}}):r.iconType==="image"&&r.image?e.jsx(t,{component:"img",src:r.image,sx:{width:64,height:64,objectFit:"none",objectPosition:`-${r.cropX||0}px -${r.cropY||0}px`}}):e.jsx(Zl,{name:r.name});return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",height:"100dvh"},children:[E===null?e.jsx(t,{children:tn.map((r,v)=>e.jsx(Cn,{orientation:"vertical",fullWidth:!0,variant:"outlined",sx:{mb:2,"& .MuiButton-root":{justifyContent:"flex-start",color:U=>U.palette.text.secondary,height:50,textAlign:"left"},"& .MuiButton-root .MuiButton-startIcon":{mr:1},"& .MuiButton-root .MuiButton-endIcon":{marginLeft:"auto"},"& .MuiButtonGroup-grouped":{borderColor:"divider"}},children:r.map(U=>{const pe=en.find(Pe=>Pe.key===U);return pe?e.jsxs(H,{onClick:U==="version"?void 0:()=>wt(`/settings/${U}`),disableRipple:U==="version",startIcon:pe.icon,endIcon:U==="version"?void 0:e.jsx(As,{sx:{color:Pe=>Pe.palette.text.secondary}}),children:[pe.label,U==="version"&&e.jsx(t,{component:"span",sx:{ml:"auto",color:Pe=>Pe.palette.text.secondary},children:"0.1.0"})]},U):null})},v))}):null,E!==null&&e.jsx(t,{sx:{mt:0,flexGrow:1,overflowY:"visible"},children:e.jsx(_n,{mode:"wait",children:E&&e.jsxs(Yl,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[E==="teams"&&e.jsx(xl,{teams:X,setTeams:ie,setMembers:ge,selectedTeam:he,setSelectedTeam:ke,createTeam:Zs,showSnackbar:J}),E==="members"&&(X.length===0?e.jsxs(Rt,{severity:"info",children:["チームを登録するとメンバーを設定できるようになります",e.jsx("br",{}),e.jsx(Ot,{component:Sn,to:"/settings/teams",children:"チーム設定へ"})]}):he&&e.jsx(ul,{teams:X,members:te,setMembers:ge,selectedTeam:he,setSelectedTeam:ke,showSnackbar:J})),E==="scores"&&e.jsx(pl,{openAddPlayDialog:sn,playCategories:x,setPlayCategories:I,openEditPlayDialog:nn,scoreInput:i,renderIcon:un,rallyCategoryTags:Me,handlePlayDelete:rn,openAddDetailDialog:an,playDetails:Ae,setPlayDetails:Le,openEditDetailDialog:cn,theme:Ke,rallyDetailTags:He,handleDetailDelete:xn}),E==="stats"&&e.jsx(jl,{statsSettings:ot,setStatsSettings:vt,playCategories:x,playDetails:Ae,rallyCategoryTags:Me,rallyDetailTags:He,showSnackbar:J}),E==="tags"&&e.jsx(gl,{tags:Qe,setTags:It,rallyCategoryTags:Me,setRallyCategoryTags:Pt,rallyDetailTags:He,setRallyDetailTags:Mt,setMatches:w,setPlayCategories:I,setPlayDetails:Le,showSnackbar:J}),E==="locks"&&e.jsx(_l,{teams:X,matches:_,tags:Qe,matchLocks:R,setMatchLocks:le,lockGroupBy:at,setLockGroupBy:ct,isMobile:re}),E==="theme"&&e.jsx(vl,{theme:Ke,onThemeChange:St}),E==="display"&&e.jsx(Dl,{scoreInput:i,onScoreInputChange:h,dashboardVisible:Y,onDashboardVisibleChange:N,showSnackbar:J}),E==="data"&&e.jsx(Bl,{onDeleteData:y,onImportData:G,onExportData:Q,showSnackbar:J,teams:X,setTeams:ie,setMembers:ge,playCategories:x,setPlayCategories:I,setPlayDetails:Le}),E==="license"&&e.jsx(Jl,{})]},E)})}),e.jsxs(tt,{open:ae,onClose:Cs,children:[e.jsxs(Te,{children:["プレー区分",m===-1?"追加":"編集"]}),e.jsxs(Re,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[e.jsx(ye,{label:"プレー区分",value:$,onChange:r=>n(r.target.value),fullWidth:!0,margin:"dense"}),e.jsx(ye,{label:"色",type:"color",value:a,onChange:r=>o(r.target.value),margin:"dense",InputLabelProps:{shrink:!0},fullWidth:!0}),e.jsx(Et,{multiple:!0,options:Me,getOptionLabel:r=>r.name,value:Me.filter(r=>P.includes(r.id)),onChange:(r,v)=>M(v.map(U=>U.id)),renderTags:(r,v)=>r.map((U,pe)=>l.createElement(xe,{...v({index:pe}),key:U.id,label:U.name,size:"small",sx:{backgroundColor:U.color||de,color:"#fff"}})),renderInput:r=>e.jsx(ye,{...r,label:"タグ",margin:"dense"})}),e.jsxs(Rt,{severity:"info",children:["プレー区分タグは設定＞タグメニューにて追加できます",e.jsx("br",{}),"プレー区分にタグを設定することにより、プレー区分を横串で集計することが可能となります"]}),e.jsxs(yt,{exclusive:!0,value:A?"表示":"非表示",onChange:(r,v)=>v&&fe(v==="表示"),fullWidth:!0,children:[e.jsxs(ze,{value:"表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(Be,{sx:{mr:1}}),"表示"]}),e.jsxs(ze,{value:"非表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(Ue,{sx:{mr:1}}),"非表示"]})]}),i.showRallyIcons&&e.jsxs(e.Fragment,{children:[e.jsxs(yt,{exclusive:!0,value:g,onChange:(r,v)=>v&&T(v),children:[e.jsx(ze,{value:"設定なし",children:"設定なし"}),e.jsx(ze,{value:"SVG",children:"SVG"}),e.jsx(ze,{value:"画像",children:"画像"})]}),g==="SVG"&&e.jsxs(e.Fragment,{children:[e.jsx(t,{sx:{width:64,height:64},dangerouslySetInnerHTML:{__html:Ms(q)}}),e.jsx(ye,{multiline:!0,minRows:10,label:"SVG",value:q,onChange:r=>Z(r.target.value),fullWidth:!0,margin:"dense"})]}),g==="画像"&&e.jsxs(e.Fragment,{children:[B&&e.jsx(Xl,{src:B,cropX:Ie,cropY:d,onChange:(r,v)=>{s(r),b(v)}}),e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/bmp,image/tiff,image/gif",onChange:r=>{var pe;const v=(pe=r.target.files)==null?void 0:pe[0];if(!v)return;const U=new FileReader;U.onload=()=>{oe(U.result)},U.readAsDataURL(v)}})]})]})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:Cs,color:"inherit",startIcon:e.jsx(Oe,{}),children:"キャンセル"}),e.jsx(H,{onClick:ln,disabled:$.trim()==="",startIcon:e.jsx(Ee,{}),children:"OK"})]})]}),e.jsxs(tt,{open:Ys,onClose:Is,children:[e.jsxs(Te,{children:["プレー詳細",pt===-1?"追加":"編集"]}),e.jsxs(Re,{children:[e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"detail-category-label",children:"プレー区分"}),e.jsx(We,{labelId:"detail-category-label",value:Ht,label:"プレー区分",onChange:r=>zt(r.target.value),children:x.map(r=>e.jsx(se,{value:r.id,children:r.name},r.id))})]}),e.jsx(ye,{fullWidth:!0,label:"プレー詳細",value:Dt,onChange:r=>At(r.target.value),margin:"dense"}),e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"detail-point-label",children:"得点区分"}),e.jsxs(We,{labelId:"detail-point-label",value:$t,label:"得点区分",onChange:r=>Wt(r.target.value),children:[e.jsx(se,{value:"得点",children:"得点"}),e.jsx(se,{value:"失点",children:"失点"})]})]}),e.jsxs($e,{fullWidth:!0,margin:"dense",children:[e.jsx(Fe,{id:"detail-point-unit-label",children:"得失点単位区分"}),e.jsxs(We,{labelId:"detail-point-unit-label",value:Nt,label:"得失点単位区分",onChange:r=>Lt(r.target.value),disabled:pt!==-1,children:[e.jsx(se,{value:"メンバー",children:"メンバー"}),e.jsx(se,{value:"チーム",children:"チーム"})]})]}),e.jsx(Rt,{severity:"warning",sx:{whiteSpace:"pre-line",mt:1},children:`得失点単位区分は追加時にのみ設定でき、後から変更できません
再設定する場合はプレー詳細を作り直してください`}),e.jsx(Et,{multiple:!0,options:He,getOptionLabel:r=>r.name,value:He.filter(r=>Ft.includes(r.id)),onChange:(r,v)=>Bt(v.map(U=>U.id)),renderTags:(r,v)=>r.map((U,pe)=>{const Pe=U.color||de;return l.createElement(xe,{...v({index:pe}),key:U.id,label:U.name,size:"small",sx:{backgroundColor:Pe,color:"#fff"}})}),renderInput:r=>e.jsx(ye,{...r,label:"タグ",margin:"dense"})}),e.jsxs(Rt,{severity:"info",sx:{mt:1},children:["プレー詳細タグは設定＞タグメニューにて追加できます",e.jsx("br",{}),"プレー詳細にタグを設定することにより、プレー詳細を横串で集計することが可能となります"]}),e.jsxs(yt,{exclusive:!0,value:Ut?"表示":"非表示",onChange:(r,v)=>v&&Vt(v==="表示"),fullWidth:!0,sx:{mt:2},children:[e.jsxs(ze,{value:"表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(Be,{sx:{mr:1}}),"表示"]}),e.jsxs(ze,{value:"非表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(Ue,{sx:{mr:1}}),"非表示"]})]})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:Is,color:"inherit",startIcon:e.jsx(Oe,{}),children:"キャンセル"}),e.jsx(H,{onClick:dn,disabled:Dt.trim()==="",startIcon:e.jsx(Ee,{}),children:"OK"})]})]}),e.jsxs(ht,{open:Ct,onClose:vs,children:[e.jsx(Te,{children:"削除確認"}),e.jsxs(Re,{sx:{mt:2},children:["このプレー区分を削除しますか？",e.jsx(t,{sx:{mt:1},children:"削除すると、すでに入力されている試合のスコアや分析に影響が出る可能性があります。"})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:vs,color:"inherit",startIcon:e.jsx(Oe,{}),children:"キャンセル"}),e.jsx(H,{onClick:on,color:"error",startIcon:e.jsx(Ee,{}),children:"OK"})]})]}),e.jsxs(ht,{open:Xs,onClose:Ss,children:[e.jsx(Te,{children:"削除確認"}),e.jsxs(Re,{sx:{mt:2},children:["このプレー詳細を削除しますか？",e.jsx(t,{sx:{mt:1},children:"削除すると、すでに入力されている試合のスコアや分析に影響が出る可能性があります。"})]}),e.jsxs(_e,{children:[e.jsx(H,{onClick:Ss,color:"inherit",startIcon:e.jsx(Oe,{}),children:"キャンセル"}),e.jsx(H,{onClick:hn,color:"error",startIcon:e.jsx(Ee,{}),children:"OK"})]})]})]})}export{ir as default};
