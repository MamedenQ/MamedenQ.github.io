import{i as be,j as e,B as c,q as p,f as Me,g as $e,h as Ne,k as ie,l as a,m as We,I as _e,n as re,o as oe,N as se,p as ce,D as Se,F as fe,K as ve,S as pe,M as H,d as rt,e as De,C as me,L as Ze,$ as st,a0 as at,G as ft,a1 as Yl,a2 as Xl,a3 as Ql,a4 as Zl,U as Wt,a5 as en,A as pt}from"./mui-vendor-B7aVoM1I.js";import{r as l,b as xl,u as tn,f as ln,L as nn}from"./react-vendor-QLNaZ7XN.js";import{r as ye,a as He,S as Ae,d as Le,b as de,c as xe,D as le,u as sn,g as an,e as rn,f as yl,_ as on,h as cn}from"./index-CmcgwQDu.js";import{a as dn,d as xn}from"./QueryStatsOutlined-BEPVsPCj.js";import{D as Ue,C as Fe,P as Be,d as Ve,R as Ge}from"./ResponsiveDialog-C42t3OaQ.js";import{A as hn,m as un}from"./motion-vendor-BTNqdYSb.js";import"./chart-vendor-CPAiRuUQ.js";var zt={},gn=be;Object.defineProperty(zt,"__esModule",{value:!0});var qe=zt.default=void 0,jn=gn(ye()),fn=e;qe=zt.default=(0,jn.default)((0,fn.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7"}),"VisibilityOutlined");var Ht={},pn=be;Object.defineProperty(Ht,"__esModule",{value:!0});var Je=Ht.default=void 0,mn=pn(ye()),bn=e;Je=Ht.default=(0,mn.default)((0,bn.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6m-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14M2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45zm7.5 7.5 2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13m-3.4-3.4 1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53"}),"VisibilityOffOutlined");var Ut={},yn=be;Object.defineProperty(Ut,"__esModule",{value:!0});var vl=Ut.default=void 0,vn=yn(ye()),Cn=e;vl=Ut.default=(0,vn.default)((0,Cn.jsx)("path",{d:"M15.61 7.41 14.2 6l-6 6 6 6 1.41-1.41L11.03 12z"}),"NavigateBeforeOutlined");var Ft={},In=be;Object.defineProperty(Ft,"__esModule",{value:!0});var Cl=Ft.default=void 0,Dn=In(ye()),Sn=e;Cl=Ft.default=(0,Dn.default)((0,Sn.jsx)("path",{d:"M10.02 6 8.61 7.41 13.19 12l-4.58 4.59L10.02 18l6-6z"}),"NavigateNextOutlined");var Bt={},kn=be;Object.defineProperty(Bt,"__esModule",{value:!0});var Il=Bt.default=void 0,On=kn(ye()),_n=e;Il=Bt.default=(0,On.default)((0,_n.jsx)("path",{d:"M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zm-7.76-2.78c-1.17-.52-2.61-.9-4.24-.9-1.63 0-3.07.39-4.24.9C6.68 14.13 6 15.21 6 16.39V18h12v-1.61c0-1.18-.68-2.26-1.76-2.74M8.07 16c.09-.23.13-.39.91-.69.97-.38 1.99-.56 3.02-.56s2.05.18 3.02.56c.77.3.81.46.91.69zM12 8c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"GroupsOutlined");var Vt={},Tn=be;Object.defineProperty(Vt,"__esModule",{value:!0});var Dl=Vt.default=void 0,Rn=Tn(ye()),En=e;Dl=Vt.default=(0,Rn.default)((0,En.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var Gt={},Pn=be;Object.defineProperty(Gt,"__esModule",{value:!0});var Sl=Gt.default=void 0,wn=Pn(ye()),hl=e;Sl=Gt.default=(0,wn.default)([(0,hl.jsx)("path",{d:"m21.41 11.41-8.83-8.83c-.37-.37-.88-.58-1.41-.58H4c-1.1 0-2 .9-2 2v7.17c0 .53.21 1.04.59 1.41l8.83 8.83c.78.78 2.05.78 2.83 0l7.17-7.17c.78-.78.78-2.04-.01-2.83M12.83 20 4 11.17V4h7.17L20 12.83z"},"0"),(0,hl.jsx)("circle",{cx:"6.5",cy:"6.5",r:"1.5"},"1")],"SellOutlined");var Kt={},Mn=be;Object.defineProperty(Kt,"__esModule",{value:!0});var mt=Kt.default=void 0,$n=Mn(ye()),it=e;mt=Kt.default=(0,$n.default)([(0,it.jsx)("path",{d:"M12 22C6.49 22 2 17.51 2 12S6.49 2 12 2s10 4.04 10 9c0 3.31-2.69 6-6 6h-1.77c-.28 0-.5.22-.5.5 0 .12.05.23.13.33.41.47.64 1.06.64 1.67 0 1.38-1.12 2.5-2.5 2.5m0-18c-4.41 0-8 3.59-8 8s3.59 8 8 8c.28 0 .5-.22.5-.5 0-.16-.08-.28-.14-.35-.41-.46-.63-1.05-.63-1.65 0-1.38 1.12-2.5 2.5-2.5H16c2.21 0 4-1.79 4-4 0-3.86-3.59-7-8-7"},"0"),(0,it.jsx)("circle",{cx:"6.5",cy:"11.5",r:"1.5"},"1"),(0,it.jsx)("circle",{cx:"9.5",cy:"7.5",r:"1.5"},"2"),(0,it.jsx)("circle",{cx:"14.5",cy:"7.5",r:"1.5"},"3"),(0,it.jsx)("circle",{cx:"17.5",cy:"11.5",r:"1.5"},"4")],"PaletteOutlined");var qt={},Nn=be;Object.defineProperty(qt,"__esModule",{value:!0});var kl=qt.default=void 0,Wn=Nn(ye()),ul=e;kl=qt.default=(0,Wn.default)([(0,ul.jsx)("path",{d:"M20 3H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h4v2h8v-2h4c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 14H4V5h16z"},"0"),(0,ul.jsx)("path",{d:"M6 8.25h8v1.5H6zm10.5 1.5H18v-1.5h-1.5V7H15v4h1.5zm-6.5 2.5h8v1.5h-8zM7.5 15H9v-4H7.5v1.25H6v1.5h1.5z"},"1")],"DisplaySettingsOutlined");var Jt={},An=be;Object.defineProperty(Jt,"__esModule",{value:!0});var Ol=Jt.default=void 0,Ln=An(ye()),zn=e;Ol=Jt.default=(0,Ln.default)((0,zn.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"StorageOutlined");function Hn({teams:h,setTeams:r,setMembers:m,selectedTeam:g,setSelectedTeam:y,createTeam:$,showSnackbar:w}){const[U,F]=l.useState(!1),[I,N]=l.useState(""),[o,d]=l.useState(null),[f,L]=l.useState(!1),[J,W]=l.useState(null),V=S=>{if(!S.destination)return;const _=Array.from(h),[Y]=_.splice(S.source.index,1);_.splice(S.destination.index,0,Y),r(_)},A=()=>{d(-1),N(""),F(!0)},C=S=>{d(S),N(h[S].name),F(!0)},u=()=>{if(o===-1){const S=$(I);r(_=>[..._,S]),m(_=>({..._,[S.id]:[]})),g||y(S.id)}else if(o!==null){const S=h[o].id;r(_=>_.map((Y,B)=>B===o?{...Y,name:I}:Y)),g===S&&y(S)}F(!1)},D=()=>{F(!1)},O=S=>{W(S),L(!0)},Q=()=>{var S;if(J!==null){const _=J,Y=h[_];let B=[];m(v=>{B=v[Y.id]||[];const z={...v};return delete z[Y.id],z});const Z=g,b=h.filter((v,z)=>z!==_);r(b),g===Y.id&&y(((S=b[0])==null?void 0:S.id)||""),w("チームを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{r(v=>{const z=[...v];return z.splice(_,0,Y),z}),m(v=>({...v,[Y.id]:B})),y(Z)},autoHideDuration:5e3})}L(!1),W(null)},K=()=>{L(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(p,{onClick:A,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(Ae,{component:Me,storageKey:"teams-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsx(Ue,{onDragEnd:V,children:e.jsxs($e,{size:"small",children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"チーム名"}),e.jsx(a,{})]})}),e.jsx(Fe,{droppableId:"teams",children:S=>e.jsxs(We,{ref:S.innerRef,...S.droppableProps,children:[h.map((_,Y)=>e.jsx(Be,{draggableId:_.id,index:Y,children:B=>e.jsxs(ie,{ref:B.innerRef,...B.draggableProps,style:B.draggableProps.style,onClick:()=>C(Y),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",onClick:Z=>Z.stopPropagation(),children:e.jsx(c,{onClick:Z=>Z.stopPropagation(),...B.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",touchAction:"none",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{})})}),e.jsx(a,{children:_.name}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:Z=>Z.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:"small",onClick:()=>O(Y),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},_.id)),S.placeholder]})})]})})})]}),e.jsxs(Ge,{open:U,onClose:D,children:[e.jsxs(re,{children:["チーム名",o===-1?"追加":"編集"]}),e.jsx(oe,{sx:{mt:2},children:e.jsx(se,{label:"チーム名",value:I,onChange:S=>N(S.target.value),fullWidth:!0,margin:"dense"})}),e.jsxs(ce,{children:[e.jsx(p,{onClick:D,startIcon:e.jsx(de,{}),color:"inherit",sx:{color:{xs:"black",md:"inherit"}},children:"キャンセル"}),e.jsx(p,{onClick:u,disabled:I.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:f,onClose:K,children:[e.jsx(re,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このチームを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:K,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:Q,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}const Un=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function Fn({teams:h,members:r,setMembers:m,selectedTeam:g,setSelectedTeam:y,showSnackbar:$}){const[w,U]=l.useState(null),[F,I]=l.useState(""),[N,o]=l.useState(""),[d,f]=l.useState([]),[L,J]=l.useState(!0),[W,V]=l.useState(!1),[A,C]=l.useState(null),[u,D]=l.useState(!1),O=b=>{if(!b.destination||!g)return;const v=Array.from(r[g]||[]),[z]=v.splice(b.source.index,1);v.splice(b.destination.index,0,z),m(X=>({...X,[g]:v}))},Q=()=>{U(-1),I(""),o(""),f([]),J(!0),V(!0)},K=b=>{U(b);const v=r[g][b];I(String(v.no)),o(v.name),f(v.positions||[]),J(v.visible!==!1),V(!0)},S=()=>{g&&(w===-1?m(b=>({...b,[g]:[...b[g]||[],{id:Un(),no:Number(F),name:N,positions:d,visible:L}]})):w!==null&&m(b=>({...b,[g]:b[g].map((v,z)=>z===w?{...v,no:Number(F),name:N,positions:d,visible:L}:v)})),V(!1))},_=()=>{V(!1)},Y=b=>{C(b),D(!0)},B=()=>{if(g&&A!==null){const b=A;let v;m(z=>{const X=[...z[g]||[]];v=X[b];const ee=X.filter((he,ue)=>ue!==b);return{...z,[g]:ee}}),$("メンバーを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{v&&m(z=>{const X=[...z[g]||[]];return X.splice(b,0,v),{...z,[g]:X}})},autoHideDuration:5e3})}D(!1),C(null)},Z=()=>{D(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(fe,{fullWidth:!0,margin:"dense",sx:{mb:1},children:[e.jsx(ve,{id:"team-select-label",children:"チーム"}),e.jsx(pe,{labelId:"team-select-label",value:g,label:"チーム",onChange:b=>y(b.target.value),children:h.map(b=>e.jsx(H,{value:b.id,children:b.name},b.id))})]})}),e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(p,{onClick:Q,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(Ae,{component:Me,storageKey:"members-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{size:"small",children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"番号"}),e.jsx(a,{children:"名前"}),e.jsx(a,{children:"ポジション"}),e.jsx(a,{children:"表示"}),e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:O,children:e.jsx(Fe,{droppableId:"members",children:b=>{var v;return e.jsxs(We,{ref:b.innerRef,...b.droppableProps,children:[(v=r[g])==null?void 0:v.map((z,X)=>e.jsx(Be,{draggableId:z.id,index:X,children:ee=>e.jsxs(ie,{ref:ee.innerRef,...ee.draggableProps,"data-index":X,onClick:()=>K(X),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:he=>he.stopPropagation(),...ee.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{})})}),e.jsx(a,{children:z.no}),e.jsx(a,{children:z.name}),e.jsx(a,{children:(z.positions||[]).join(", ")}),e.jsx(a,{children:z.visible===!1?e.jsx(Je,{}):e.jsx(qe,{})}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:he=>he.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:"small",onClick:()=>Y(X),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},z.id)),b.placeholder]})}})})]})})]}),e.jsxs(Ge,{open:W,onClose:_,children:[e.jsxs(re,{children:["メンバー",w===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[e.jsx(se,{label:"番号",type:"number",value:F,onChange:b=>I(b.target.value),margin:"dense"}),e.jsx(se,{label:"名前",value:N,onChange:b=>o(b.target.value),margin:"dense"}),e.jsxs(fe,{children:[e.jsx(ve,{id:"positions-label",children:"ポジション"}),e.jsxs(pe,{labelId:"positions-label",multiple:!0,value:d,label:"ポジション",onChange:b=>f(typeof b.target.value=="string"?b.target.value.split(","):b.target.value),renderValue:b=>b.join(", "),children:[e.jsx(H,{value:"レフト",children:"レフト"}),e.jsx(H,{value:"センター",children:"センター"}),e.jsx(H,{value:"ライト",children:"ライト"}),e.jsx(H,{value:"セッター",children:"セッター"}),e.jsx(H,{value:"リベロ",children:"リベロ"})]})]}),e.jsxs(rt,{value:L?"visible":"hidden",exclusive:!0,onChange:(b,v)=>v&&J(v==="visible"),sx:{display:"flex"},children:[e.jsxs(De,{value:"visible",sx:{flex:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(qe,{sx:{mr:1}}),"表示"]}),e.jsxs(De,{value:"hidden",sx:{flex:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(Je,{sx:{mr:1}}),"非表示"]})]})]}),e.jsxs(ce,{children:[e.jsx(p,{onClick:_,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:S,disabled:F==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:u,onClose:Z,children:[e.jsx(re,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このメンバーを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:Z,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:B,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}const gl=!1;function Bn({openAddPlayDialog:h,playCategories:r,setPlayCategories:m,openEditPlayDialog:g,scoreInput:y,renderIcon:$,rallyCategoryTags:w,handlePlayDelete:U,openAddDetailDialog:F,playDetails:I,setPlayDetails:N,openEditDetailDialog:o,theme:d,rallyDetailTags:f,handleDetailDelete:L}){const J=C=>{if(!C.destination)return;const u=Array.from(r),[D]=u.splice(C.source.index,1);u.splice(C.destination.index,0,D),m(u)},W=xl.useMemo(()=>{const C=[];return r.forEach(u=>{I.forEach((D,O)=>{D.playCategoryId===u.id&&C.push(O)})}),C},[r,I]),V=C=>{if(!C.destination)return;const u=W[C.source.index],D=W[C.destination.index],O=Array.from(I),[Q]=O.splice(u,1);O.splice(D>u?D-1:D,0,Q),N(O)};let A=0;return e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(p,{onClick:h,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(Ae,{component:Me,storageKey:"play-category-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{size:"small",sx:{minWidth:600},children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{sx:{width:48}}),e.jsx(a,{children:"プレー区分"}),gl,y.showRallyIcons&&e.jsx(a,{children:"アイコン"}),e.jsx(a,{children:"タグ"}),e.jsx(a,{children:"表示"}),e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:J,children:e.jsx(Fe,{droppableId:"play-categories",children:C=>e.jsxs(We,{ref:C.innerRef,...C.droppableProps,children:[r.map((u,D)=>e.jsx(Be,{draggableId:u.id,index:D,children:O=>e.jsxs(ie,{ref:O.innerRef,...O.draggableProps,"data-index":D,onClick:()=>g(D),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",sx:{width:48},children:e.jsx(c,{onClick:Q=>Q.stopPropagation(),...O.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{})})}),e.jsx(a,{children:e.jsx(me,{label:u.name,size:"small",variant:"outlined",sx:{backgroundColor:"#fff",borderColor:u.color,color:u.color}})}),gl,y.showRallyIcons&&e.jsx(a,{children:$(u)}),e.jsx(a,{children:(u.tags||[]).map(Q=>{const K=w.find(_=>_.id===Q),S=(K==null?void 0:K.color)||le;return e.jsx(me,{label:(K==null?void 0:K.name)||Q,size:"small",sx:{mr:.5,mb:.5,backgroundColor:S,color:"#fff"}},Q)})}),e.jsx(a,{children:u.visible===!1?e.jsx(Je,{}):e.jsx(qe,{})}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:Q=>Q.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:"small",onClick:u.id==="init-serve"?void 0:()=>U(D),disabled:u.id==="init-serve",sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:u.id==="init-serve"?"disabled":"error"})})})})]})},u.id)),C.placeholder]})})})]})}),e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1,mt:2},children:e.jsx(p,{onClick:F,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(Ae,{component:Me,storageKey:"play-detail-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{size:"small",children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"プレー詳細"}),e.jsx(a,{children:"得点区分"}),e.jsx(a,{children:"得失点単位区分"}),e.jsx(a,{children:"タグ"}),e.jsx(a,{children:"表示"}),e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:V,children:e.jsx(Fe,{droppableId:"play-details",children:C=>e.jsxs(We,{ref:C.innerRef,...C.droppableProps,children:[r.map(u=>e.jsxs(xl.Fragment,{children:[e.jsx(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:e.jsx(a,{colSpan:7,children:u.name})}),I.map((D,O)=>({d:D,i:O})).filter(({d:D})=>D.playCategoryId===u.id).map(({d:D,i:O})=>{const Q=A++;return e.jsx(Be,{draggableId:D.id,index:Q,children:K=>e.jsxs(ie,{ref:K.innerRef,...K.draggableProps,"data-index":O,onClick:()=>o(O),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:S=>S.stopPropagation(),...K.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{})})}),e.jsx(a,{children:e.jsx(me,{label:D.name,size:"small",sx:{backgroundColor:D.pointType==="得点"?d.scoreColor:d.lossColor,border:`1px solid ${D.pointType==="得点"?d.scoreColor:d.lossColor}`,color:"#fff"}})}),e.jsx(a,{children:D.pointType}),e.jsx(a,{children:D.pointUnitType}),e.jsx(a,{children:(D.tags||[]).map(S=>{const _=f.find(B=>B.id===S),Y=(_==null?void 0:_.color)||le;return e.jsx(me,{label:(_==null?void 0:_.name)||S,size:"small",sx:{mr:.5,mb:.5,backgroundColor:Y,color:"#fff"}},S)})}),e.jsx(a,{children:D.visible===!1?e.jsx(Je,{}):e.jsx(qe,{})}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:S=>S.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:"small",onClick:()=>L(O),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},D.id)})]},u.id)),C.placeholder]})})})]})})]})}const jl=!1,fl=!1,pl=!1;function Vn({tags:h,setTags:r,rallyCategoryTags:m,setRallyCategoryTags:g,rallyDetailTags:y,setRallyDetailTags:$,setMatches:w,setPlayCategories:U,setPlayDetails:F,showSnackbar:I}){const[N,o]=l.useState(null),[d,f]=l.useState(""),[L,J]=l.useState(le),[W,V]=l.useState(!1),[A,C]=l.useState(null),[u,D]=l.useState(!1),[O,Q]=l.useState(null),[K,S]=l.useState(""),[_,Y]=l.useState(le),[B,Z]=l.useState(!1),[b,v]=l.useState(null),[z,X]=l.useState(!1),[ee,he]=l.useState(null),[ue,ae]=l.useState(""),[te,ge]=l.useState(le),[je,t]=l.useState(!1),[s,x]=l.useState(null),[R,E]=l.useState(!1),M=i=>{if(!i.destination)return;const k=Array.from(h),[P]=k.splice(i.source.index,1);k.splice(i.destination.index,0,P),r(k)},Te=i=>{if(!i.destination)return;const k=Array.from(m),[P]=k.splice(i.source.index,1);k.splice(i.destination.index,0,P),g(k)},et=i=>{if(!i.destination)return;const k=Array.from(y),[P]=k.splice(i.source.index,1);k.splice(i.destination.index,0,P),$(k)},tt=()=>{o(-1),f(""),J(le),V(!0)},bt=i=>{o(i),f(h[i].name),J(h[i].color),V(!0)},Ye=()=>{N===-1?r(i=>[...i,{id:crypto.randomUUID(),name:d,color:L}]):N!==null&&r(i=>i.map((k,P)=>P===N?{...k,name:d,color:L}:k)),V(!1)},Xe=()=>{V(!1)},ot=i=>{C(i),D(!0)},yt=()=>{if(A!==null){const i=A,k=h[i];let P=[];r(G=>G.filter((T,Ce)=>Ce!==i)),w(G=>(P=G.map(T=>({...T,tags:[...T.tags]})),G.map(T=>({...T,tags:T.tags.filter(Ce=>Ce!==k.id)})))),I("試合タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{r(G=>{const T=[...G];return T.splice(i,0,k),T}),w(()=>P)},autoHideDuration:5e3})}D(!1),C(null)},Qe=()=>{D(!1)},Oe=()=>{Q(-1),S(""),Y(le),Z(!0)},Re=i=>{Q(i),S(m[i].name),Y(m[i].color),Z(!0)},Ke=()=>{O===-1?g(i=>[...i,{id:crypto.randomUUID(),name:K,color:_}]):O!==null&&g(i=>i.map((k,P)=>P===O?{...k,name:K,color:_}:k)),Z(!1)},ct=()=>{Z(!1)},ze=i=>{v(i),X(!0)},vt=()=>{if(b!==null){const i=b,k=m[i];let P=[];g(G=>G.filter((T,Ce)=>Ce!==i)),U(G=>(P=G.map(T=>({...T,tags:[...T.tags||[]]})),G.map(T=>({...T,tags:(T.tags||[]).filter(Ce=>Ce!==k.id)})))),I("プレー区分タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{g(G=>{const T=[...G];return T.splice(i,0,k),T}),U(()=>P)},autoHideDuration:5e3})}X(!1),v(null)},Ie=()=>{X(!1)},Ct=()=>{he(-1),ae(""),ge(le),t(!0)},ke=i=>{he(i),ae(y[i].name),ge(y[i].color),t(!0)},It=()=>{ee===-1?$(i=>[...i,{id:crypto.randomUUID(),name:ue,color:te}]):ee!==null&&$(i=>i.map((k,P)=>P===ee?{...k,name:ue,color:te}:k)),t(!1)},Ee=()=>{t(!1)},Dt=i=>{x(i),E(!0)},Pe=()=>{if(s!==null){const i=s,k=y[i];let P=[];$(G=>G.filter((T,Ce)=>Ce!==i)),F(G=>(P=G.map(T=>({...T,tags:[...T.tags||[]]})),G.map(T=>({...T,tags:(T.tags||[]).filter(Ce=>Ce!==k.id)})))),I("プレー詳細タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{$(G=>{const T=[...G];return T.splice(i,0,k),T}),F(()=>P)},autoHideDuration:5e3})}E(!1),x(null)},dt=()=>{E(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsxs(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(c,{sx:{fontWeight:"bold"},children:"試合タグ"}),e.jsx(p,{onClick:tt,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})]}),e.jsx(Ae,{component:Me,storageKey:"match-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{size:"small",children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"タグ名称"}),jl,e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:M,children:e.jsx(Fe,{droppableId:"match-tags",children:i=>e.jsxs(We,{ref:i.innerRef,...i.droppableProps,children:[h.map((k,P)=>e.jsx(Be,{draggableId:k.id,index:P,children:G=>e.jsxs(ie,{ref:G.innerRef,...G.draggableProps,"data-index":P,onClick:()=>bt(P),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),...G.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{})})}),e.jsx(a,{children:e.jsx(me,{label:k.name,size:"small",sx:{backgroundColor:k.color,border:`1px solid ${k.color}`,color:"#fff"}})}),jl,e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:"small",onClick:()=>ot(P),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},k.id)),i.placeholder]})})})]})}),e.jsxs(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,mt:2},children:[e.jsx(c,{sx:{fontWeight:"bold"},children:"プレー区分タグ"}),e.jsx(p,{onClick:Oe,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})]}),e.jsx(Ae,{component:Me,storageKey:"play-category-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{size:"small",children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"タグ名称"}),fl,e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:Te,children:e.jsx(Fe,{droppableId:"rally-category-tags",children:i=>e.jsxs(We,{ref:i.innerRef,...i.droppableProps,children:[m.map((k,P)=>e.jsx(Be,{draggableId:k.id,index:P,children:G=>e.jsxs(ie,{ref:G.innerRef,...G.draggableProps,"data-index":P,onClick:()=>Re(P),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),...G.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{})})}),e.jsx(a,{children:e.jsx(me,{label:k.name,size:"small",sx:{backgroundColor:k.color,border:`1px solid ${k.color}`,color:"#fff"}})}),fl,e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:"small",onClick:()=>ze(P),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},k.id)),i.placeholder]})})})]})}),e.jsxs(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,mt:2},children:[e.jsx(c,{sx:{fontWeight:"bold"},children:"プレー詳細タグ"}),e.jsx(p,{onClick:Ct,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})]}),e.jsx(Ae,{component:Me,storageKey:"play-detail-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{size:"small",children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"タグ名称"}),pl,e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:et,children:e.jsx(Fe,{droppableId:"rally-detail-tags",children:i=>e.jsxs(We,{ref:i.innerRef,...i.droppableProps,children:[y.map((k,P)=>e.jsx(Be,{draggableId:k.id,index:P,children:G=>e.jsxs(ie,{ref:G.innerRef,...G.draggableProps,"data-index":P,onClick:()=>ke(P),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),...G.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{})})}),e.jsx(a,{children:e.jsx(me,{label:k.name,size:"small",sx:{backgroundColor:k.color,border:`1px solid ${k.color}`,color:"#fff"}})}),pl,e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:"small",onClick:()=>Dt(P),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},k.id)),i.placeholder]})})})]})})]}),e.jsxs(Ge,{open:W,onClose:Xe,children:[e.jsxs(re,{children:["タグ",N===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{mt:2},children:[e.jsx(se,{label:"タグ名称",value:d,onChange:i=>f(i.target.value),fullWidth:!0,margin:"dense"}),e.jsx(se,{label:"色",type:"color",value:L,onChange:i=>J(i.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(ce,{children:[e.jsx(p,{onClick:Xe,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:Ye,disabled:d.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:u,onClose:Qe,children:[e.jsx(re,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このタグを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:Qe,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:yt,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Ge,{open:B,onClose:ct,children:[e.jsxs(re,{children:["タグ",O===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{mt:2},children:[e.jsx(se,{label:"タグ名称",value:K,onChange:i=>S(i.target.value),fullWidth:!0,margin:"dense"}),e.jsx(se,{label:"色",type:"color",value:_,onChange:i=>Y(i.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(ce,{children:[e.jsx(p,{onClick:ct,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:Ke,disabled:K.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:z,onClose:Ie,children:[e.jsx(re,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このタグを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:Ie,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:vt,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Ge,{open:je,onClose:Ee,children:[e.jsxs(re,{children:["タグ",ee===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{mt:2},children:[e.jsx(se,{label:"タグ名称",value:ue,onChange:i=>ae(i.target.value),fullWidth:!0,margin:"dense"}),e.jsx(se,{label:"色",type:"color",value:te,onChange:i=>ge(i.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(ce,{children:[e.jsx(p,{onClick:Ee,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:It,disabled:ue.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:R,onClose:dt,children:[e.jsx(re,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このタグを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:dt,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:Pe,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}const Gn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function Kn({statsSettings:h,setStatsSettings:r,playCategories:m,playDetails:g,rallyCategoryTags:y,rallyDetailTags:$,showSnackbar:w}){const[U,F]=l.useState(null),[I,N]=l.useState(""),[o,d]=l.useState(""),[f,L]=l.useState([]),[J,W]=l.useState([]),[V,A]=l.useState(""),[C,u]=l.useState(""),[D,O]=l.useState("合算"),[Q,K]=l.useState(!1),[S,_]=l.useState(null),[Y,B]=l.useState(!1),Z=t=>{if(!t.destination)return;const s=Array.from(h),[x]=s.splice(t.source.index,1);s.splice(t.destination.index,0,x),r(s)},b=sn("md"),v=t=>{var s;return((s=m.find(x=>x.id===t))==null?void 0:s.name)||""},z=t=>{var s;return((s=g.find(x=>x.id===t))==null?void 0:s.name)||""},X=()=>{F(-1),N(""),d(""),L([]),W([]),A(""),u(""),O("合算"),K(!0)},ee=t=>{const s=h[t];F(t),N(s.playCategoryId||""),d(s.playDetailId||""),L(s.playCategoryTags||[]),W(s.playDetailTags||[]),A(s.pointType||""),u(s.pointUnitType||""),O(s.aggregateType||"合算"),K(!0)},he=()=>{const t=I!=="",s=o!=="",x=f.length>0,R=J.length>0,E=V!=="",M=C!=="";return t&&!s&&!x&&!R&&!E&&!M||t&&s&&!x&&!R&&!E&&!M||t&&!s&&!x&&!R&&E&&!M||t&&!s&&!x&&!R&&!E&&M||t&&!s&&!x&&!R&&E&&M||!t&&!s&&!x&&!R&&E&&!M||!t&&!s&&!x&&!R&&E&&M||!t&&!s&&!x&&!R&&!E&&M||x&&!t&&!s&&!R&&!E&&!M||x&&R&&!t&&!s&&!E&&!M||x&&R&&!t&&!s&&E&&!M||x&&R&&!t&&!s&&!E&&M||x&&R&&!t&&!s&&E&&M||x&&!t&&!s&&E&&!M||x&&!t&&!s&&!E&&M||x&&!t&&!s&&E&&M||R&&!t&&!s&&!x&&!E&&!M||R&&!t&&!s&&!x&&E&&!M||R&&!t&&!s&&!x&&!E&&M||R&&!t&&!s&&!x&&E&&M},ue=()=>{const t={id:U===-1?Gn():h[U].id,playCategoryId:I||void 0,playDetailId:o||void 0,playCategoryTags:I===""&&f.length>0?f:void 0,playDetailTags:o===""&&J.length>0?J:void 0,pointType:o?void 0:V||void 0,pointUnitType:o?void 0:C||void 0,aggregateType:D};U===-1?r(s=>[...s,t]):U!==null&&r(s=>s.map((x,R)=>R===U?t:x)),K(!1)},ae=()=>{K(!1)},te=t=>{_(t),B(!0)},ge=()=>{if(S!==null){const t=S,s=h[t];r(x=>x.filter((R,E)=>E!==t)),w("スタッツを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{r(x=>{const R=[...x];return R.splice(t,0,s),R})},autoHideDuration:5e3})}B(!1),_(null)},je=()=>{B(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(p,{onClick:X,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(Ae,{component:Me,storageKey:"stats-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{size:"small",children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"プレー区分"}),e.jsx(a,{children:"プレー詳細"}),e.jsx(a,{children:"得点区分"}),e.jsx(a,{children:"得失点単位区分"}),e.jsx(a,{children:"集計方法"}),e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:Z,children:e.jsx(Fe,{droppableId:"stats-settings",children:t=>e.jsxs(We,{ref:t.innerRef,...t.droppableProps,children:[h.map((s,x)=>e.jsx(Be,{draggableId:s.id,index:x,children:R=>e.jsxs(ie,{ref:R.innerRef,...R.draggableProps,"data-index":x,onClick:()=>ee(x),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:E=>E.stopPropagation(),...R.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ve,{})})}),e.jsx(a,{children:s.playCategoryId?v(s.playCategoryId):s.playCategoryTags&&s.playCategoryTags.length>0?e.jsx(c,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.playCategoryTags.map(E=>{const M=y.find(Te=>Te.id===E);return e.jsx(me,{label:(M==null?void 0:M.name)||E,size:"small",sx:{backgroundColor:(M==null?void 0:M.color)||le,color:"#fff"}},E)})}):""}),e.jsx(a,{children:s.playDetailId?z(s.playDetailId):s.playDetailTags&&s.playDetailTags.length>0?e.jsx(c,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.playDetailTags.map(E=>{const M=$.find(Te=>Te.id===E);return e.jsx(me,{label:(M==null?void 0:M.name)||E,size:"small",sx:{backgroundColor:(M==null?void 0:M.color)||le,color:"#fff"}},E)})}):""}),e.jsx(a,{children:s.pointType||""}),e.jsx(a,{children:s.pointUnitType||""}),e.jsx(a,{children:s.aggregateType||"合算"}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:E=>E.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:"small",onClick:()=>te(x),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},s.id)),t.placeholder]})})})]})})]}),e.jsxs(Ge,{open:Q,onClose:ae,children:[e.jsxs(re,{children:["スタッツ設定",U===-1?"追加":"編集"]}),e.jsx(oe,{sx:{display:"flex",flexDirection:"column",gap:2},children:b?e.jsxs(e.Fragment,{children:[e.jsxs(fe,{fullWidth:!0,sx:{mt:3},children:[e.jsx(ve,{id:"stat-category-label",children:"プレー区分"}),e.jsxs(pe,{labelId:"stat-category-label",value:I,label:"プレー区分",onChange:t=>{N(t.target.value),d(""),L([]),W([])},disabled:f.length>0||J.length>0,children:[e.jsx(H,{value:"",children:"なし"}),m.map(t=>e.jsx(H,{value:t.id,children:t.name},t.id))]})]}),e.jsxs(fe,{fullWidth:!0,sx:{mt:1},children:[e.jsx(ve,{id:"stat-detail-label",children:"プレー詳細"}),e.jsxs(pe,{labelId:"stat-detail-label",value:o,label:"プレー詳細",onChange:t=>{d(t.target.value),A(""),u(""),L([]),W([])},disabled:V!==""||C!==""||f.length>0||J.length>0,children:[e.jsx(H,{value:"",children:"なし"}),g.filter(t=>t.playCategoryId===I).map(t=>e.jsx(H,{value:t.id,children:t.name},t.id))]})]}),e.jsx(Ze,{multiple:!0,options:y,getOptionLabel:t=>t.name,value:y.filter(t=>f.includes(t.id)),onChange:(t,s)=>{L(s.map(x=>x.id)),s.length>0&&(N(""),d(""))},disabled:I!==""||o!=="",renderTags:(t,s)=>t.map((x,R)=>e.jsx(me,{...s({index:R}),label:x.name,size:"small",sx:{backgroundColor:x.color||le,color:"#fff"}})),renderInput:t=>e.jsx(se,{...t,label:"プレー区分タグ",margin:"dense"}),fullWidth:!0}),e.jsx(Ze,{multiple:!0,options:$,getOptionLabel:t=>t.name,value:$.filter(t=>J.includes(t.id)),onChange:(t,s)=>{W(s.map(x=>x.id)),s.length>0&&(N(""),d(""))},disabled:I!==""||o!=="",renderTags:(t,s)=>t.map((x,R)=>e.jsx(me,{...s({index:R}),label:x.name,size:"small",sx:{backgroundColor:x.color||le,color:"#fff"}})),renderInput:t=>e.jsx(se,{...t,label:"プレー詳細タグ",margin:"dense"}),fullWidth:!0}),e.jsxs(fe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-point-label",children:"得点区分"}),e.jsxs(pe,{labelId:"stat-point-label",value:V,label:"得点区分",onChange:t=>{A(t.target.value),t.target.value!==""&&d("")},disabled:o!=="",children:[e.jsx(H,{value:"",children:"なし"}),e.jsx(H,{value:"得点",children:"得点"}),e.jsx(H,{value:"失点",children:"失点"})]})]}),e.jsxs(fe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-unit-label",children:"得失点単位区分"}),e.jsxs(pe,{labelId:"stat-unit-label",value:C,label:"得失点単位区分",onChange:t=>{u(t.target.value),t.target.value!==""&&d("")},disabled:o!=="",children:[e.jsx(H,{value:"",children:"なし"}),e.jsx(H,{value:"メンバー",children:"メンバー"}),e.jsx(H,{value:"チーム",children:"チーム"})]})]}),e.jsxs(fe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-aggregate-label",children:"集計方法"}),e.jsxs(pe,{labelId:"stat-aggregate-label",value:D,label:"集計方法",onChange:t=>O(t.target.value),children:[e.jsx(H,{value:"合算",children:"合算"}),e.jsx(H,{value:"セット平均",children:"セット平均"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{display:"flex",gap:2,mt:3},children:[e.jsxs(fe,{fullWidth:!0,sx:{mt:1},children:[e.jsx(ve,{id:"stat-category-label",children:"プレー区分"}),e.jsxs(pe,{labelId:"stat-category-label",value:I,label:"プレー区分",onChange:t=>{N(t.target.value),d(""),L([]),W([])},disabled:f.length>0||J.length>0,children:[e.jsx(H,{value:"",children:"なし"}),m.map(t=>e.jsx(H,{value:t.id,children:t.name},t.id))]})]}),e.jsx(Ze,{multiple:!0,options:y,getOptionLabel:t=>t.name,value:y.filter(t=>f.includes(t.id)),onChange:(t,s)=>{L(s.map(x=>x.id)),s.length>0&&(N(""),d(""))},disabled:I!==""||o!=="",renderTags:(t,s)=>t.map((x,R)=>e.jsx(me,{...s({index:R}),label:x.name,size:"small",sx:{backgroundColor:x.color||le,color:"#fff"}})),renderInput:t=>e.jsx(se,{...t,label:"プレー区分タグ",margin:"dense"}),fullWidth:!0})]}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsxs(fe,{fullWidth:!0,sx:{mt:1},children:[e.jsx(ve,{id:"stat-detail-label",children:"プレー詳細"}),e.jsxs(pe,{labelId:"stat-detail-label",value:o,label:"プレー詳細",onChange:t=>{d(t.target.value),A(""),u(""),L([]),W([])},disabled:V!==""||C!==""||f.length>0||J.length>0,children:[e.jsx(H,{value:"",children:"なし"}),g.filter(t=>t.playCategoryId===I).map(t=>e.jsx(H,{value:t.id,children:t.name},t.id))]})]}),e.jsx(Ze,{multiple:!0,options:$,getOptionLabel:t=>t.name,value:$.filter(t=>J.includes(t.id)),onChange:(t,s)=>{W(s.map(x=>x.id)),s.length>0&&(N(""),d(""))},disabled:I!==""||o!=="",renderTags:(t,s)=>t.map((x,R)=>e.jsx(me,{...s({index:R}),label:x.name,size:"small",sx:{backgroundColor:x.color||le,color:"#fff"}})),renderInput:t=>e.jsx(se,{...t,label:"プレー詳細タグ",margin:"dense"}),fullWidth:!0})]}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsxs(fe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-point-label",children:"得点区分"}),e.jsxs(pe,{labelId:"stat-point-label",value:V,label:"得点区分",onChange:t=>{A(t.target.value),t.target.value!==""&&d("")},disabled:o!=="",children:[e.jsx(H,{value:"",children:"なし"}),e.jsx(H,{value:"得点",children:"得点"}),e.jsx(H,{value:"失点",children:"失点"})]})]}),e.jsxs(fe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-unit-label",children:"得失点単位区分"}),e.jsxs(pe,{labelId:"stat-unit-label",value:C,label:"得失点単位区分",onChange:t=>{u(t.target.value),t.target.value!==""&&d("")},disabled:o!=="",children:[e.jsx(H,{value:"",children:"なし"}),e.jsx(H,{value:"メンバー",children:"メンバー"}),e.jsx(H,{value:"チーム",children:"チーム"})]})]})]}),e.jsxs(fe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-aggregate-label",children:"集計方法"}),e.jsxs(pe,{labelId:"stat-aggregate-label",value:D,label:"集計方法",onChange:t=>O(t.target.value),children:[e.jsx(H,{value:"合算",children:"合算"}),e.jsx(H,{value:"セット平均",children:"セット平均"})]})]})]})}),e.jsxs(ce,{children:[e.jsx(p,{onClick:ae,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(p,{onClick:ue,disabled:!he(),startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:Y,onClose:je,children:[e.jsx(re,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このスタッツ設定を削除しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:je,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(p,{onClick:ge,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}const qn={appBarColor:"#F5F5F5",appBarTextColor:"#000000",buttonColor:"#1C8139",scoreColor:"#1C8139",lossColor:"#D21972"},Jn={appBarColor:"#F2EDE3",appBarTextColor:"#000000",buttonColor:"#48A588",scoreColor:"#48A588",lossColor:"#CE5164"};function Yn({theme:h,onThemeChange:r}){return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1,maxWidth:1024,width:"100%",mx:"auto"},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{sx:{mr:2},children:"アプリカラー"}),e.jsx("input",{type:"color",value:h.appBarColor,onChange:m=>r({...h,appBarColor:m.target.value}),title:"背景色"}),e.jsx("input",{type:"color",value:h.appBarTextColor,onChange:m=>r({...h,appBarTextColor:m.target.value}),title:"文字色",style:{marginLeft:8}})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{sx:{mr:2},children:"ボタンカラー"}),e.jsx("input",{type:"color",value:h.buttonColor,onChange:m=>r({...h,buttonColor:m.target.value})})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{sx:{mr:2},children:"得点カラー"}),e.jsx("input",{type:"color",value:h.scoreColor,onChange:m=>r({...h,scoreColor:m.target.value})})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{sx:{mr:2},children:"失点カラー"}),e.jsx("input",{type:"color",value:h.lossColor,onChange:m=>r({...h,lossColor:m.target.value})})]}),e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(p,{variant:"contained",onClick:()=>r({...qn}),startIcon:e.jsx(mt,{}),children:"オリジナル１"}),e.jsx(p,{variant:"contained",onClick:()=>r({...Jn}),startIcon:e.jsx(mt,{}),children:"オリジナル２"})]})]})}var Yt={},Xn=be;Object.defineProperty(Yt,"__esModule",{value:!0});var _l=Yt.default=void 0,Qn=Xn(ye()),Zn=e;_l=Yt.default=(0,Qn.default)((0,Zn.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay");function es({scoreInput:h,onScoreInputChange:r,dashboardVisible:m,onDashboardVisibleChange:g,showSnackbar:y}){const[$,w]=l.useState(!1),U=()=>{try{const o=[];for(let d=0;d<localStorage.length;d++){const f=localStorage.key(d);f&&f.startsWith("tutorial-")&&o.push(f)}o.forEach(d=>localStorage.removeItem(d)),y("ガイド表示済み状態をクリアしました","success")}catch(o){console.error(o),y("ガイド表示済み状態のクリアに失敗しました","error")}},F=()=>w(!0),I=()=>w(!1),N=()=>{w(!1),U()};return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",mt:1,maxWidth:1024,width:"100%",mx:"auto"},children:[e.jsx(st,{control:e.jsx(at,{checked:h.rallyMemberRequired,onChange:o=>r({...h,rallyMemberRequired:o.target.checked})}),label:"ラリー結果メンバー選択必須",sx:{mb:1}}),e.jsx(st,{control:e.jsx(at,{checked:h.showRallyIcons,onChange:o=>r({...h,showRallyIcons:o.target.checked})}),label:"ラリー結果アイコン表示",sx:{mb:1}}),e.jsx(st,{control:e.jsx(at,{checked:h.showScoreProgressArea,onChange:o=>r({...h,showScoreProgressArea:o.target.checked})}),label:"得点推移エリア表示",sx:{mb:1}}),e.jsx(st,{control:e.jsx(at,{checked:h.showGridScrollHint,onChange:o=>r({...h,showGridScrollHint:o.target.checked})}),label:"グリッド横スクロール表記表示",sx:{mb:1}}),e.jsx(st,{control:e.jsx(at,{checked:m,onChange:o=>g(o.target.checked)}),label:"ダッシュボード表示",sx:{mb:1,display:"none"}}),e.jsx(c,{sx:{mt:2,fontWeight:"bold"},children:"ガイド"}),e.jsx(p,{variant:"contained",startIcon:e.jsx(_l,{}),onClick:F,sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},alignSelf:"flex-start"},children:"ガイド再表示"}),e.jsxs(Se,{open:$,onClose:I,children:[e.jsx(re,{children:"確認"}),e.jsx(oe,{sx:{mt:2},children:"ガイドを再表示しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:I,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:N,startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}var Xt={},ts=be;Object.defineProperty(Xt,"__esModule",{value:!0});var Tl=Xt.default=void 0,ls=ts(ye()),ns=e;Tl=Xt.default=(0,ls.default)((0,ns.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");function ss({teams:h,matches:r,tags:m,matchLocks:g,setMatchLocks:y,lockGroupBy:$,setLockGroupBy:w,isMobile:U}){return e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto"},children:U?e.jsx(fe,{size:"small",sx:{mb:1},children:e.jsxs(pe,{value:$,onChange:F=>w(F.target.value),children:[e.jsx(H,{value:"none",children:"グルーピングなし"}),e.jsx(H,{value:"dateName",children:"試合日付＋試合名"}),e.jsx(H,{value:"card",children:"対戦カード"})]})}):e.jsxs(rt,{exclusive:!0,value:$,onChange:(F,I)=>{I!==null&&w(I)},sx:{mb:1},children:[e.jsx(De,{value:"none",children:"グルーピングなし"}),e.jsx(De,{value:"dateName",children:"試合日付＋試合名"}),e.jsx(De,{value:"card",children:"対戦カード"})]})}),e.jsx(Ae,{component:Me,storageKey:"match-lock-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs($e,{size:"small",children:[e.jsx(Ne,{children:e.jsxs(ie,{sx:{backgroundColor:"#f5f5f5",height:50},children:[e.jsx(a,{padding:"checkbox"}),e.jsx(a,{children:"日付"}),e.jsx(a,{children:"試合名"}),e.jsx(a,{children:"対戦カード"}),e.jsx(a,{children:"タグ"}),e.jsx(a,{children:"セット"})]})}),e.jsx(We,{children:function(){const F=d=>{var f;return((f=h.find(L=>L.id===d))==null?void 0:f.name)||""},I=$,N=an(r,I),o=d=>d.map(f=>{const L=f.sets.filter(A=>A.my>A.opponent).length,J=f.sets.filter(A=>A.my<A.opponent).length,W=f.sets.map((A,C)=>{const u=C<f.sets.length-1?", ":"";return`${A.my}-${A.opponent}${u}`}).join(""),V=g[f.id];return e.jsxs(ie,{sx:{backgroundColor:"white",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(_e,{size:"small",onClick:()=>y(A=>({...A,[f.id]:!A[f.id]})),children:V?e.jsx(yl,{sx:{color:"#D21972"}}):e.jsx(Tl,{sx:{color:"#1C8139"}})})}),e.jsx(a,{children:f.date}),e.jsx(a,{children:f.matchName}),e.jsx(a,{children:`${F(f.teamA)} - ${F(f.teamB)}`}),e.jsx(a,{children:f.tags.map(A=>{const C=m.find(D=>D.id===A),u=(C==null?void 0:C.color)||le;return e.jsx(me,{label:(C==null?void 0:C.name)||A,size:"small",sx:{mr:.5,mb:.5,backgroundColor:u,color:"#fff"}},A)})}),e.jsxs(a,{children:[L,"-",J," (",W,")"]})]},f.id)});return I==="none"?o(N.all||[]):Object.entries(N).map(([d,f])=>{const L=I==="card"?rn(f[0].teamA,f[0].teamB,h):d;return e.jsxs(l.Fragment,{children:[e.jsx(ie,{sx:{height:50},children:e.jsx(a,{colSpan:6,sx:{backgroundColor:"#e0e0e0",fontWeight:"bold",borderBottom:"2px solid #ccc"},children:L})}),o(f)]},d)})}()})]})})]})}var Qt={},as=be;Object.defineProperty(Qt,"__esModule",{value:!0});var Rl=Qt.default=void 0,is=as(ye()),rs=e;Rl=Qt.default=(0,is.default)((0,rs.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen");var Zt={},os=be;Object.defineProperty(Zt,"__esModule",{value:!0});var At=Zt.default=void 0,cs=os(ye()),ds=e;At=Zt.default=(0,cs.default)((0,ds.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload");var el={},xs=be;Object.defineProperty(el,"__esModule",{value:!0});var El=el.default=void 0,hs=xs(ye()),us=e;El=el.default=(0,hs.default)((0,us.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload");const gs=`[team]
サンプルチーム

[member]
サンプルチーム,1,バレーボーラー

[rally-play-category]
スパイク

[rally-play-detail]
スパイク,イン,得点,メンバー
スパイク,アウト,失点,メンバー
スパイク,アウト,失点,メンバー`,Lt=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36),js=h=>({id:crypto.randomUUID(),name:h}),fs=h=>({id:Lt(),name:h,color:le,iconType:"none",tags:[],visible:!0});function ps({onDeleteData:h,onImportData:r,onExportData:m,showSnackbar:g,teams:y,setTeams:$,setMembers:w,playCategories:U,setPlayCategories:F,setPlayDetails:I}){const[N,o]=l.useState(!1),[d,f]=l.useState(null),[L,J]=l.useState(!1),[W,V]=l.useState(!1),[A,C]=l.useState(gs),u=()=>{o(!0)},D=async()=>{o(!1);try{await h(),g("全データを削除しました","success")}catch(v){console.error(v),g("全データの削除に失敗しました","error")}},O=()=>{o(!1)},Q=v=>{f(v.target.files&&v.target.files[0]?v.target.files[0]:null)},K=()=>{J(!0)},S=async()=>{J(!1);const v=d;f(null);try{v&&await r(v),g("インポートが完了しました","success")}catch(z){console.error(z),g("インポートに失敗しました","error")}},_=()=>{J(!1)},Y=async()=>{try{await m(),g("エクスポートが完了しました","success")}catch(v){console.error(v),g("エクスポートに失敗しました","error")}},B=()=>{V(!0)},Z=()=>{V(!1);try{const v=A.replace(/\r\n/g,`
`).split(`
`);let z="";const X=[],ee={},he=[],ue=[];for(const ae of v){const te=ae.trim();if(te!==""){if(te.startsWith("[")&&te.endsWith("]")){z=te.toLowerCase();continue}switch(z){case"[team]":X.push(js(te));break;case"[member]":{const[ge,je,t]=te.split(",").map(s=>s.trim());if(ge&&je&&t){const s=[...y,...X].find(x=>x.name===ge);if(s){const x={id:Lt(),no:Number(je),name:t,positions:[],visible:!0};ee[s.id]||(ee[s.id]=[]),ee[s.id].push(x)}}break}case"[rally-play-category]":he.push(fs(te));break;case"[rally-play-detail]":{const[ge,je,t,s]=te.split(",").map(x=>x.trim());if(ge&&je&&t&&s){const x=[...U,...he].find(R=>R.name===ge);x&&ue.push({id:Lt(),playCategoryId:x.id,name:je,pointType:t,pointUnitType:s,tags:[],visible:!0})}break}default:break}}}X.length&&$(ae=>[...ae,...X]),Object.keys(ee).length&&w(ae=>{const te={...ae};for(const[ge,je]of Object.entries(ee))te[ge]=[...te[ge]||[],...je];return te}),he.length&&F(ae=>[...ae,...he]),ue.length&&I(ae=>[...ae,...ue]),X.length||Object.keys(ee).length||he.length||ue.length?(g("一括登録が完了しました","success"),C("")):g("登録対象のデータがありません","error")}catch(v){console.error(v),g("一括登録に失敗しました","error")}},b=()=>{V(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{maxWidth:1024,mx:"auto",textAlign:"left",display:"flex",flexDirection:"column",gap:1,alignItems:"flex-start"},children:[e.jsx(c,{sx:{fontWeight:"bold"},children:"データエクスポート"}),e.jsx(c,{children:e.jsx(p,{variant:"contained",startIcon:e.jsx(El,{}),onClick:Y,children:"エクスポート"})}),e.jsx(c,{sx:{mt:2,fontWeight:"bold"},children:"データインポート"}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(p,{variant:"outlined",component:"label",startIcon:e.jsx(Rl,{}),children:["ファイル選択",e.jsx("input",{type:"file",accept:".zip",hidden:!0,onChange:Q})]}),e.jsx(p,{variant:"contained",startIcon:e.jsx(At,{}),onClick:K,disabled:!d,children:"インポート"})]}),e.jsx(c,{sx:{mt:2,fontWeight:"bold"},children:"一括登録"}),e.jsx(se,{value:A,onChange:v=>C(v.target.value),multiline:!0,minRows:10,fullWidth:!0}),e.jsx(c,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:e.jsx(p,{variant:"contained",startIcon:e.jsx(At,{}),onClick:B,children:"一括登録"})}),e.jsx(c,{sx:{mt:2,fontWeight:"bold"},children:"データ削除"}),e.jsx(p,{variant:"contained",color:"error",startIcon:e.jsx(Le,{}),onClick:u,children:"全データ削除"})]}),e.jsxs(Se,{open:N,onClose:O,children:[e.jsx(re,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"全データを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:O,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:D,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:L,onClose:_,children:[e.jsx(re,{children:"確認"}),e.jsx(oe,{sx:{mt:2},children:"データをインポートしますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:_,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:S,disabled:!d,startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:W,onClose:b,children:[e.jsx(re,{children:"確認"}),e.jsx(oe,{sx:{mt:2},children:"一括登録を実行しますか？"}),e.jsxs(ce,{children:[e.jsx(p,{onClick:b,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(p,{onClick:Z,startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}var tl={},ms=be;Object.defineProperty(tl,"__esModule",{value:!0});var Pl=tl.default=void 0,bs=ms(ye()),ys=e;Pl=tl.default=(0,bs.default)((0,ys.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const vs=`MIT License

Copyright (c) 2025 shinya_sun_sun

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
`;function Cs(h){if(!h)return"";let r=h.replace(/^git\+/,"");const m=r.match(/^git@github\.com:(.+)$/);m&&(r=`https://github.com/${m[1]}`);const g=r.match(/^git:\/\/github\.com\/(.+)$/);g&&(r=`https://github.com/${g[1]}`);const y=r.match(/^ssh:\/\/git@github\.com\/(.+)$/);return y&&(r=`https://github.com/${y[1]}`),r.startsWith("github.com/")&&(r=`https://${r}`),/^[a-zA-Z]+:\/\//.test(r)||(/^[^/]+\/[^/]+$/.test(r)?r=`https://github.com/${r}`:r=`https://${r}`),r=r.replace(/\.git$/,""),r}function Is(){const[h,r]=l.useState(""),[m,g]=l.useState([]),[y,$]=l.useState(!0),[w,U]=l.useState({}),F={MIT:"https://opensource.org/license/mit/"};l.useEffect(()=>{on(()=>import("./licenses-CYb4Ap75.js"),[]).then(o=>g(o.licenses)).finally(()=>$(!1))},[]);const I=l.useMemo(()=>m.filter(o=>o.name.toLowerCase().includes(h.toLowerCase())),[h,m]),N=async o=>{if(!w[o])try{const d=await fetch(`https://raw.githubusercontent.com/spdx/license-list-data/main/text/${o}.txt`);if(!d.ok)throw new Error("not ok");const f=await d.text();U(L=>({...L,[o]:f}))}catch{U(d=>({...d,[o]:""}))}};return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(ft,{variant:"h6",sx:{mb:1},children:"BreakPoint MIT License"}),e.jsx(c,{component:"pre",sx:{p:1,backgroundColor:"#f5f5f5",whiteSpace:"pre-wrap",minHeight:128,overflow:"auto"},children:vs}),e.jsx(se,{label:"検索",size:"small",value:h,onChange:o=>r(o.target.value),sx:{my:2}}),e.jsx(c,{sx:{flexGrow:1,overflow:"auto"},children:y?e.jsx(c,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(Yl,{})}):I.map(o=>{const d=o.license;return e.jsxs(Xl,{onChange:(f,L)=>{L&&N(d)},children:[e.jsxs(Ql,{expandIcon:e.jsx(Pl,{}),children:[e.jsx(ft,{sx:{flexGrow:1},children:o.name}),e.jsx(ft,{variant:"body2",sx:{ml:2},children:d})]}),e.jsxs(Zl,{children:[(()=>{const f=Cs(o.url);return f&&e.jsx(Wt,{href:f,target:"_blank",rel:"noopener",sx:{display:"block",mb:1,wordBreak:"break-all"},children:f})})(),o.license.startsWith("CC")&&o.attribution&&e.jsx(ft,{variant:"body2",sx:{mb:1,whiteSpace:"pre-wrap"},children:o.attribution}),w[d]!==void 0&&(w[d]?e.jsx(c,{component:"pre",sx:{p:1,backgroundColor:"#f5f5f5",whiteSpace:"pre-wrap",maxHeight:300,overflow:"auto"},children:w[d]}):e.jsx(Wt,{href:F[d]||`https://spdx.org/licenses/${d}.html`,target:"_blank",rel:"noopener",sx:{wordBreak:"break-all"},children:F[d]||`https://spdx.org/licenses/${d}.html`}))]})]},o.name)})})]})}const Ds=un.create(c),ml=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function bl(h){if(typeof window>"u")return h;try{const m=new DOMParser().parseFromString(h,"image/svg+xml"),g=new Set(["svg","g","path","circle","rect","line","polygon","polyline","text","defs","use"]),y=$=>{[...$.children].forEach(w=>{if(g.has(w.tagName))[...w.attributes].forEach(U=>{U.name.startsWith("on")&&w.removeAttribute(U.name)}),y(w);else{const U=document.createTextNode(w.outerHTML);w.replaceWith(U)}})};return y(m.documentElement),m.documentElement.outerHTML}catch{return""}}function Ss({src:h,cropX:r,cropY:m,onChange:g}){const y=l.useRef(null),$=l.useRef(null),[w,U]=l.useState(!1),[F,I]=l.useState({x:0,y:0}),N=()=>y.current?{sx:y.current.clientWidth/y.current.naturalWidth,sy:y.current.clientHeight/y.current.naturalHeight}:{sx:1,sy:1},o=W=>{W.preventDefault(),W.stopPropagation();const V=$.current.getBoundingClientRect();I({x:W.clientX-V.left,y:W.clientY-V.top}),U(!0)},d=W=>{if(!w||!y.current)return;const V=y.current.getBoundingClientRect(),{sx:A,sy:C}=N(),u=W.clientX-V.left-F.x,D=W.clientY-V.top-F.y,O=Math.min(Math.max(0,u/A),y.current.naturalWidth-64),Q=Math.min(Math.max(0,D/C),y.current.naturalHeight-64);g(Math.round(O),Math.round(Q))},f=()=>U(!1),{sx:L,sy:J}=N();return e.jsxs(c,{sx:{position:"relative",display:"inline-block"},onMouseMove:d,onMouseUp:f,onMouseLeave:f,children:[e.jsx("img",{src:h,ref:y,style:{maxWidth:256}}),e.jsx(c,{ref:$,sx:{position:"absolute",left:r*L,top:m*J,width:64,height:64,border:"1px solid red",cursor:"move"},onMouseDown:o})]})}function ks({name:h}){const r=l.useRef(null),[m,g]=l.useState(1);return l.useEffect(()=>{const y=r.current;if(!y)return;const $=y.getBBox().width;g($>64?64/$:1)},[h]),e.jsx("svg",{width:64,height:64,children:e.jsx("g",{transform:`scale(${m})`,children:e.jsx("text",{ref:r,x:32/m,y:32/m,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,children:h})})})}function Ms({matches:h,teams:r,teamMembers:m,playCategories:g,playDetails:y,statsSettings:$,tags:w,rallyCategoryTags:U,rallyDetailTags:F,themeSetting:I,scoreInputSetting:N,onSave:o,onDirtyChange:d,onDeleteData:f,onImportData:L,onExportData:J,showSnackbar:W,dashboardVisible:V,onDashboardVisibleChange:A,setAppBarLeftAction:C}){var dl;const[u,D]=l.useState("teams");l.useEffect(()=>{window.scrollTo(0,0)},[u]);const[O,Q]=l.useState([...r]),[K,S]=l.useState({...m}),[_,Y]=l.useState(((dl=r[0])==null?void 0:dl.id)||""),[B,Z]=l.useState([...g]),[b,v]=l.useState(null),[z,X]=l.useState(""),[ee,he]=l.useState(le),[ue,ae]=l.useState("設定なし"),[te,ge]=l.useState(""),[je,t]=l.useState(""),[s,x]=l.useState(0),[R,E]=l.useState(0),[M,Te]=l.useState([]),[et,tt]=l.useState(!0),[bt,Ye]=l.useState(!1),[Xe,ot]=l.useState(null),[yt,Qe]=l.useState(!1),[Oe,Re]=l.useState([...y]),[Ke,ct]=l.useState([...$]),[ze,vt]=l.useState([...w]),[Ie,Ct]=l.useState([...U]),[ke,It]=l.useState([...F]),[Ee,Dt]=l.useState({...I}),[Pe,dt]=l.useState({...N}),[i,k]=l.useState([...h]),[P,G]=l.useState(()=>{const n={};return h.forEach(j=>{n[j.id]=!!j.locked}),n}),[T,Ce]=l.useState("none"),xt=!0,lt=tn(),ht=ln();l.useEffect(()=>{if(!lt.pathname.startsWith("/settings"))return;lt.pathname.split("/")[2]},[xt,lt.pathname,ht]),l.useEffect(()=>{const j=lt.pathname.split("/")[2];D(j??null)},[lt.pathname,xt]);const[nt,ll]=l.useState(null),[St,kt]=l.useState(""),[ut,Ot]=l.useState(""),[_t,Tt]=l.useState("得点"),[Rt,Et]=l.useState("メンバー"),[Pt,wt]=l.useState([]),[Mt,$t]=l.useState(!0),[wl,gt]=l.useState(!1),[nl,sl]=l.useState(null),[Ml,Nt]=l.useState(!1),$l=n=>({id:crypto.randomUUID(),name:n}),Nl=n=>({id:ml(),name:n,color:le,iconType:"none",tags:[],visible:!0}),jt=l.useMemo(()=>{const n=h.some(j=>!!j.locked!==P[j.id]);return JSON.stringify(O)!==JSON.stringify(r)||JSON.stringify(K)!==JSON.stringify(m)||JSON.stringify(B)!==JSON.stringify(g)||JSON.stringify(Oe)!==JSON.stringify(y)||JSON.stringify(Ke)!==JSON.stringify($)||JSON.stringify(ze)!==JSON.stringify(w)||JSON.stringify(Ie)!==JSON.stringify(U)||JSON.stringify(ke)!==JSON.stringify(F)||JSON.stringify(Ee)!==JSON.stringify(I)||JSON.stringify(Pe)!==JSON.stringify(N)||n},[O,K,B,Oe,Ke,ze,Ie,ke,Ee,Pe,P,r,m,g,y,$,w,U,F,I,N,h]),Wl=l.useMemo(()=>[{key:"teams",label:"チーム",icon:e.jsx(Il,{})},{key:"members",label:"メンバー",icon:e.jsx(Dl,{})},{key:"scores",label:"ラリー",icon:e.jsx(cn,{})},{key:"tags",label:"タグ",icon:e.jsx(Sl,{})},{key:"stats",label:"スタッツ",icon:e.jsx(dn,{})},{key:"locks",label:"試合ロック",icon:e.jsx(yl,{})},{key:"theme",label:"テーマ",icon:e.jsx(mt,{})},{key:"display",label:"表示・操作",icon:e.jsx(kl,{})},{key:"data",label:"データ",icon:e.jsx(Ol,{})},{key:"license",label:"ライセンス",icon:e.jsx(xn,{})}],[]),Al=l.useMemo(()=>[["teams","members","scores","tags","stats"],["display","theme"],["locks","data"],["license"]],[]),al=l.useCallback(()=>{const n=i.map(j=>({...j,locked:P[j.id]}));o(O,K,B,Oe,Ke,ze,Ie,ke,Ee,Pe,n,!0)},[B,Oe,P,i,o,O,K,Ke,ze,Ie,ke,Ee,Pe]),Ll=()=>{v(-1),X(""),he(le),ae("設定なし"),ge(""),t(""),x(0),E(0),Te([]),tt(!0),Ye(!0)},zl=n=>{v(n),X(B[n].name),he(B[n].color||le);const j=B[n];ae(j.iconType==="svg"?"SVG":j.iconType==="image"?"画像":"設定なし"),ge(j.svg||""),t(j.image||""),x(j.cropX||0),E(j.cropY||0),Te(j.tags||[]),tt(j.visible!==!1),Ye(!0)},Hl=()=>{const n=ue==="SVG"?"svg":ue==="画像"?"image":"none",j=n==="svg"?{iconType:n,svg:te}:n==="image"?{iconType:n,image:je,cropX:s,cropY:R}:{iconType:n};b===-1?Z(q=>[...q,{...Nl(z),...j,color:ee,tags:M,visible:et}]):b!==null&&Z(q=>q.map((ne,we)=>we===b?{...ne,name:z,...j,color:ee,tags:M,visible:et}:ne)),Ye(!1)},il=()=>{Ye(!1)},Ul=n=>{ot(n),Qe(!0)},Fl=()=>{if(Xe!==null&&B[Xe].id!=="init-serve"){const n=Xe,j=B[n];Z(q=>q.filter((ne,we)=>we!==n)),W("プレー区分を削除しました","success",{actionLabel:"元に戻す",onAction:()=>{Z(q=>{const ne=[...q];return ne.splice(n,0,j),ne})},autoHideDuration:5e3})}Qe(!1),ot(null)},rl=()=>{Qe(!1)},Bl=()=>{var n;ll(-1),kt(((n=B.find(j=>j.visible!==!1))==null?void 0:n.id)||""),Ot(""),Tt("得点"),Et("メンバー"),wt([]),$t(!0),gt(!0)},Vl=n=>{const j=Oe[n];ll(n),kt(j.playCategoryId),Ot(j.name),Tt(j.pointType),Et(j.pointUnitType),wt(j.tags||[]),$t(j.visible!==!1),gt(!0)},Gl=()=>{nt===-1?Re(n=>[...n,{id:ml(),playCategoryId:St,name:ut,pointType:_t,pointUnitType:Rt,tags:Pt,visible:Mt}]):nt!==null&&Re(n=>n.map((j,q)=>q===nt?{...j,playCategoryId:St,name:ut,pointType:_t,pointUnitType:Rt,tags:Pt,visible:Mt}:j)),gt(!1)},ol=()=>{gt(!1)},Kl=n=>{sl(n),Nt(!0)},ql=()=>{if(nl!==null){const n=nl,j=Oe[n];Re(q=>q.filter((ne,we)=>we!==n)),W("プレー詳細を削除しました","success",{actionLabel:"元に戻す",onAction:()=>{Re(q=>{const ne=[...q];return ne.splice(n,0,j),ne})},autoHideDuration:5e3})}Nt(!1),sl(null)},cl=()=>{Nt(!1)};l.useEffect(()=>(C(u?e.jsx(_e,{onClick:()=>ht("/settings"),size:"small",children:e.jsx(vl,{})}):null),()=>C(null)),[C,xt,u,ht]),l.useEffect(()=>(d==null||d(jt),()=>d==null?void 0:d(!1)),[jt,d]),l.useEffect(()=>{jt&&al()},[jt,al]);const Jl=n=>n.iconType==="svg"&&n.svg?e.jsx(c,{sx:{width:64,height:64},dangerouslySetInnerHTML:{__html:bl(n.svg)}}):n.iconType==="image"&&n.image?e.jsx(c,{component:"img",src:n.image,sx:{width:64,height:64,objectFit:"none",objectPosition:`-${n.cropX||0}px -${n.cropY||0}px`}}):e.jsx(ks,{name:n.name});return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",height:"100dvh"},children:[u===null?e.jsx(c,{children:Al.map((n,j)=>e.jsx(en,{orientation:"vertical",fullWidth:!0,variant:"outlined",sx:{mb:2,"& .MuiButton-root":{justifyContent:"flex-start",color:"#000000DE",height:50,textAlign:"left"},"& .MuiButton-root .MuiButton-startIcon":{mr:1},"& .MuiButton-root .MuiButton-endIcon":{marginLeft:"auto"},"& .MuiButtonGroup-grouped":{borderColor:"divider"}},children:n.map(q=>{const ne=Wl.find(we=>we.key===q);return ne?e.jsx(p,{onClick:()=>ht(`/settings/${q}`),startIcon:ne.icon,endIcon:e.jsx(Cl,{sx:{color:"#000000DE"}}),children:ne.label},q):null})},j))}):null,u!==null&&e.jsx(c,{sx:{mt:0,flexGrow:1,overflowY:"visible"},children:e.jsx(hn,{mode:"wait",children:u&&e.jsxs(Ds,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[u==="teams"&&e.jsx(Hn,{teams:O,setTeams:Q,setMembers:S,selectedTeam:_,setSelectedTeam:Y,createTeam:$l,showSnackbar:W}),u==="members"&&(O.length===0?e.jsxs(pt,{severity:"info",children:["チームを登録するとメンバーを設定できるようになります",e.jsx("br",{}),e.jsx(Wt,{component:nn,to:"/settings/teams",children:"チーム設定へ"})]}):_&&e.jsx(Fn,{teams:O,members:K,setMembers:S,selectedTeam:_,setSelectedTeam:Y,showSnackbar:W})),u==="scores"&&e.jsx(Bn,{openAddPlayDialog:Ll,playCategories:B,setPlayCategories:Z,openEditPlayDialog:zl,scoreInput:Pe,renderIcon:Jl,rallyCategoryTags:Ie,handlePlayDelete:Ul,openAddDetailDialog:Bl,playDetails:Oe,setPlayDetails:Re,openEditDetailDialog:Vl,theme:Ee,rallyDetailTags:ke,handleDetailDelete:Kl}),u==="stats"&&e.jsx(Kn,{statsSettings:Ke,setStatsSettings:ct,playCategories:B,playDetails:Oe,rallyCategoryTags:Ie,rallyDetailTags:ke,showSnackbar:W}),u==="tags"&&e.jsx(Vn,{tags:ze,setTags:vt,rallyCategoryTags:Ie,setRallyCategoryTags:Ct,rallyDetailTags:ke,setRallyDetailTags:It,setMatches:k,setPlayCategories:Z,setPlayDetails:Re,showSnackbar:W}),u==="locks"&&e.jsx(ss,{teams:O,matches:i,tags:ze,matchLocks:P,setMatchLocks:G,lockGroupBy:T,setLockGroupBy:Ce,isMobile:xt}),u==="theme"&&e.jsx(Yn,{theme:Ee,onThemeChange:Dt}),u==="display"&&e.jsx(es,{scoreInput:Pe,onScoreInputChange:dt,dashboardVisible:V,onDashboardVisibleChange:A,showSnackbar:W}),u==="data"&&e.jsx(ps,{onDeleteData:f,onImportData:L,onExportData:J,showSnackbar:W,teams:O,setTeams:Q,setMembers:S,playCategories:B,setPlayCategories:Z,setPlayDetails:Re}),u==="license"&&e.jsx(Is,{})]},u)})}),e.jsxs(Ge,{open:bt,onClose:il,children:[e.jsxs(re,{children:["プレー区分",b===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[e.jsx(se,{label:"プレー区分",value:z,onChange:n=>X(n.target.value),fullWidth:!0,margin:"dense"}),e.jsx(se,{label:"色",type:"color",value:ee,onChange:n=>he(n.target.value),margin:"dense",InputLabelProps:{shrink:!0},fullWidth:!0}),e.jsx(Ze,{multiple:!0,options:Ie,getOptionLabel:n=>n.name,value:Ie.filter(n=>M.includes(n.id)),onChange:(n,j)=>Te(j.map(q=>q.id)),renderTags:(n,j)=>n.map((q,ne)=>l.createElement(me,{...j({index:ne}),key:q.id,label:q.name,size:"small",sx:{backgroundColor:q.color||le,color:"#fff"}})),renderInput:n=>e.jsx(se,{...n,label:"タグ",margin:"dense"})}),e.jsxs(pt,{severity:"info",children:["プレー区分タグは設定＞タグメニューにて追加できます",e.jsx("br",{}),"プレー区分にタグを設定することにより、プレー区分を横串で集計することが可能となります"]}),e.jsxs(rt,{exclusive:!0,value:et?"表示":"非表示",onChange:(n,j)=>j&&tt(j==="表示"),fullWidth:!0,children:[e.jsxs(De,{value:"表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(qe,{sx:{mr:1}}),"表示"]}),e.jsxs(De,{value:"非表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(Je,{sx:{mr:1}}),"非表示"]})]}),Pe.showRallyIcons&&e.jsxs(e.Fragment,{children:[e.jsxs(rt,{exclusive:!0,value:ue,onChange:(n,j)=>j&&ae(j),children:[e.jsx(De,{value:"設定なし",children:"設定なし"}),e.jsx(De,{value:"SVG",children:"SVG"}),e.jsx(De,{value:"画像",children:"画像"})]}),ue==="SVG"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{sx:{width:64,height:64},dangerouslySetInnerHTML:{__html:bl(te)}}),e.jsx(se,{multiline:!0,minRows:10,label:"SVG",value:te,onChange:n=>ge(n.target.value),fullWidth:!0,margin:"dense"})]}),ue==="画像"&&e.jsxs(e.Fragment,{children:[je&&e.jsx(Ss,{src:je,cropX:s,cropY:R,onChange:(n,j)=>{x(n),E(j)}}),e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/bmp,image/tiff,image/gif",onChange:n=>{var ne;const j=(ne=n.target.files)==null?void 0:ne[0];if(!j)return;const q=new FileReader;q.onload=()=>{t(q.result)},q.readAsDataURL(j)}})]})]})]}),e.jsxs(ce,{children:[e.jsx(p,{onClick:il,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(p,{onClick:Hl,disabled:z.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Ge,{open:wl,onClose:ol,children:[e.jsxs(re,{children:["プレー詳細",nt===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(fe,{fullWidth:!0,sx:{mt:3},children:[e.jsx(ve,{id:"detail-category-label",children:"プレー区分"}),e.jsx(pe,{labelId:"detail-category-label",value:St,label:"プレー区分",onChange:n=>kt(n.target.value),children:B.map(n=>e.jsx(H,{value:n.id,children:n.name},n.id))})]}),e.jsx(se,{label:"プレー詳細",value:ut,onChange:n=>Ot(n.target.value),margin:"dense"}),e.jsxs(fe,{fullWidth:!0,children:[e.jsx(ve,{id:"detail-point-label",children:"得点区分"}),e.jsxs(pe,{labelId:"detail-point-label",value:_t,label:"得点区分",onChange:n=>Tt(n.target.value),children:[e.jsx(H,{value:"得点",children:"得点"}),e.jsx(H,{value:"失点",children:"失点"})]})]}),e.jsxs(fe,{fullWidth:!0,children:[e.jsx(ve,{id:"detail-point-unit-label",children:"得失点単位区分"}),e.jsxs(pe,{labelId:"detail-point-unit-label",value:Rt,label:"得失点単位区分",onChange:n=>Et(n.target.value),disabled:nt!==-1,children:[e.jsx(H,{value:"メンバー",children:"メンバー"}),e.jsx(H,{value:"チーム",children:"チーム"})]})]}),e.jsx(pt,{severity:"warning",sx:{whiteSpace:"pre-line"},children:`得失点単位区分は追加時にのみ設定でき、後から変更できません
再設定する場合はプレー詳細を作り直してください`}),e.jsx(Ze,{multiple:!0,options:ke,getOptionLabel:n=>n.name,value:ke.filter(n=>Pt.includes(n.id)),onChange:(n,j)=>wt(j.map(q=>q.id)),renderTags:(n,j)=>n.map((q,ne)=>{const we=q.color||le;return l.createElement(me,{...j({index:ne}),key:q.id,label:q.name,size:"small",sx:{backgroundColor:we,color:"#fff"}})}),renderInput:n=>e.jsx(se,{...n,label:"タグ",margin:"dense"})}),e.jsxs(pt,{severity:"info",children:["プレー詳細タグは設定＞タグメニューにて追加できます",e.jsx("br",{}),"プレー詳細にタグを設定することにより、プレー詳細を横串で集計することが可能となります"]}),e.jsxs(rt,{exclusive:!0,value:Mt?"表示":"非表示",onChange:(n,j)=>j&&$t(j==="表示"),fullWidth:!0,children:[e.jsxs(De,{value:"表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(qe,{sx:{mr:1}}),"表示"]}),e.jsxs(De,{value:"非表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(Je,{sx:{mr:1}}),"非表示"]})]})]}),e.jsxs(ce,{children:[e.jsx(p,{onClick:ol,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(p,{onClick:Gl,disabled:ut.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:yt,onClose:rl,children:[e.jsx(re,{children:"削除確認"}),e.jsxs(oe,{sx:{mt:2},children:["このプレー区分を削除しますか？",e.jsx(c,{sx:{mt:1},children:"削除すると、すでに入力されている試合のスコアや分析に影響が出る可能性があります。"})]}),e.jsxs(ce,{children:[e.jsx(p,{onClick:rl,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(p,{onClick:Fl,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Se,{open:Ml,onClose:cl,children:[e.jsx(re,{children:"削除確認"}),e.jsxs(oe,{sx:{mt:2},children:["このプレー詳細を削除しますか？",e.jsx(c,{sx:{mt:1},children:"削除すると、すでに入力されている試合のスコアや分析に影響が出る可能性があります。"})]}),e.jsxs(ce,{children:[e.jsx(p,{onClick:cl,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(p,{onClick:ql,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}export{Ms as default};
