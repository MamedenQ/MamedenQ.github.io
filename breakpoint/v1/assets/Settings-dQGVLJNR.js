import{i as be,j as e,B as c,q as f,f as we,g as Ae,h as $e,k as re,l as a,m as Ne,I as Te,n as ie,o as oe,O as se,p as ce,D as ke,F as pe,L as ve,S as fe,M as F,d as ot,e as De,C as me,N as Ze,a0 as at,a1 as rt,G as ft,a2 as Yl,a3 as Xl,a4 as Ql,a5 as Zl,V as Nt,a6 as en,A as mt}from"./mui-vendor-Bb0AjAZd.js";import{r as l,b as xl,u as tn,f as ln,L as nn}from"./react-vendor-QLNaZ7XN.js";import{r as ye,a as He,S as We,d as Le,R as Fe,b as de,c as xe,D as le,u as sn,g as an,e as rn,f as yl,_ as on,h as cn}from"./index-wjhS_W1G.js";import{a as dn,d as xn}from"./QueryStatsOutlined-DteUtK4m.js";import{D as Ue,C as Be,P as Ve,d as Ge}from"./DragIndicator-B6fNuwcC.js";import{A as hn,m as un}from"./motion-vendor-Bslre2pU.js";import"./chart-vendor-CuPFlH9t.js";var zt={},gn=be;Object.defineProperty(zt,"__esModule",{value:!0});var qe=zt.default=void 0,jn=gn(ye()),pn=e;qe=zt.default=(0,jn.default)((0,pn.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7"}),"VisibilityOutlined");var Ht={},fn=be;Object.defineProperty(Ht,"__esModule",{value:!0});var Je=Ht.default=void 0,mn=fn(ye()),bn=e;Je=Ht.default=(0,mn.default)((0,bn.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6m-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14M2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45zm7.5 7.5 2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13m-3.4-3.4 1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53"}),"VisibilityOffOutlined");var Ft={},yn=be;Object.defineProperty(Ft,"__esModule",{value:!0});var vl=Ft.default=void 0,vn=yn(ye()),Cn=e;vl=Ft.default=(0,vn.default)((0,Cn.jsx)("path",{d:"M15.61 7.41 14.2 6l-6 6 6 6 1.41-1.41L11.03 12z"}),"NavigateBeforeOutlined");var Ut={},In=be;Object.defineProperty(Ut,"__esModule",{value:!0});var Cl=Ut.default=void 0,Dn=In(ye()),kn=e;Cl=Ut.default=(0,Dn.default)((0,kn.jsx)("path",{d:"M10.02 6 8.61 7.41 13.19 12l-4.58 4.59L10.02 18l6-6z"}),"NavigateNextOutlined");var Bt={},Sn=be;Object.defineProperty(Bt,"__esModule",{value:!0});var Il=Bt.default=void 0,On=Sn(ye()),_n=e;Il=Bt.default=(0,On.default)((0,_n.jsx)("path",{d:"M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zm-7.76-2.78c-1.17-.52-2.61-.9-4.24-.9-1.63 0-3.07.39-4.24.9C6.68 14.13 6 15.21 6 16.39V18h12v-1.61c0-1.18-.68-2.26-1.76-2.74M8.07 16c.09-.23.13-.39.91-.69.97-.38 1.99-.56 3.02-.56s2.05.18 3.02.56c.77.3.81.46.91.69zM12 8c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"GroupsOutlined");var Vt={},Tn=be;Object.defineProperty(Vt,"__esModule",{value:!0});var Dl=Vt.default=void 0,Rn=Tn(ye()),En=e;Dl=Vt.default=(0,Rn.default)((0,En.jsx)("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined");var Gt={},Pn=be;Object.defineProperty(Gt,"__esModule",{value:!0});var kl=Gt.default=void 0,Mn=Pn(ye()),hl=e;kl=Gt.default=(0,Mn.default)([(0,hl.jsx)("path",{d:"m21.41 11.41-8.83-8.83c-.37-.37-.88-.58-1.41-.58H4c-1.1 0-2 .9-2 2v7.17c0 .53.21 1.04.59 1.41l8.83 8.83c.78.78 2.05.78 2.83 0l7.17-7.17c.78-.78.78-2.04-.01-2.83M12.83 20 4 11.17V4h7.17L20 12.83z"},"0"),(0,hl.jsx)("circle",{cx:"6.5",cy:"6.5",r:"1.5"},"1")],"SellOutlined");var Kt={},wn=be;Object.defineProperty(Kt,"__esModule",{value:!0});var et=Kt.default=void 0,An=wn(ye()),it=e;et=Kt.default=(0,An.default)([(0,it.jsx)("path",{d:"M12 22C6.49 22 2 17.51 2 12S6.49 2 12 2s10 4.04 10 9c0 3.31-2.69 6-6 6h-1.77c-.28 0-.5.22-.5.5 0 .12.05.23.13.33.41.47.64 1.06.64 1.67 0 1.38-1.12 2.5-2.5 2.5m0-18c-4.41 0-8 3.59-8 8s3.59 8 8 8c.28 0 .5-.22.5-.5 0-.16-.08-.28-.14-.35-.41-.46-.63-1.05-.63-1.65 0-1.38 1.12-2.5 2.5-2.5H16c2.21 0 4-1.79 4-4 0-3.86-3.59-7-8-7"},"0"),(0,it.jsx)("circle",{cx:"6.5",cy:"11.5",r:"1.5"},"1"),(0,it.jsx)("circle",{cx:"9.5",cy:"7.5",r:"1.5"},"2"),(0,it.jsx)("circle",{cx:"14.5",cy:"7.5",r:"1.5"},"3"),(0,it.jsx)("circle",{cx:"17.5",cy:"11.5",r:"1.5"},"4")],"PaletteOutlined");var qt={},$n=be;Object.defineProperty(qt,"__esModule",{value:!0});var Sl=qt.default=void 0,Nn=$n(ye()),ul=e;Sl=qt.default=(0,Nn.default)([(0,ul.jsx)("path",{d:"M20 3H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h4v2h8v-2h4c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 14H4V5h16z"},"0"),(0,ul.jsx)("path",{d:"M6 8.25h8v1.5H6zm10.5 1.5H18v-1.5h-1.5V7H15v4h1.5zm-6.5 2.5h8v1.5h-8zM7.5 15H9v-4H7.5v1.25H6v1.5h1.5z"},"1")],"DisplaySettingsOutlined");var Jt={},Wn=be;Object.defineProperty(Jt,"__esModule",{value:!0});var Ol=Jt.default=void 0,Ln=Wn(ye()),zn=e;Ol=Jt.default=(0,Ln.default)((0,zn.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"StorageOutlined");function Hn({teams:h,setTeams:o,setMembers:b,selectedTeam:j,setSelectedTeam:v,createTeam:A,showSnackbar:M}){const[U,$]=l.useState(!1),[k,N]=l.useState(""),[i,d]=l.useState(null),[u,z]=l.useState(!1),[G,W]=l.useState(null),K=D=>{if(!D.destination)return;const _=Array.from(h),[Y]=_.splice(D.source.index,1);_.splice(D.destination.index,0,Y),o(_)},L=()=>{d(-1),N(""),$(!0)},y=D=>{d(D),N(h[D].name),$(!0)},g=()=>{if(i===-1){const D=A(k);o(_=>[..._,D]),b(_=>({..._,[D.id]:[]})),j||v(D.id)}else if(i!==null){const D=h[i].id;o(_=>_.map((Y,B)=>B===i?{...Y,name:k}:Y)),j===D&&v(D)}$(!1)},I=()=>{$(!1)},O=D=>{W(D),z(!0)},Q=()=>{var D;if(G!==null){const _=G,Y=h[_];let B=[];b(C=>{B=C[Y.id]||[];const H={...C};return delete H[Y.id],H});const Z=j,m=h.filter((C,H)=>H!==_);o(m),j===Y.id&&v(((D=m[0])==null?void 0:D.id)||""),M("チームを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{o(C=>{const H=[...C];return H.splice(_,0,Y),H}),b(C=>({...C,[Y.id]:B})),v(Z)},autoHideDuration:5e3})}z(!1),W(null)},J=()=>{z(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(f,{onClick:L,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(We,{component:we,storageKey:"teams-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsx(Ue,{onDragEnd:K,children:e.jsxs(Ae,{size:"small",children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:D=>D.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"チーム名"}),e.jsx(a,{})]})}),e.jsx(Be,{droppableId:"teams",children:D=>e.jsxs(Ne,{ref:D.innerRef,...D.droppableProps,children:[h.map((_,Y)=>e.jsx(Ve,{draggableId:_.id,index:Y,children:B=>e.jsxs(re,{ref:B.innerRef,...B.draggableProps,style:B.draggableProps.style,onClick:()=>y(Y),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",onClick:Z=>Z.stopPropagation(),children:e.jsx(c,{onClick:Z=>Z.stopPropagation(),...B.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",touchAction:"none",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{})})}),e.jsx(a,{children:_.name}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:Z=>Z.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:"small",onClick:()=>O(Y),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},_.id)),D.placeholder]})})]})})})]}),e.jsxs(Fe,{open:U,onClose:I,children:[e.jsxs(ie,{children:["チーム名",i===-1?"追加":"編集"]}),e.jsx(oe,{sx:{mt:2},children:e.jsx(se,{label:"チーム名",value:k,onChange:D=>N(D.target.value),fullWidth:!0,margin:"dense"})}),e.jsxs(ce,{children:[e.jsx(f,{onClick:I,startIcon:e.jsx(de,{}),color:"inherit",sx:{color:{xs:"black",md:"inherit"}},children:"キャンセル"}),e.jsx(f,{onClick:g,disabled:k.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:u,onClose:J,children:[e.jsx(ie,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このチームを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:J,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:Q,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}const Fn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function Un({teams:h,members:o,setMembers:b,selectedTeam:j,setSelectedTeam:v,showSnackbar:A}){const[M,U]=l.useState(null),[$,k]=l.useState(""),[N,i]=l.useState(""),[d,u]=l.useState([]),[z,G]=l.useState(!0),[W,K]=l.useState(!1),[L,y]=l.useState(null),[g,I]=l.useState(!1),O=m=>{if(!m.destination||!j)return;const C=Array.from(o[j]||[]),[H]=C.splice(m.source.index,1);C.splice(m.destination.index,0,H),b(X=>({...X,[j]:C}))},Q=()=>{U(-1),k(""),i(""),u([]),G(!0),K(!0)},J=m=>{U(m);const C=o[j][m];k(String(C.no)),i(C.name),u(C.positions||[]),G(C.visible!==!1),K(!0)},D=()=>{j&&(M===-1?b(m=>({...m,[j]:[...m[j]||[],{id:Fn(),no:Number($),name:N,positions:d,visible:z}]})):M!==null&&b(m=>({...m,[j]:m[j].map((C,H)=>H===M?{...C,no:Number($),name:N,positions:d,visible:z}:C)})),K(!1))},_=()=>{K(!1)},Y=m=>{y(m),I(!0)},B=()=>{if(j&&L!==null){const m=L;let C;b(H=>{const X=[...H[j]||[]];C=X[m];const ee=X.filter((he,ue)=>ue!==m);return{...H,[j]:ee}}),A("メンバーを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{C&&b(H=>{const X=[...H[j]||[]];return X.splice(m,0,C),{...H,[j]:X}})},autoHideDuration:5e3})}I(!1),y(null)},Z=()=>{I(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(pe,{fullWidth:!0,margin:"dense",sx:{mb:1},children:[e.jsx(ve,{id:"team-select-label",children:"チーム"}),e.jsx(fe,{labelId:"team-select-label",value:j,label:"チーム",onChange:m=>v(m.target.value),children:h.map(m=>e.jsx(F,{value:m.id,children:m.name},m.id))})]})}),e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(f,{onClick:Q,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(We,{component:we,storageKey:"members-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Ae,{size:"small",children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:m=>m.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"番号"}),e.jsx(a,{children:"名前"}),e.jsx(a,{children:"ポジション"}),e.jsx(a,{children:"表示"}),e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:O,children:e.jsx(Be,{droppableId:"members",children:m=>{var C;return e.jsxs(Ne,{ref:m.innerRef,...m.droppableProps,children:[(C=o[j])==null?void 0:C.map((H,X)=>e.jsx(Ve,{draggableId:H.id,index:X,children:ee=>e.jsxs(re,{ref:ee.innerRef,...ee.draggableProps,"data-index":X,onClick:()=>J(X),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:he=>he.stopPropagation(),...ee.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{})})}),e.jsx(a,{children:H.no}),e.jsx(a,{children:H.name}),e.jsx(a,{children:(H.positions||[]).join(", ")}),e.jsx(a,{children:H.visible===!1?e.jsx(Je,{}):e.jsx(qe,{})}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:he=>he.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:"small",onClick:()=>Y(X),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},H.id)),m.placeholder]})}})})]})})]}),e.jsxs(Fe,{open:W,onClose:_,children:[e.jsxs(ie,{children:["メンバー",M===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[e.jsx(se,{label:"番号",type:"number",value:$,onChange:m=>k(m.target.value),margin:"dense"}),e.jsx(se,{label:"名前",value:N,onChange:m=>i(m.target.value),margin:"dense"}),e.jsxs(pe,{children:[e.jsx(ve,{id:"positions-label",children:"ポジション"}),e.jsxs(fe,{labelId:"positions-label",multiple:!0,value:d,label:"ポジション",onChange:m=>u(typeof m.target.value=="string"?m.target.value.split(","):m.target.value),renderValue:m=>m.join(", "),children:[e.jsx(F,{value:"レフト",children:"レフト"}),e.jsx(F,{value:"センター",children:"センター"}),e.jsx(F,{value:"ライト",children:"ライト"}),e.jsx(F,{value:"セッター",children:"セッター"}),e.jsx(F,{value:"リベロ",children:"リベロ"})]})]}),e.jsxs(ot,{value:z?"visible":"hidden",exclusive:!0,onChange:(m,C)=>C&&G(C==="visible"),sx:{display:"flex"},children:[e.jsxs(De,{value:"visible",sx:{flex:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(qe,{sx:{mr:1}}),"表示"]}),e.jsxs(De,{value:"hidden",sx:{flex:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(Je,{sx:{mr:1}}),"非表示"]})]})]}),e.jsxs(ce,{children:[e.jsx(f,{onClick:_,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:D,disabled:$==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:g,onClose:Z,children:[e.jsx(ie,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このメンバーを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:Z,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:B,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}const gl=!1;function Bn({openAddPlayDialog:h,playCategories:o,setPlayCategories:b,openEditPlayDialog:j,scoreInput:v,renderIcon:A,rallyCategoryTags:M,handlePlayDelete:U,openAddDetailDialog:$,playDetails:k,setPlayDetails:N,openEditDetailDialog:i,theme:d,rallyDetailTags:u,handleDetailDelete:z}){const G=y=>{if(!y.destination)return;const g=Array.from(o),[I]=g.splice(y.source.index,1);g.splice(y.destination.index,0,I),b(g)},W=xl.useMemo(()=>{const y=[];return o.forEach(g=>{k.forEach((I,O)=>{I.playCategoryId===g.id&&y.push(O)})}),y},[o,k]),K=y=>{if(!y.destination)return;const g=W[y.source.index],I=W[y.destination.index],O=Array.from(k),[Q]=O.splice(g,1);O.splice(I>g?I-1:I,0,Q),N(O)};let L=0;return e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(f,{onClick:h,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(We,{component:we,storageKey:"play-category-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Ae,{size:"small",sx:{minWidth:600},children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:y=>y.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{sx:{width:48}}),e.jsx(a,{children:"プレー区分"}),gl,v.showRallyIcons&&e.jsx(a,{children:"アイコン"}),e.jsx(a,{children:"タグ"}),e.jsx(a,{children:"表示"}),e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:G,children:e.jsx(Be,{droppableId:"play-categories",children:y=>e.jsxs(Ne,{ref:y.innerRef,...y.droppableProps,children:[o.map((g,I)=>e.jsx(Ve,{draggableId:g.id,index:I,children:O=>e.jsxs(re,{ref:O.innerRef,...O.draggableProps,"data-index":I,onClick:()=>j(I),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",sx:{width:48},children:e.jsx(c,{onClick:Q=>Q.stopPropagation(),...O.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{})})}),e.jsx(a,{children:e.jsx(me,{label:g.name,size:"small",variant:"outlined",sx:{backgroundColor:"transparent",borderColor:g.color,color:g.color}})}),gl,v.showRallyIcons&&e.jsx(a,{children:A(g)}),e.jsx(a,{children:(g.tags||[]).map(Q=>{const J=M.find(_=>_.id===Q),D=(J==null?void 0:J.color)||le;return e.jsx(me,{label:(J==null?void 0:J.name)||Q,size:"small",sx:{mr:.5,mb:.5,backgroundColor:D,color:"#fff"}},Q)})}),e.jsx(a,{children:g.visible===!1?e.jsx(Je,{}):e.jsx(qe,{})}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:Q=>Q.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:"small",onClick:g.id==="init-serve"?void 0:()=>U(I),disabled:g.id==="init-serve",sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:g.id==="init-serve"?"disabled":"error"})})})})]})},g.id)),y.placeholder]})})})]})}),e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1,mt:2},children:e.jsx(f,{onClick:$,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(We,{component:we,storageKey:"play-detail-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Ae,{size:"small",children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:y=>y.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"プレー詳細"}),e.jsx(a,{children:"得点区分"}),e.jsx(a,{children:"得失点単位区分"}),e.jsx(a,{children:"タグ"}),e.jsx(a,{children:"表示"}),e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:K,children:e.jsx(Be,{droppableId:"play-details",children:y=>e.jsxs(Ne,{ref:y.innerRef,...y.droppableProps,children:[o.map(g=>e.jsxs(xl.Fragment,{children:[e.jsx(re,{sx:{backgroundColor:I=>I.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:e.jsx(a,{colSpan:7,children:g.name})}),k.map((I,O)=>({d:I,i:O})).filter(({d:I})=>I.playCategoryId===g.id).map(({d:I,i:O})=>{const Q=L++;return e.jsx(Ve,{draggableId:I.id,index:Q,children:J=>e.jsxs(re,{ref:J.innerRef,...J.draggableProps,"data-index":O,onClick:()=>i(O),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:D=>D.stopPropagation(),...J.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{})})}),e.jsx(a,{children:e.jsx(me,{label:I.name,size:"small",sx:{backgroundColor:I.pointType==="得点"?d.scoreColor:d.lossColor,border:`1px solid ${I.pointType==="得点"?d.scoreColor:d.lossColor}`,color:"#fff"}})}),e.jsx(a,{children:I.pointType}),e.jsx(a,{children:I.pointUnitType}),e.jsx(a,{children:(I.tags||[]).map(D=>{const _=u.find(B=>B.id===D),Y=(_==null?void 0:_.color)||le;return e.jsx(me,{label:(_==null?void 0:_.name)||D,size:"small",sx:{mr:.5,mb:.5,backgroundColor:Y,color:"#fff"}},D)})}),e.jsx(a,{children:I.visible===!1?e.jsx(Je,{}):e.jsx(qe,{})}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:D=>D.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:"small",onClick:()=>z(O),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},I.id)})]},g.id)),y.placeholder]})})})]})})]})}const jl=!1,pl=!1,fl=!1;function Vn({tags:h,setTags:o,rallyCategoryTags:b,setRallyCategoryTags:j,rallyDetailTags:v,setRallyDetailTags:A,setMatches:M,setPlayCategories:U,setPlayDetails:$,showSnackbar:k}){const[N,i]=l.useState(null),[d,u]=l.useState(""),[z,G]=l.useState(le),[W,K]=l.useState(!1),[L,y]=l.useState(null),[g,I]=l.useState(!1),[O,Q]=l.useState(null),[J,D]=l.useState(""),[_,Y]=l.useState(le),[B,Z]=l.useState(!1),[m,C]=l.useState(null),[H,X]=l.useState(!1),[ee,he]=l.useState(null),[ue,ae]=l.useState(""),[te,ge]=l.useState(le),[je,t]=l.useState(!1),[s,x]=l.useState(null),[R,E]=l.useState(!1),w=r=>{if(!r.destination)return;const S=Array.from(h),[P]=S.splice(r.source.index,1);S.splice(r.destination.index,0,P),o(S)},Re=r=>{if(!r.destination)return;const S=Array.from(b),[P]=S.splice(r.source.index,1);S.splice(r.destination.index,0,P),j(S)},tt=r=>{if(!r.destination)return;const S=Array.from(v),[P]=S.splice(r.source.index,1);S.splice(r.destination.index,0,P),A(S)},lt=()=>{i(-1),u(""),G(le),K(!0)},bt=r=>{i(r),u(h[r].name),G(h[r].color),K(!0)},Ye=()=>{N===-1?o(r=>[...r,{id:crypto.randomUUID(),name:d,color:z}]):N!==null&&o(r=>r.map((S,P)=>P===N?{...S,name:d,color:z}:S)),K(!1)},Xe=()=>{K(!1)},ct=r=>{y(r),I(!0)},yt=()=>{if(L!==null){const r=L,S=h[r];let P=[];o(q=>q.filter((T,Ce)=>Ce!==r)),M(q=>(P=q.map(T=>({...T,tags:[...T.tags]})),q.map(T=>({...T,tags:T.tags.filter(Ce=>Ce!==S.id)})))),k("試合タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{o(q=>{const T=[...q];return T.splice(r,0,S),T}),M(()=>P)},autoHideDuration:5e3})}I(!1),y(null)},Qe=()=>{I(!1)},_e=()=>{Q(-1),D(""),Y(le),Z(!0)},Ee=r=>{Q(r),D(b[r].name),Y(b[r].color),Z(!0)},Ke=()=>{O===-1?j(r=>[...r,{id:crypto.randomUUID(),name:J,color:_}]):O!==null&&j(r=>r.map((S,P)=>P===O?{...S,name:J,color:_}:S)),Z(!1)},dt=()=>{Z(!1)},ze=r=>{C(r),X(!0)},vt=()=>{if(m!==null){const r=m,S=b[r];let P=[];j(q=>q.filter((T,Ce)=>Ce!==r)),U(q=>(P=q.map(T=>({...T,tags:[...T.tags||[]]})),q.map(T=>({...T,tags:(T.tags||[]).filter(Ce=>Ce!==S.id)})))),k("プレー区分タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{j(q=>{const T=[...q];return T.splice(r,0,S),T}),U(()=>P)},autoHideDuration:5e3})}X(!1),C(null)},Ie=()=>{X(!1)},Ct=()=>{he(-1),ae(""),ge(le),t(!0)},Se=r=>{he(r),ae(v[r].name),ge(v[r].color),t(!0)},It=()=>{ee===-1?A(r=>[...r,{id:crypto.randomUUID(),name:ue,color:te}]):ee!==null&&A(r=>r.map((S,P)=>P===ee?{...S,name:ue,color:te}:S)),t(!1)},Pe=()=>{t(!1)},Dt=r=>{x(r),E(!0)},Me=()=>{if(s!==null){const r=s,S=v[r];let P=[];A(q=>q.filter((T,Ce)=>Ce!==r)),$(q=>(P=q.map(T=>({...T,tags:[...T.tags||[]]})),q.map(T=>({...T,tags:(T.tags||[]).filter(Ce=>Ce!==S.id)})))),k("プレー詳細タグを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{A(q=>{const T=[...q];return T.splice(r,0,S),T}),$(()=>P)},autoHideDuration:5e3})}E(!1),x(null)},xt=()=>{E(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsxs(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(c,{sx:{fontWeight:"bold"},children:"試合タグ"}),e.jsx(f,{onClick:lt,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})]}),e.jsx(We,{component:we,storageKey:"match-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Ae,{size:"small",children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:r=>r.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"タグ名称"}),jl,e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:w,children:e.jsx(Be,{droppableId:"match-tags",children:r=>e.jsxs(Ne,{ref:r.innerRef,...r.droppableProps,children:[h.map((S,P)=>e.jsx(Ve,{draggableId:S.id,index:P,children:q=>e.jsxs(re,{ref:q.innerRef,...q.draggableProps,"data-index":P,onClick:()=>bt(P),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),...q.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{})})}),e.jsx(a,{children:e.jsx(me,{label:S.name,size:"small",sx:{backgroundColor:S.color,border:`1px solid ${S.color}`,color:"#fff"}})}),jl,e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:"small",onClick:()=>ct(P),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},S.id)),r.placeholder]})})})]})}),e.jsxs(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,mt:2},children:[e.jsx(c,{sx:{fontWeight:"bold"},children:"プレー区分タグ"}),e.jsx(f,{onClick:_e,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})]}),e.jsx(We,{component:we,storageKey:"play-category-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Ae,{size:"small",children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:r=>r.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"タグ名称"}),pl,e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:Re,children:e.jsx(Be,{droppableId:"rally-category-tags",children:r=>e.jsxs(Ne,{ref:r.innerRef,...r.droppableProps,children:[b.map((S,P)=>e.jsx(Ve,{draggableId:S.id,index:P,children:q=>e.jsxs(re,{ref:q.innerRef,...q.draggableProps,"data-index":P,onClick:()=>Ee(P),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),...q.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{})})}),e.jsx(a,{children:e.jsx(me,{label:S.name,size:"small",sx:{backgroundColor:S.color,border:`1px solid ${S.color}`,color:"#fff"}})}),pl,e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:"small",onClick:()=>ze(P),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},S.id)),r.placeholder]})})})]})}),e.jsxs(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,mt:2},children:[e.jsx(c,{sx:{fontWeight:"bold"},children:"プレー詳細タグ"}),e.jsx(f,{onClick:Ct,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})]}),e.jsx(We,{component:we,storageKey:"play-detail-tag-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Ae,{size:"small",children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:r=>r.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"タグ名称"}),fl,e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:tt,children:e.jsx(Be,{droppableId:"rally-detail-tags",children:r=>e.jsxs(Ne,{ref:r.innerRef,...r.droppableProps,children:[v.map((S,P)=>e.jsx(Ve,{draggableId:S.id,index:P,children:q=>e.jsxs(re,{ref:q.innerRef,...q.draggableProps,"data-index":P,onClick:()=>Se(P),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),...q.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{})})}),e.jsx(a,{children:e.jsx(me,{label:S.name,size:"small",sx:{backgroundColor:S.color,border:`1px solid ${S.color}`,color:"#fff"}})}),fl,e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:T=>T.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:"small",onClick:()=>Dt(P),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},S.id)),r.placeholder]})})})]})})]}),e.jsxs(Fe,{open:W,onClose:Xe,children:[e.jsxs(ie,{children:["タグ",N===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{mt:2},children:[e.jsx(se,{label:"タグ名称",value:d,onChange:r=>u(r.target.value),fullWidth:!0,margin:"dense"}),e.jsx(se,{label:"色",type:"color",value:z,onChange:r=>G(r.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(ce,{children:[e.jsx(f,{onClick:Xe,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:Ye,disabled:d.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:g,onClose:Qe,children:[e.jsx(ie,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このタグを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:Qe,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:yt,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Fe,{open:B,onClose:dt,children:[e.jsxs(ie,{children:["タグ",O===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{mt:2},children:[e.jsx(se,{label:"タグ名称",value:J,onChange:r=>D(r.target.value),fullWidth:!0,margin:"dense"}),e.jsx(se,{label:"色",type:"color",value:_,onChange:r=>Y(r.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(ce,{children:[e.jsx(f,{onClick:dt,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:Ke,disabled:J.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:H,onClose:Ie,children:[e.jsx(ie,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このタグを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:Ie,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:vt,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Fe,{open:je,onClose:Pe,children:[e.jsxs(ie,{children:["タグ",ee===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{mt:2},children:[e.jsx(se,{label:"タグ名称",value:ue,onChange:r=>ae(r.target.value),fullWidth:!0,margin:"dense"}),e.jsx(se,{label:"色",type:"color",value:te,onChange:r=>ge(r.target.value),fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},sx:{mt:2}})]}),e.jsxs(ce,{children:[e.jsx(f,{onClick:Pe,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:It,disabled:ue.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:R,onClose:xt,children:[e.jsx(ie,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このタグを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:xt,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:Me,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}const Gn=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function Kn({statsSettings:h,setStatsSettings:o,playCategories:b,playDetails:j,rallyCategoryTags:v,rallyDetailTags:A,showSnackbar:M}){const[U,$]=l.useState(null),[k,N]=l.useState(""),[i,d]=l.useState(""),[u,z]=l.useState([]),[G,W]=l.useState([]),[K,L]=l.useState(""),[y,g]=l.useState(""),[I,O]=l.useState("合算"),[Q,J]=l.useState(!1),[D,_]=l.useState(null),[Y,B]=l.useState(!1),Z=t=>{if(!t.destination)return;const s=Array.from(h),[x]=s.splice(t.source.index,1);s.splice(t.destination.index,0,x),o(s)},m=sn("md"),C=t=>{var s;return((s=b.find(x=>x.id===t))==null?void 0:s.name)||""},H=t=>{var s;return((s=j.find(x=>x.id===t))==null?void 0:s.name)||""},X=()=>{$(-1),N(""),d(""),z([]),W([]),L(""),g(""),O("合算"),J(!0)},ee=t=>{const s=h[t];$(t),N(s.playCategoryId||""),d(s.playDetailId||""),z(s.playCategoryTags||[]),W(s.playDetailTags||[]),L(s.pointType||""),g(s.pointUnitType||""),O(s.aggregateType||"合算"),J(!0)},he=()=>{const t=k!=="",s=i!=="",x=u.length>0,R=G.length>0,E=K!=="",w=y!=="";return t&&!s&&!x&&!R&&!E&&!w||t&&s&&!x&&!R&&!E&&!w||t&&!s&&!x&&!R&&E&&!w||t&&!s&&!x&&!R&&!E&&w||t&&!s&&!x&&!R&&E&&w||!t&&!s&&!x&&!R&&E&&!w||!t&&!s&&!x&&!R&&E&&w||!t&&!s&&!x&&!R&&!E&&w||x&&!t&&!s&&!R&&!E&&!w||x&&R&&!t&&!s&&!E&&!w||x&&R&&!t&&!s&&E&&!w||x&&R&&!t&&!s&&!E&&w||x&&R&&!t&&!s&&E&&w||x&&!t&&!s&&E&&!w||x&&!t&&!s&&!E&&w||x&&!t&&!s&&E&&w||R&&!t&&!s&&!x&&!E&&!w||R&&!t&&!s&&!x&&E&&!w||R&&!t&&!s&&!x&&!E&&w||R&&!t&&!s&&!x&&E&&w},ue=()=>{const t={id:U===-1?Gn():h[U].id,playCategoryId:k||void 0,playDetailId:i||void 0,playCategoryTags:k===""&&u.length>0?u:void 0,playDetailTags:i===""&&G.length>0?G:void 0,pointType:i?void 0:K||void 0,pointUnitType:i?void 0:y||void 0,aggregateType:I};U===-1?o(s=>[...s,t]):U!==null&&o(s=>s.map((x,R)=>R===U?t:x)),J(!1)},ae=()=>{J(!1)},te=t=>{_(t),B(!0)},ge=()=>{if(D!==null){const t=D,s=h[t];o(x=>x.filter((R,E)=>E!==t)),M("スタッツを削除しました","success",{actionLabel:"元に戻す",onAction:()=>{o(x=>{const R=[...x];return R.splice(t,0,s),R})},autoHideDuration:5e3})}B(!1),_(null)},je=()=>{B(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto",display:"flex",justifyContent:"flex-end",mb:1},children:e.jsx(f,{onClick:X,variant:"contained",size:"small",startIcon:e.jsx(He,{}),children:"追加"})}),e.jsx(We,{component:we,storageKey:"stats-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Ae,{size:"small",children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:t=>t.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{}),e.jsx(a,{children:"プレー区分"}),e.jsx(a,{children:"プレー詳細"}),e.jsx(a,{children:"得点区分"}),e.jsx(a,{children:"得失点単位区分"}),e.jsx(a,{children:"集計方法"}),e.jsx(a,{})]})}),e.jsx(Ue,{onDragEnd:Z,children:e.jsx(Be,{droppableId:"stats-settings",children:t=>e.jsxs(Ne,{ref:t.innerRef,...t.droppableProps,children:[h.map((s,x)=>e.jsx(Ve,{draggableId:s.id,index:x,children:R=>e.jsxs(re,{ref:R.innerRef,...R.draggableProps,"data-index":x,onClick:()=>ee(x),sx:{cursor:"pointer",height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:E=>E.stopPropagation(),...R.dragHandleProps,sx:{cursor:"grab",display:"inline-flex",width:32,height:32,alignItems:"center",justifyContent:"center"},children:e.jsx(Ge,{})})}),e.jsx(a,{children:s.playCategoryId?C(s.playCategoryId):s.playCategoryTags&&s.playCategoryTags.length>0?e.jsx(c,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.playCategoryTags.map(E=>{const w=v.find(Re=>Re.id===E);return e.jsx(me,{label:(w==null?void 0:w.name)||E,size:"small",sx:{backgroundColor:(w==null?void 0:w.color)||le,color:"#fff"}},E)})}):""}),e.jsx(a,{children:s.playDetailId?H(s.playDetailId):s.playDetailTags&&s.playDetailTags.length>0?e.jsx(c,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.playDetailTags.map(E=>{const w=A.find(Re=>Re.id===E);return e.jsx(me,{label:(w==null?void 0:w.name)||E,size:"small",sx:{backgroundColor:(w==null?void 0:w.color)||le,color:"#fff"}},E)})}):""}),e.jsx(a,{children:s.pointType||""}),e.jsx(a,{children:s.pointUnitType||""}),e.jsx(a,{children:s.aggregateType||"合算"}),e.jsx(a,{padding:"checkbox",children:e.jsx(c,{onClick:E=>E.stopPropagation(),sx:{width:32,height:32,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:"small",onClick:()=>te(x),sx:{width:24,height:24},children:e.jsx(Le,{fontSize:"small",color:"error"})})})})]})},s.id)),t.placeholder]})})})]})})]}),e.jsxs(Fe,{open:Q,onClose:ae,children:[e.jsxs(ie,{children:["スタッツ設定",U===-1?"追加":"編集"]}),e.jsx(oe,{sx:{display:"flex",flexDirection:"column",gap:2},children:m?e.jsxs(e.Fragment,{children:[e.jsxs(pe,{fullWidth:!0,sx:{mt:3},children:[e.jsx(ve,{id:"stat-category-label",children:"プレー区分"}),e.jsxs(fe,{labelId:"stat-category-label",value:k,label:"プレー区分",onChange:t=>{N(t.target.value),d(""),z([]),W([])},disabled:u.length>0||G.length>0,children:[e.jsx(F,{value:"",children:"なし"}),b.map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))]})]}),e.jsxs(pe,{fullWidth:!0,sx:{mt:1},children:[e.jsx(ve,{id:"stat-detail-label",children:"プレー詳細"}),e.jsxs(fe,{labelId:"stat-detail-label",value:i,label:"プレー詳細",onChange:t=>{d(t.target.value),L(""),g(""),z([]),W([])},disabled:K!==""||y!==""||u.length>0||G.length>0,children:[e.jsx(F,{value:"",children:"なし"}),j.filter(t=>t.playCategoryId===k).map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))]})]}),e.jsx(Ze,{multiple:!0,options:v,getOptionLabel:t=>t.name,value:v.filter(t=>u.includes(t.id)),onChange:(t,s)=>{z(s.map(x=>x.id)),s.length>0&&(N(""),d(""))},disabled:k!==""||i!=="",renderTags:(t,s)=>t.map((x,R)=>e.jsx(me,{...s({index:R}),label:x.name,size:"small",sx:{backgroundColor:x.color||le,color:"#fff"}})),renderInput:t=>e.jsx(se,{...t,label:"プレー区分タグ",margin:"dense"}),fullWidth:!0}),e.jsx(Ze,{multiple:!0,options:A,getOptionLabel:t=>t.name,value:A.filter(t=>G.includes(t.id)),onChange:(t,s)=>{W(s.map(x=>x.id)),s.length>0&&(N(""),d(""))},disabled:k!==""||i!=="",renderTags:(t,s)=>t.map((x,R)=>e.jsx(me,{...s({index:R}),label:x.name,size:"small",sx:{backgroundColor:x.color||le,color:"#fff"}})),renderInput:t=>e.jsx(se,{...t,label:"プレー詳細タグ",margin:"dense"}),fullWidth:!0}),e.jsxs(pe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-point-label",children:"得点区分"}),e.jsxs(fe,{labelId:"stat-point-label",value:K,label:"得点区分",onChange:t=>{L(t.target.value),t.target.value!==""&&d("")},disabled:i!=="",children:[e.jsx(F,{value:"",children:"なし"}),e.jsx(F,{value:"得点",children:"得点"}),e.jsx(F,{value:"失点",children:"失点"})]})]}),e.jsxs(pe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-unit-label",children:"得失点単位区分"}),e.jsxs(fe,{labelId:"stat-unit-label",value:y,label:"得失点単位区分",onChange:t=>{g(t.target.value),t.target.value!==""&&d("")},disabled:i!=="",children:[e.jsx(F,{value:"",children:"なし"}),e.jsx(F,{value:"メンバー",children:"メンバー"}),e.jsx(F,{value:"チーム",children:"チーム"})]})]}),e.jsxs(pe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-aggregate-label",children:"集計方法"}),e.jsxs(fe,{labelId:"stat-aggregate-label",value:I,label:"集計方法",onChange:t=>O(t.target.value),children:[e.jsx(F,{value:"合算",children:"合算"}),e.jsx(F,{value:"セット平均",children:"セット平均"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{display:"flex",gap:2,mt:3},children:[e.jsxs(pe,{fullWidth:!0,sx:{mt:1},children:[e.jsx(ve,{id:"stat-category-label",children:"プレー区分"}),e.jsxs(fe,{labelId:"stat-category-label",value:k,label:"プレー区分",onChange:t=>{N(t.target.value),d(""),z([]),W([])},disabled:u.length>0||G.length>0,children:[e.jsx(F,{value:"",children:"なし"}),b.map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))]})]}),e.jsx(Ze,{multiple:!0,options:v,getOptionLabel:t=>t.name,value:v.filter(t=>u.includes(t.id)),onChange:(t,s)=>{z(s.map(x=>x.id)),s.length>0&&(N(""),d(""))},disabled:k!==""||i!=="",renderTags:(t,s)=>t.map((x,R)=>e.jsx(me,{...s({index:R}),label:x.name,size:"small",sx:{backgroundColor:x.color||le,color:"#fff"}})),renderInput:t=>e.jsx(se,{...t,label:"プレー区分タグ",margin:"dense"}),fullWidth:!0})]}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsxs(pe,{fullWidth:!0,sx:{mt:1},children:[e.jsx(ve,{id:"stat-detail-label",children:"プレー詳細"}),e.jsxs(fe,{labelId:"stat-detail-label",value:i,label:"プレー詳細",onChange:t=>{d(t.target.value),L(""),g(""),z([]),W([])},disabled:K!==""||y!==""||u.length>0||G.length>0,children:[e.jsx(F,{value:"",children:"なし"}),j.filter(t=>t.playCategoryId===k).map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))]})]}),e.jsx(Ze,{multiple:!0,options:A,getOptionLabel:t=>t.name,value:A.filter(t=>G.includes(t.id)),onChange:(t,s)=>{W(s.map(x=>x.id)),s.length>0&&(N(""),d(""))},disabled:k!==""||i!=="",renderTags:(t,s)=>t.map((x,R)=>e.jsx(me,{...s({index:R}),label:x.name,size:"small",sx:{backgroundColor:x.color||le,color:"#fff"}})),renderInput:t=>e.jsx(se,{...t,label:"プレー詳細タグ",margin:"dense"}),fullWidth:!0})]}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsxs(pe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-point-label",children:"得点区分"}),e.jsxs(fe,{labelId:"stat-point-label",value:K,label:"得点区分",onChange:t=>{L(t.target.value),t.target.value!==""&&d("")},disabled:i!=="",children:[e.jsx(F,{value:"",children:"なし"}),e.jsx(F,{value:"得点",children:"得点"}),e.jsx(F,{value:"失点",children:"失点"})]})]}),e.jsxs(pe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-unit-label",children:"得失点単位区分"}),e.jsxs(fe,{labelId:"stat-unit-label",value:y,label:"得失点単位区分",onChange:t=>{g(t.target.value),t.target.value!==""&&d("")},disabled:i!=="",children:[e.jsx(F,{value:"",children:"なし"}),e.jsx(F,{value:"メンバー",children:"メンバー"}),e.jsx(F,{value:"チーム",children:"チーム"})]})]})]}),e.jsxs(pe,{fullWidth:!0,children:[e.jsx(ve,{id:"stat-aggregate-label",children:"集計方法"}),e.jsxs(fe,{labelId:"stat-aggregate-label",value:I,label:"集計方法",onChange:t=>O(t.target.value),children:[e.jsx(F,{value:"合算",children:"合算"}),e.jsx(F,{value:"セット平均",children:"セット平均"})]})]})]})}),e.jsxs(ce,{children:[e.jsx(f,{onClick:ae,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(f,{onClick:ue,disabled:!he(),startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:Y,onClose:je,children:[e.jsx(ie,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"このスタッツ設定を削除しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:je,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(f,{onClick:ge,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}const qn={mode:"light",appBarColor:"#F5F5F5",appBarTextColor:"#000000",buttonColor:"#1C8139",scoreColor:"#1C8139",lossColor:"#D21972"},Jn={mode:"light",appBarColor:"#F2EDE3",appBarTextColor:"#000000",buttonColor:"#48A588",scoreColor:"#48A588",lossColor:"#CE5164"},Yn={mode:"dark",appBarColor:"#333333",appBarTextColor:"#FFFFFF",buttonColor:"#90CAF9",scoreColor:"#90CAF9",lossColor:"#F48FB1"},Xn={mode:"dark",appBarColor:"#121212",appBarTextColor:"#FFFFFF",buttonColor:"#BB86FC",scoreColor:"#419552",lossColor:"#C77584"};function Qn({theme:h,onThemeChange:o}){return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1,maxWidth:1024,width:"100%",mx:"auto"},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{sx:{mr:2},children:"アプリカラー"}),e.jsx("input",{type:"color",value:h.appBarColor,onChange:b=>o({...h,appBarColor:b.target.value}),title:"背景色"}),e.jsx("input",{type:"color",value:h.appBarTextColor,onChange:b=>o({...h,appBarTextColor:b.target.value}),title:"文字色",style:{marginLeft:8}})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{sx:{mr:2},children:"ボタンカラー"}),e.jsx("input",{type:"color",value:h.buttonColor,onChange:b=>o({...h,buttonColor:b.target.value})})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{sx:{mr:2},children:"得点カラー"}),e.jsx("input",{type:"color",value:h.scoreColor,onChange:b=>o({...h,scoreColor:b.target.value})})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{sx:{mr:2},children:"失点カラー"}),e.jsx("input",{type:"color",value:h.lossColor,onChange:b=>o({...h,lossColor:b.target.value})})]}),e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(f,{variant:"contained",onClick:()=>o({...qn}),startIcon:e.jsx(et,{}),children:"ライトモード１"}),e.jsx(f,{variant:"contained",onClick:()=>o({...Jn}),startIcon:e.jsx(et,{}),children:"ライトモード２"}),e.jsx(f,{variant:"contained",onClick:()=>o({...Yn}),startIcon:e.jsx(et,{}),children:"ダークモード１"}),e.jsx(f,{variant:"contained",onClick:()=>o({...Xn}),startIcon:e.jsx(et,{}),children:"ダークモード２"})]})]})}var Yt={},Zn=be;Object.defineProperty(Yt,"__esModule",{value:!0});var _l=Yt.default=void 0,es=Zn(ye()),ts=e;_l=Yt.default=(0,es.default)((0,ts.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay");function ls({scoreInput:h,onScoreInputChange:o,dashboardVisible:b,onDashboardVisibleChange:j,showSnackbar:v}){const[A,M]=l.useState(!1),U=()=>{try{const i=[];for(let d=0;d<localStorage.length;d++){const u=localStorage.key(d);u&&u.startsWith("tutorial-")&&i.push(u)}i.forEach(d=>localStorage.removeItem(d)),v("ガイド表示済み状態をクリアしました","success")}catch(i){console.error(i),v("ガイド表示済み状態のクリアに失敗しました","error")}},$=()=>M(!0),k=()=>M(!1),N=()=>{M(!1),U()};return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",mt:1,maxWidth:1024,width:"100%",mx:"auto"},children:[e.jsx(at,{control:e.jsx(rt,{checked:h.rallyMemberRequired,onChange:i=>o({...h,rallyMemberRequired:i.target.checked})}),label:"ラリー結果メンバー選択必須",sx:{mb:1}}),e.jsx(at,{control:e.jsx(rt,{checked:h.showRallyIcons,onChange:i=>o({...h,showRallyIcons:i.target.checked})}),label:"ラリー結果アイコン表示",sx:{mb:1}}),e.jsx(at,{control:e.jsx(rt,{checked:h.showScoreProgressArea,onChange:i=>o({...h,showScoreProgressArea:i.target.checked})}),label:"得点推移エリア表示",sx:{mb:1}}),e.jsx(at,{control:e.jsx(rt,{checked:h.showGridScrollHint,onChange:i=>o({...h,showGridScrollHint:i.target.checked})}),label:"グリッド横スクロール表記表示",sx:{mb:1}}),e.jsx(at,{control:e.jsx(rt,{checked:b,onChange:i=>j(i.target.checked)}),label:"ダッシュボード表示",sx:{mb:1,display:"none"}}),e.jsx(c,{sx:{mt:2,fontWeight:"bold"},children:"ガイド"}),e.jsx(f,{variant:"contained",startIcon:e.jsx(_l,{}),onClick:$,sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},alignSelf:"flex-start"},children:"ガイド再表示"}),e.jsxs(ke,{open:A,onClose:k,children:[e.jsx(ie,{children:"確認"}),e.jsx(oe,{sx:{mt:2},children:"ガイドを再表示しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:k,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:N,startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}var Xt={},ns=be;Object.defineProperty(Xt,"__esModule",{value:!0});var Tl=Xt.default=void 0,ss=ns(ye()),as=e;Tl=Xt.default=(0,ss.default)((0,as.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");function rs({teams:h,matches:o,tags:b,matchLocks:j,setMatchLocks:v,lockGroupBy:A,setLockGroupBy:M,isMobile:U}){return e.jsxs(c,{children:[e.jsx(c,{sx:{maxWidth:1024,mx:"auto"},children:U?e.jsx(pe,{size:"small",sx:{mb:1},children:e.jsxs(fe,{value:A,onChange:$=>M($.target.value),children:[e.jsx(F,{value:"none",children:"グルーピングなし"}),e.jsx(F,{value:"dateName",children:"試合日付＋試合名"}),e.jsx(F,{value:"card",children:"対戦カード"})]})}):e.jsxs(ot,{exclusive:!0,value:A,onChange:($,k)=>{k!==null&&M(k)},sx:{mb:1},children:[e.jsx(De,{value:"none",children:"グルーピングなし"}),e.jsx(De,{value:"dateName",children:"試合日付＋試合名"}),e.jsx(De,{value:"card",children:"対戦カード"})]})}),e.jsx(We,{component:we,storageKey:"match-lock-grid",sx:{maxWidth:1024,mx:"auto"},children:e.jsxs(Ae,{size:"small",children:[e.jsx($e,{children:e.jsxs(re,{sx:{backgroundColor:$=>$.palette.mode==="dark"?"#343A42":"#f5f5f5",height:50},children:[e.jsx(a,{padding:"checkbox"}),e.jsx(a,{children:"日付"}),e.jsx(a,{children:"試合名"}),e.jsx(a,{children:"対戦カード"}),e.jsx(a,{children:"タグ"}),e.jsx(a,{children:"セット"})]})}),e.jsx(Ne,{children:function(){const $=d=>{var u;return((u=h.find(z=>z.id===d))==null?void 0:u.name)||""},k=A,N=an(o,k),i=d=>d.map(u=>{const z=u.sets.filter(L=>L.my>L.opponent).length,G=u.sets.filter(L=>L.my<L.opponent).length,W=u.sets.map((L,y)=>{const g=y<u.sets.length-1?", ":"";return`${L.my}-${L.opponent}${g}`}).join(""),K=j[u.id];return e.jsxs(re,{sx:{height:50},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(Te,{size:"small",onClick:()=>v(L=>({...L,[u.id]:!L[u.id]})),children:K?e.jsx(yl,{sx:{color:"#D21972"}}):e.jsx(Tl,{sx:{color:"#1C8139"}})})}),e.jsx(a,{children:u.date}),e.jsx(a,{children:u.matchName}),e.jsx(a,{children:`${$(u.teamA)} - ${$(u.teamB)}`}),e.jsx(a,{children:u.tags.map(L=>{const y=b.find(I=>I.id===L),g=(y==null?void 0:y.color)||le;return e.jsx(me,{label:(y==null?void 0:y.name)||L,size:"small",sx:{mr:.5,mb:.5,backgroundColor:g,color:"#fff"}},L)})}),e.jsxs(a,{children:[z,"-",G," (",W,")"]})]},u.id)});return k==="none"?i(N.all||[]):Object.entries(N).map(([d,u])=>{const z=k==="card"?rn(u[0].teamA,u[0].teamB,h):d;return e.jsxs(l.Fragment,{children:[e.jsx(re,{sx:{height:50},children:e.jsx(a,{colSpan:6,sx:{backgroundColor:G=>G.palette.mode==="dark"?"#343A42":"#f5f5f5",fontWeight:"bold"},children:z})}),i(u)]},d)})}()})]})})]})}var Qt={},is=be;Object.defineProperty(Qt,"__esModule",{value:!0});var Rl=Qt.default=void 0,os=is(ye()),cs=e;Rl=Qt.default=(0,os.default)((0,cs.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen");var Zt={},ds=be;Object.defineProperty(Zt,"__esModule",{value:!0});var Wt=Zt.default=void 0,xs=ds(ye()),hs=e;Wt=Zt.default=(0,xs.default)((0,hs.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload");var el={},us=be;Object.defineProperty(el,"__esModule",{value:!0});var El=el.default=void 0,gs=us(ye()),js=e;El=el.default=(0,gs.default)((0,js.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload");const ps=`[team]
サンプルチーム

[member]
サンプルチーム,1,バレーボーラー

[rally-play-category]
スパイク

[rally-play-detail]
スパイク,イン,得点,メンバー
スパイク,アウト,失点,メンバー
スパイク,アウト,失点,メンバー`,Lt=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36),fs=h=>({id:crypto.randomUUID(),name:h}),ms=h=>({id:Lt(),name:h,color:le,iconType:"none",tags:[],visible:!0});function bs({onDeleteData:h,onImportData:o,onExportData:b,showSnackbar:j,teams:v,setTeams:A,setMembers:M,playCategories:U,setPlayCategories:$,setPlayDetails:k}){const[N,i]=l.useState(!1),[d,u]=l.useState(null),[z,G]=l.useState(!1),[W,K]=l.useState(!1),[L,y]=l.useState(ps),g=()=>{i(!0)},I=async()=>{i(!1);try{await h(),j("全データを削除しました","success")}catch(C){console.error(C),j("全データの削除に失敗しました","error")}},O=()=>{i(!1)},Q=C=>{u(C.target.files&&C.target.files[0]?C.target.files[0]:null)},J=()=>{G(!0)},D=async()=>{G(!1);const C=d;u(null);try{C&&await o(C),j("インポートが完了しました","success")}catch(H){console.error(H),j("インポートに失敗しました","error")}},_=()=>{G(!1)},Y=async()=>{try{await b(),j("エクスポートが完了しました","success")}catch(C){console.error(C),j("エクスポートに失敗しました","error")}},B=()=>{K(!0)},Z=()=>{K(!1);try{const C=L.replace(/\r\n/g,`
`).split(`
`);let H="";const X=[],ee={},he=[],ue=[];for(const ae of C){const te=ae.trim();if(te!==""){if(te.startsWith("[")&&te.endsWith("]")){H=te.toLowerCase();continue}switch(H){case"[team]":X.push(fs(te));break;case"[member]":{const[ge,je,t]=te.split(",").map(s=>s.trim());if(ge&&je&&t){const s=[...v,...X].find(x=>x.name===ge);if(s){const x={id:Lt(),no:Number(je),name:t,positions:[],visible:!0};ee[s.id]||(ee[s.id]=[]),ee[s.id].push(x)}}break}case"[rally-play-category]":he.push(ms(te));break;case"[rally-play-detail]":{const[ge,je,t,s]=te.split(",").map(x=>x.trim());if(ge&&je&&t&&s){const x=[...U,...he].find(R=>R.name===ge);x&&ue.push({id:Lt(),playCategoryId:x.id,name:je,pointType:t,pointUnitType:s,tags:[],visible:!0})}break}default:break}}}X.length&&A(ae=>[...ae,...X]),Object.keys(ee).length&&M(ae=>{const te={...ae};for(const[ge,je]of Object.entries(ee))te[ge]=[...te[ge]||[],...je];return te}),he.length&&$(ae=>[...ae,...he]),ue.length&&k(ae=>[...ae,...ue]),X.length||Object.keys(ee).length||he.length||ue.length?(j("一括登録が完了しました","success"),y("")):j("登録対象のデータがありません","error")}catch(C){console.error(C),j("一括登録に失敗しました","error")}},m=()=>{K(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{maxWidth:1024,mx:"auto",textAlign:"left",display:"flex",flexDirection:"column",gap:1,alignItems:"flex-start"},children:[e.jsx(c,{sx:{fontWeight:"bold"},children:"データエクスポート"}),e.jsx(c,{children:e.jsx(f,{variant:"contained",startIcon:e.jsx(El,{}),onClick:Y,children:"エクスポート"})}),e.jsx(c,{sx:{mt:2,fontWeight:"bold"},children:"データインポート"}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(f,{variant:"outlined",component:"label",startIcon:e.jsx(Rl,{}),children:["ファイル選択",e.jsx("input",{type:"file",accept:".zip",hidden:!0,onChange:Q})]}),e.jsx(f,{variant:"contained",startIcon:e.jsx(Wt,{}),onClick:J,disabled:!d,children:"インポート"})]}),e.jsx(c,{sx:{mt:2,fontWeight:"bold"},children:"一括登録"}),e.jsx(se,{value:L,onChange:C=>y(C.target.value),multiline:!0,minRows:10,fullWidth:!0}),e.jsx(c,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:e.jsx(f,{variant:"contained",startIcon:e.jsx(Wt,{}),onClick:B,children:"一括登録"})}),e.jsx(c,{sx:{mt:2,fontWeight:"bold"},children:"データ削除"}),e.jsx(f,{variant:"contained",color:"error",startIcon:e.jsx(Le,{}),onClick:g,children:"全データ削除"})]}),e.jsxs(ke,{open:N,onClose:O,children:[e.jsx(ie,{children:"削除確認"}),e.jsx(oe,{sx:{mt:2},children:"全データを削除しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:O,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:I,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:z,onClose:_,children:[e.jsx(ie,{children:"確認"}),e.jsx(oe,{sx:{mt:2},children:"データをインポートしますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:_,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:D,disabled:!d,startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:W,onClose:m,children:[e.jsx(ie,{children:"確認"}),e.jsx(oe,{sx:{mt:2},children:"一括登録を実行しますか？"}),e.jsxs(ce,{children:[e.jsx(f,{onClick:m,startIcon:e.jsx(de,{}),color:"inherit",children:"キャンセル"}),e.jsx(f,{onClick:Z,startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}var tl={},ys=be;Object.defineProperty(tl,"__esModule",{value:!0});var Pl=tl.default=void 0,vs=ys(ye()),Cs=e;Pl=tl.default=(0,vs.default)((0,Cs.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const Is=`MIT License

Copyright (c) 2025 shinya_sun_sun

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
`;function Ds(h){if(!h)return"";let o=h.replace(/^git\+/,"");const b=o.match(/^git@github\.com:(.+)$/);b&&(o=`https://github.com/${b[1]}`);const j=o.match(/^git:\/\/github\.com\/(.+)$/);j&&(o=`https://github.com/${j[1]}`);const v=o.match(/^ssh:\/\/git@github\.com\/(.+)$/);return v&&(o=`https://github.com/${v[1]}`),o.startsWith("github.com/")&&(o=`https://${o}`),/^[a-zA-Z]+:\/\//.test(o)||(/^[^/]+\/[^/]+$/.test(o)?o=`https://github.com/${o}`:o=`https://${o}`),o=o.replace(/\.git$/,""),o}function ks(){const[h,o]=l.useState(""),[b,j]=l.useState([]),[v,A]=l.useState(!0),[M,U]=l.useState({}),$={MIT:"https://opensource.org/license/mit/"};l.useEffect(()=>{on(()=>import("./licenses-CYb4Ap75.js"),[]).then(i=>j(i.licenses)).finally(()=>A(!1))},[]);const k=l.useMemo(()=>b.filter(i=>i.name.toLowerCase().includes(h.toLowerCase())),[h,b]),N=async i=>{if(!M[i])try{const d=await fetch(`https://raw.githubusercontent.com/spdx/license-list-data/main/text/${i}.txt`);if(!d.ok)throw new Error("not ok");const u=await d.text();U(z=>({...z,[i]:u}))}catch{U(d=>({...d,[i]:""}))}};return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(ft,{variant:"h6",sx:{mb:1},children:"BreakPoint MIT License"}),e.jsx(c,{component:"pre",sx:{p:1,backgroundColor:i=>i.palette.mode==="dark"?"#343A42":"#f5f5f5",color:i=>i.palette.text.primary,whiteSpace:"pre-wrap",minHeight:128,overflow:"auto"},children:Is}),e.jsx(se,{label:"検索",size:"small",value:h,onChange:i=>o(i.target.value),sx:{my:2}}),e.jsx(c,{sx:{flexGrow:1,overflow:"auto"},children:v?e.jsx(c,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(Yl,{})}):k.map(i=>{const d=i.license;return e.jsxs(Xl,{onChange:(u,z)=>{z&&N(d)},children:[e.jsxs(Ql,{expandIcon:e.jsx(Pl,{}),children:[e.jsx(ft,{sx:{flexGrow:1},children:i.name}),e.jsx(ft,{variant:"body2",sx:{ml:2},children:d})]}),e.jsxs(Zl,{children:[(()=>{const u=Ds(i.url);return u&&e.jsx(Nt,{href:u,target:"_blank",rel:"noopener",sx:{display:"block",mb:1,wordBreak:"break-all"},children:u})})(),i.license.startsWith("CC")&&i.attribution&&e.jsx(ft,{variant:"body2",sx:{mb:1,whiteSpace:"pre-wrap"},children:i.attribution}),M[d]!==void 0&&(M[d]?e.jsx(c,{component:"pre",sx:{p:1,backgroundColor:u=>u.palette.mode==="dark"?"#343A42":"#f5f5f5",color:u=>u.palette.text.primary,whiteSpace:"pre-wrap",maxHeight:300,overflow:"auto"},children:M[d]}):e.jsx(Nt,{href:$[d]||`https://spdx.org/licenses/${d}.html`,target:"_blank",rel:"noopener",sx:{wordBreak:"break-all"},children:$[d]||`https://spdx.org/licenses/${d}.html`}))]})]},i.name)})})]})}const Ss=un.create(c),ml=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36);function bl(h){if(typeof window>"u")return h;try{const b=new DOMParser().parseFromString(h,"image/svg+xml"),j=new Set(["svg","g","path","circle","rect","line","polygon","polyline","text","defs","use"]),v=A=>{[...A.children].forEach(M=>{if(j.has(M.tagName))[...M.attributes].forEach(U=>{U.name.startsWith("on")&&M.removeAttribute(U.name)}),v(M);else{const U=document.createTextNode(M.outerHTML);M.replaceWith(U)}})};return v(b.documentElement),b.documentElement.outerHTML}catch{return""}}function Os({src:h,cropX:o,cropY:b,onChange:j}){const v=l.useRef(null),A=l.useRef(null),[M,U]=l.useState(!1),[$,k]=l.useState({x:0,y:0}),N=()=>v.current?{sx:v.current.clientWidth/v.current.naturalWidth,sy:v.current.clientHeight/v.current.naturalHeight}:{sx:1,sy:1},i=W=>{W.preventDefault(),W.stopPropagation();const K=A.current.getBoundingClientRect();k({x:W.clientX-K.left,y:W.clientY-K.top}),U(!0)},d=W=>{if(!M||!v.current)return;const K=v.current.getBoundingClientRect(),{sx:L,sy:y}=N(),g=W.clientX-K.left-$.x,I=W.clientY-K.top-$.y,O=Math.min(Math.max(0,g/L),v.current.naturalWidth-64),Q=Math.min(Math.max(0,I/y),v.current.naturalHeight-64);j(Math.round(O),Math.round(Q))},u=()=>U(!1),{sx:z,sy:G}=N();return e.jsxs(c,{sx:{position:"relative",display:"inline-block"},onMouseMove:d,onMouseUp:u,onMouseLeave:u,children:[e.jsx("img",{src:h,ref:v,style:{maxWidth:256}}),e.jsx(c,{ref:A,sx:{position:"absolute",left:o*z,top:b*G,width:64,height:64,border:"1px solid red",cursor:"move"},onMouseDown:i})]})}function _s({name:h}){const o=l.useRef(null),[b,j]=l.useState(1);return l.useEffect(()=>{const v=o.current;if(!v)return;const A=v.getBBox().width;j(A>64?64/A:1)},[h]),e.jsx("svg",{width:64,height:64,children:e.jsx("g",{transform:`scale(${b})`,children:e.jsx("text",{ref:o,x:32/b,y:32/b,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,children:h})})})}function $s({matches:h,teams:o,teamMembers:b,playCategories:j,playDetails:v,statsSettings:A,tags:M,rallyCategoryTags:U,rallyDetailTags:$,themeSetting:k,scoreInputSetting:N,onSave:i,onDirtyChange:d,onDeleteData:u,onImportData:z,onExportData:G,showSnackbar:W,dashboardVisible:K,onDashboardVisibleChange:L,setAppBarLeftAction:y}){var dl;const[g,I]=l.useState("teams");l.useEffect(()=>{window.scrollTo(0,0)},[g]);const[O,Q]=l.useState([...o]),[J,D]=l.useState({...b}),[_,Y]=l.useState(((dl=o[0])==null?void 0:dl.id)||""),[B,Z]=l.useState([...j]),[m,C]=l.useState(null),[H,X]=l.useState(""),[ee,he]=l.useState(le),[ue,ae]=l.useState("設定なし"),[te,ge]=l.useState(""),[je,t]=l.useState(""),[s,x]=l.useState(0),[R,E]=l.useState(0),[w,Re]=l.useState([]),[tt,lt]=l.useState(!0),[bt,Ye]=l.useState(!1),[Xe,ct]=l.useState(null),[yt,Qe]=l.useState(!1),[_e,Ee]=l.useState([...v]),[Ke,dt]=l.useState([...A]),[ze,vt]=l.useState([...M]),[Ie,Ct]=l.useState([...U]),[Se,It]=l.useState([...$]),[Pe,Dt]=l.useState({...k}),[Me,xt]=l.useState({...N}),[r,S]=l.useState([...h]),[P,q]=l.useState(()=>{const n={};return h.forEach(p=>{n[p.id]=!!p.locked}),n}),[T,Ce]=l.useState("none"),ht=!0,nt=tn(),ut=ln();l.useEffect(()=>{if(!nt.pathname.startsWith("/settings"))return;nt.pathname.split("/")[2]},[ht,nt.pathname,ut]),l.useEffect(()=>{const p=nt.pathname.split("/")[2];I(p??null)},[nt.pathname,ht]);const[st,ll]=l.useState(null),[kt,St]=l.useState(""),[gt,Ot]=l.useState(""),[_t,Tt]=l.useState("得点"),[Rt,Et]=l.useState("メンバー"),[Pt,Mt]=l.useState([]),[wt,At]=l.useState(!0),[Ml,jt]=l.useState(!1),[nl,sl]=l.useState(null),[wl,$t]=l.useState(!1),Al=n=>({id:crypto.randomUUID(),name:n}),$l=n=>({id:ml(),name:n,color:le,iconType:"none",tags:[],visible:!0}),pt=l.useMemo(()=>{const n=h.some(p=>!!p.locked!==P[p.id]);return JSON.stringify(O)!==JSON.stringify(o)||JSON.stringify(J)!==JSON.stringify(b)||JSON.stringify(B)!==JSON.stringify(j)||JSON.stringify(_e)!==JSON.stringify(v)||JSON.stringify(Ke)!==JSON.stringify(A)||JSON.stringify(ze)!==JSON.stringify(M)||JSON.stringify(Ie)!==JSON.stringify(U)||JSON.stringify(Se)!==JSON.stringify($)||JSON.stringify(Pe)!==JSON.stringify(k)||JSON.stringify(Me)!==JSON.stringify(N)||n},[O,J,B,_e,Ke,ze,Ie,Se,Pe,Me,P,o,b,j,v,A,M,U,$,k,N,h]),Nl=l.useMemo(()=>[{key:"teams",label:"チーム",icon:e.jsx(Il,{})},{key:"members",label:"メンバー",icon:e.jsx(Dl,{})},{key:"scores",label:"ラリー",icon:e.jsx(cn,{})},{key:"tags",label:"タグ",icon:e.jsx(kl,{})},{key:"stats",label:"スタッツ",icon:e.jsx(dn,{})},{key:"locks",label:"試合ロック",icon:e.jsx(yl,{})},{key:"theme",label:"テーマ",icon:e.jsx(et,{})},{key:"display",label:"表示・操作",icon:e.jsx(Sl,{})},{key:"data",label:"データ",icon:e.jsx(Ol,{})},{key:"license",label:"ライセンス",icon:e.jsx(xn,{})}],[]),Wl=l.useMemo(()=>[["teams","members","scores","tags","stats"],["display","theme"],["locks","data"],["license"]],[]),al=l.useCallback(()=>{const n=r.map(p=>({...p,locked:P[p.id]}));i(O,J,B,_e,Ke,ze,Ie,Se,Pe,Me,n,!0)},[B,_e,P,r,i,O,J,Ke,ze,Ie,Se,Pe,Me]),Ll=()=>{C(-1),X(""),he(le),ae("設定なし"),ge(""),t(""),x(0),E(0),Re([]),lt(!0),Ye(!0)},zl=n=>{C(n),X(B[n].name),he(B[n].color||le);const p=B[n];ae(p.iconType==="svg"?"SVG":p.iconType==="image"?"画像":"設定なし"),ge(p.svg||""),t(p.image||""),x(p.cropX||0),E(p.cropY||0),Re(p.tags||[]),lt(p.visible!==!1),Ye(!0)},Hl=()=>{const n=ue==="SVG"?"svg":ue==="画像"?"image":"none",p=n==="svg"?{iconType:n,svg:te}:n==="image"?{iconType:n,image:je,cropX:s,cropY:R}:{iconType:n};m===-1?Z(V=>[...V,{...$l(H),...p,color:ee,tags:w,visible:tt}]):m!==null&&Z(V=>V.map((ne,Oe)=>Oe===m?{...ne,name:H,...p,color:ee,tags:w,visible:tt}:ne)),Ye(!1)},rl=()=>{Ye(!1)},Fl=n=>{ct(n),Qe(!0)},Ul=()=>{if(Xe!==null&&B[Xe].id!=="init-serve"){const n=Xe,p=B[n];Z(V=>V.filter((ne,Oe)=>Oe!==n)),W("プレー区分を削除しました","success",{actionLabel:"元に戻す",onAction:()=>{Z(V=>{const ne=[...V];return ne.splice(n,0,p),ne})},autoHideDuration:5e3})}Qe(!1),ct(null)},il=()=>{Qe(!1)},Bl=()=>{var n;ll(-1),St(((n=B.find(p=>p.visible!==!1))==null?void 0:n.id)||""),Ot(""),Tt("得点"),Et("メンバー"),Mt([]),At(!0),jt(!0)},Vl=n=>{const p=_e[n];ll(n),St(p.playCategoryId),Ot(p.name),Tt(p.pointType),Et(p.pointUnitType),Mt(p.tags||[]),At(p.visible!==!1),jt(!0)},Gl=()=>{st===-1?Ee(n=>[...n,{id:ml(),playCategoryId:kt,name:gt,pointType:_t,pointUnitType:Rt,tags:Pt,visible:wt}]):st!==null&&Ee(n=>n.map((p,V)=>V===st?{...p,playCategoryId:kt,name:gt,pointType:_t,pointUnitType:Rt,tags:Pt,visible:wt}:p)),jt(!1)},ol=()=>{jt(!1)},Kl=n=>{sl(n),$t(!0)},ql=()=>{if(nl!==null){const n=nl,p=_e[n];Ee(V=>V.filter((ne,Oe)=>Oe!==n)),W("プレー詳細を削除しました","success",{actionLabel:"元に戻す",onAction:()=>{Ee(V=>{const ne=[...V];return ne.splice(n,0,p),ne})},autoHideDuration:5e3})}$t(!1),sl(null)},cl=()=>{$t(!1)};l.useEffect(()=>(y(g?e.jsx(Te,{onClick:()=>ut("/settings"),size:"small",children:e.jsx(vl,{})}):null),()=>y(null)),[y,ht,g,ut]),l.useEffect(()=>(d==null||d(pt),()=>d==null?void 0:d(!1)),[pt,d]),l.useEffect(()=>{pt&&al()},[pt,al]);const Jl=n=>n.iconType==="svg"&&n.svg?e.jsx(c,{sx:{width:64,height:64},dangerouslySetInnerHTML:{__html:bl(n.svg)}}):n.iconType==="image"&&n.image?e.jsx(c,{component:"img",src:n.image,sx:{width:64,height:64,objectFit:"none",objectPosition:`-${n.cropX||0}px -${n.cropY||0}px`}}):e.jsx(_s,{name:n.name});return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",height:"100dvh"},children:[g===null?e.jsx(c,{children:Wl.map((n,p)=>e.jsx(en,{orientation:"vertical",fullWidth:!0,variant:"outlined",sx:{mb:2,"& .MuiButton-root":{justifyContent:"flex-start",color:V=>V.palette.text.secondary,height:50,textAlign:"left"},"& .MuiButton-root .MuiButton-startIcon":{mr:1},"& .MuiButton-root .MuiButton-endIcon":{marginLeft:"auto"},"& .MuiButtonGroup-grouped":{borderColor:"divider"}},children:n.map(V=>{const ne=Nl.find(Oe=>Oe.key===V);return ne?e.jsx(f,{onClick:()=>ut(`/settings/${V}`),startIcon:ne.icon,endIcon:e.jsx(Cl,{sx:{color:Oe=>Oe.palette.text.secondary}}),children:ne.label},V):null})},p))}):null,g!==null&&e.jsx(c,{sx:{mt:0,flexGrow:1,overflowY:"visible"},children:e.jsx(hn,{mode:"wait",children:g&&e.jsxs(Ss,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[g==="teams"&&e.jsx(Hn,{teams:O,setTeams:Q,setMembers:D,selectedTeam:_,setSelectedTeam:Y,createTeam:Al,showSnackbar:W}),g==="members"&&(O.length===0?e.jsxs(mt,{severity:"info",children:["チームを登録するとメンバーを設定できるようになります",e.jsx("br",{}),e.jsx(Nt,{component:nn,to:"/settings/teams",children:"チーム設定へ"})]}):_&&e.jsx(Un,{teams:O,members:J,setMembers:D,selectedTeam:_,setSelectedTeam:Y,showSnackbar:W})),g==="scores"&&e.jsx(Bn,{openAddPlayDialog:Ll,playCategories:B,setPlayCategories:Z,openEditPlayDialog:zl,scoreInput:Me,renderIcon:Jl,rallyCategoryTags:Ie,handlePlayDelete:Fl,openAddDetailDialog:Bl,playDetails:_e,setPlayDetails:Ee,openEditDetailDialog:Vl,theme:Pe,rallyDetailTags:Se,handleDetailDelete:Kl}),g==="stats"&&e.jsx(Kn,{statsSettings:Ke,setStatsSettings:dt,playCategories:B,playDetails:_e,rallyCategoryTags:Ie,rallyDetailTags:Se,showSnackbar:W}),g==="tags"&&e.jsx(Vn,{tags:ze,setTags:vt,rallyCategoryTags:Ie,setRallyCategoryTags:Ct,rallyDetailTags:Se,setRallyDetailTags:It,setMatches:S,setPlayCategories:Z,setPlayDetails:Ee,showSnackbar:W}),g==="locks"&&e.jsx(rs,{teams:O,matches:r,tags:ze,matchLocks:P,setMatchLocks:q,lockGroupBy:T,setLockGroupBy:Ce,isMobile:ht}),g==="theme"&&e.jsx(Qn,{theme:Pe,onThemeChange:Dt}),g==="display"&&e.jsx(ls,{scoreInput:Me,onScoreInputChange:xt,dashboardVisible:K,onDashboardVisibleChange:L,showSnackbar:W}),g==="data"&&e.jsx(bs,{onDeleteData:u,onImportData:z,onExportData:G,showSnackbar:W,teams:O,setTeams:Q,setMembers:D,playCategories:B,setPlayCategories:Z,setPlayDetails:Ee}),g==="license"&&e.jsx(ks,{})]},g)})}),e.jsxs(Fe,{open:bt,onClose:rl,children:[e.jsxs(ie,{children:["プレー区分",m===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[e.jsx(se,{label:"プレー区分",value:H,onChange:n=>X(n.target.value),fullWidth:!0,margin:"dense"}),e.jsx(se,{label:"色",type:"color",value:ee,onChange:n=>he(n.target.value),margin:"dense",InputLabelProps:{shrink:!0},fullWidth:!0}),e.jsx(Ze,{multiple:!0,options:Ie,getOptionLabel:n=>n.name,value:Ie.filter(n=>w.includes(n.id)),onChange:(n,p)=>Re(p.map(V=>V.id)),renderTags:(n,p)=>n.map((V,ne)=>l.createElement(me,{...p({index:ne}),key:V.id,label:V.name,size:"small",sx:{backgroundColor:V.color||le,color:"#fff"}})),renderInput:n=>e.jsx(se,{...n,label:"タグ",margin:"dense"})}),e.jsxs(mt,{severity:"info",children:["プレー区分タグは設定＞タグメニューにて追加できます",e.jsx("br",{}),"プレー区分にタグを設定することにより、プレー区分を横串で集計することが可能となります"]}),e.jsxs(ot,{exclusive:!0,value:tt?"表示":"非表示",onChange:(n,p)=>p&&lt(p==="表示"),fullWidth:!0,children:[e.jsxs(De,{value:"表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(qe,{sx:{mr:1}}),"表示"]}),e.jsxs(De,{value:"非表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(Je,{sx:{mr:1}}),"非表示"]})]}),Me.showRallyIcons&&e.jsxs(e.Fragment,{children:[e.jsxs(ot,{exclusive:!0,value:ue,onChange:(n,p)=>p&&ae(p),children:[e.jsx(De,{value:"設定なし",children:"設定なし"}),e.jsx(De,{value:"SVG",children:"SVG"}),e.jsx(De,{value:"画像",children:"画像"})]}),ue==="SVG"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{sx:{width:64,height:64},dangerouslySetInnerHTML:{__html:bl(te)}}),e.jsx(se,{multiline:!0,minRows:10,label:"SVG",value:te,onChange:n=>ge(n.target.value),fullWidth:!0,margin:"dense"})]}),ue==="画像"&&e.jsxs(e.Fragment,{children:[je&&e.jsx(Os,{src:je,cropX:s,cropY:R,onChange:(n,p)=>{x(n),E(p)}}),e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/bmp,image/tiff,image/gif",onChange:n=>{var ne;const p=(ne=n.target.files)==null?void 0:ne[0];if(!p)return;const V=new FileReader;V.onload=()=>{t(V.result)},V.readAsDataURL(p)}})]})]})]}),e.jsxs(ce,{children:[e.jsx(f,{onClick:rl,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(f,{onClick:Hl,disabled:H.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(Fe,{open:Ml,onClose:ol,children:[e.jsxs(ie,{children:["プレー詳細",st===-1?"追加":"編集"]}),e.jsxs(oe,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(pe,{fullWidth:!0,sx:{mt:3},children:[e.jsx(ve,{id:"detail-category-label",children:"プレー区分"}),e.jsx(fe,{labelId:"detail-category-label",value:kt,label:"プレー区分",onChange:n=>St(n.target.value),children:B.map(n=>e.jsx(F,{value:n.id,children:n.name},n.id))})]}),e.jsx(se,{label:"プレー詳細",value:gt,onChange:n=>Ot(n.target.value),margin:"dense"}),e.jsxs(pe,{fullWidth:!0,children:[e.jsx(ve,{id:"detail-point-label",children:"得点区分"}),e.jsxs(fe,{labelId:"detail-point-label",value:_t,label:"得点区分",onChange:n=>Tt(n.target.value),children:[e.jsx(F,{value:"得点",children:"得点"}),e.jsx(F,{value:"失点",children:"失点"})]})]}),e.jsxs(pe,{fullWidth:!0,children:[e.jsx(ve,{id:"detail-point-unit-label",children:"得失点単位区分"}),e.jsxs(fe,{labelId:"detail-point-unit-label",value:Rt,label:"得失点単位区分",onChange:n=>Et(n.target.value),disabled:st!==-1,children:[e.jsx(F,{value:"メンバー",children:"メンバー"}),e.jsx(F,{value:"チーム",children:"チーム"})]})]}),e.jsx(mt,{severity:"warning",sx:{whiteSpace:"pre-line"},children:`得失点単位区分は追加時にのみ設定でき、後から変更できません
再設定する場合はプレー詳細を作り直してください`}),e.jsx(Ze,{multiple:!0,options:Se,getOptionLabel:n=>n.name,value:Se.filter(n=>Pt.includes(n.id)),onChange:(n,p)=>Mt(p.map(V=>V.id)),renderTags:(n,p)=>n.map((V,ne)=>{const Oe=V.color||le;return l.createElement(me,{...p({index:ne}),key:V.id,label:V.name,size:"small",sx:{backgroundColor:Oe,color:"#fff"}})}),renderInput:n=>e.jsx(se,{...n,label:"タグ",margin:"dense"})}),e.jsxs(mt,{severity:"info",children:["プレー詳細タグは設定＞タグメニューにて追加できます",e.jsx("br",{}),"プレー詳細にタグを設定することにより、プレー詳細を横串で集計することが可能となります"]}),e.jsxs(ot,{exclusive:!0,value:wt?"表示":"非表示",onChange:(n,p)=>p&&At(p==="表示"),fullWidth:!0,children:[e.jsxs(De,{value:"表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(qe,{sx:{mr:1}}),"表示"]}),e.jsxs(De,{value:"非表示",sx:{width:"50%",whiteSpace:"nowrap"},children:[e.jsx(Je,{sx:{mr:1}}),"非表示"]})]})]}),e.jsxs(ce,{children:[e.jsx(f,{onClick:ol,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(f,{onClick:Gl,disabled:gt.trim()==="",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:yt,onClose:il,children:[e.jsx(ie,{children:"削除確認"}),e.jsxs(oe,{sx:{mt:2},children:["このプレー区分を削除しますか？",e.jsx(c,{sx:{mt:1},children:"削除すると、すでに入力されている試合のスコアや分析に影響が出る可能性があります。"})]}),e.jsxs(ce,{children:[e.jsx(f,{onClick:il,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(f,{onClick:Ul,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]}),e.jsxs(ke,{open:wl,onClose:cl,children:[e.jsx(ie,{children:"削除確認"}),e.jsxs(oe,{sx:{mt:2},children:["このプレー詳細を削除しますか？",e.jsx(c,{sx:{mt:1},children:"削除すると、すでに入力されている試合のスコアや分析に影響が出る可能性があります。"})]}),e.jsxs(ce,{children:[e.jsx(f,{onClick:cl,color:"inherit",startIcon:e.jsx(de,{}),children:"キャンセル"}),e.jsx(f,{onClick:ql,color:"error",startIcon:e.jsx(xe,{}),children:"OK"})]})]})]})}export{$s as default};
